!function(){"use strict";var e,t,n;!function(e){e[e.REGEX=2]="REGEX",e[e.HEAD_MATCH=3]="HEAD_MATCH",e[e.END_MATCH=4]="END_MATCH",e[e.EXACT_MATCH=5]="EXACT_MATCH",e[e.INCLUDE=8]="INCLUDE"}(e||(e={})),function(e){e[e.UNKNOWN=0]="UNKNOWN",e[e.SMARTPHONE=1]="SMARTPHONE",e[e.PC=2]="PC",e[e.SIMULATOR=3]="SIMULATOR",e[e.TABLET=4]="TABLET"}(t||(t={})),function(e){e[e.NON=0]="NON",e[e.INEFFECTIVE=1]="INEFFECTIVE",e[e.EFFECTIVE=2]="EFFECTIVE"}(n||(n={}));var i="pt_",r="_pt_link",o="_s_",a=1e3,l=15e3,c=1e3,u=4e3,s="preview_ptx_token",p="ptengine_engage_control_group",d="ptengine_engage_editor_token",f="ptengine_editor_iframe",h="ptengine_heatmap_token",v="ptengine_heatmap_iframe",b="ptengine-event=open",m="ptengine_event_iframe",g="ptengine-event-explore=open",y="pt-async-hide",w=/(\?|&|#)_pt_link=([^&|#]*)(&|#)?/,_="pt_widget",O={PC:t.PC,SMARTPHONE:t.SMARTPHONE,UNKNOWN:t.UNKNOWN,SIMULATOR:t.SIMULATOR,TABLET:t.TABLET},T={ROUTER_CHANGE:"routerChange",SESSION_TIMEOUT:"sessionTimeout",PAGE_ON_CLICK:"pageOnClick",SHOW_POPUP:"showPopup",CLEAR_POPUP:"clearPopup",CLEAR_EXPERIENCE:"clearExperience"},P=["2dfd029f","323b0b0c","14311cf1","4ea10743","4d304c7a","46635348","31aee115","39a47d27","1568e5d4","1a8c08b0","6f1b18fd","566d12f9","51add8fa","15d58c7b","223c998c","17d1d4aa","308c8fdc","5102c629","5b85c19b","4e8daed1","7201105c","645474fb","4e63000f","5990295c","699082d1","11b7dcb8","41nxng7i","37f93wes","68fn68ca","6a67kck8"],E="ptengine",S="v3.0.23102501.1698850894",I="_ptHeartbeatInterval",C="_pt_sp_2",j="_ptExperiencePreview";function k(e,t){return void 0===t&&(t=!1),encodeURIComponent instanceof Function?t?encodeURI(e):encodeURIComponent(e):escape(e)}function x(e,t){void 0===t&&(t=!1);var n="";if(e=e.split("+").join(" "),decodeURIComponent instanceof Function)try{n=t?decodeURI(e):decodeURIComponent(e)}catch(t){n=unescape(e)}else n=unescape(e);return n}function A(e){return e.replace(/(^\s*)/g,"").replace(/(\s*$)/g,"")}function D(e,t){var n;return function(){var i=this,r=arguments;n&&(clearTimeout(n),n=null),n=setTimeout((function(){e.apply(i,r)}),t)}}function L(e){for(var t={},n=0,i=e;n<i.length;n++){var r=i[n];if(Object(r)!==r)throw new TypeError("iterable for fromEntries should yield objects");var o=r[0],a=r[1];Object.defineProperty(t,o,{configurable:!0,enumerable:!0,writable:!0,value:a})}return t}function N(e){return N="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},N(e)}var R=function(e,t){return R=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},R(e,t)};function M(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}R(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}var F=function(){return F=Object.assign||function(e){for(var t,n=1,i=arguments.length;n<i;n++)for(var r in t=arguments[n])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e},F.apply(this,arguments)};function B(e,t,n){if(n||2===arguments.length)for(var i,r=0,o=t.length;r<o;r++)!i&&r in t||(i||(i=Array.prototype.slice.call(t,0,r)),i[r]=t[r]);return e.concat(i||Array.prototype.slice.call(t))}function U(e,t){return Object.defineProperty?Object.defineProperty(e,"raw",{value:t}):e.raw=t,e}var H=function(){function e(){Object.defineProperty(this,"events",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.events={}}return Object.defineProperty(e.prototype,"on",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t){this.events[e]||(this.events[e]=[]),this.events[e].push(t)}}),Object.defineProperty(e.prototype,"off",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t){if(this.events[e])if(t)for(var n=this.events[e],i=n.length;i--;)t===n[i]&&n.splice(i,1);else this.events[e]=[]}}),Object.defineProperty(e.prototype,"emit",{enumerable:!1,configurable:!0,writable:!0,value:function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];if(this.events[e])for(var i=0,r=this.events[e];i<r.length;i++){var o=r[i];o.call.apply(o,B([this],t,!1))}}}),Object.defineProperty(e.prototype,"once",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t){var n=this;this.on(e,(function i(){for(var r=[],o=0;o<arguments.length;o++)r[o]=arguments[o];t.call.apply(t,B([n],r,!1)),n.off(e,i)}))}}),e}();function $(e,t){return"number"!=typeof e||isNaN(e)?t:e}!function(){if(void 0!==window.Reflect&&void 0!==window.customElements&&!window.customElements.polyfillWrapFlushCallback){var e=HTMLElement;window.HTMLElement=function(){return Reflect.construct(e,[],this.constructor)},HTMLElement.prototype=e.prototype,HTMLElement.prototype.constructor=HTMLElement,Object.setPrototypeOf(HTMLElement,e)}}();var V="pt-experience";function W(e){return void 0===e&&(e=window),e.document.querySelector(V)||function(e){void 0===e&&(e=window);var t,n=document.createElement(V);return customElements.get(V)||customElements.define(V,(t=function(e){function t(){var t=e.call(this)||this;return t.attachShadow({mode:"open"}),t}return M(t,e),Object.defineProperty(t.prototype,"connectedCallback",{enumerable:!1,configurable:!0,writable:!0,value:function(){var e,t=document.createElement("style");t.innerHTML="\n              :host {\n                all: initial;\n              }\n            ",null===(e=this.shadowRoot)||void 0===e||e.appendChild(t)}}),t}(HTMLElement),t)),e.document.body.appendChild(n),n}(e)}function G(e,t){var n;void 0===t&&(t=window),null===(n=W(t).shadowRoot)||void 0===n||n.appendChild(e)}function q(e){return"[object ShadowRoot]"===Object.prototype.toString.call(e)}function z(e){return null==e?void 0:e.host}function Y(){return Boolean((document.head.createShadowRoot||document.head.attachShadow)&&window.customElements)}function J(e,t){var n;void 0===t&&(t=window);var i=t.document.querySelector(e);if(!i){var r=t.document.querySelector(V);return(null===(n=null==r?void 0:r.shadowRoot)||void 0===n?void 0:n.querySelector(e))||null}return i}function X(e,t){var n;void 0===t&&(t=window);var i=t.document.querySelector(V),r=[].slice.call(t.document.querySelectorAll(e)),o=[].slice.call((null===(n=null==i?void 0:i.shadowRoot)||void 0===n?void 0:n.querySelectorAll(e))||[]);return B(B([],r,!0),o,!0)}function K(e){var t,n=Ue.document.querySelector("pt-experience");return(null===(t=null==n?void 0:n.shadowRoot)||void 0===t?void 0:t.querySelectorAll(e))||[]}function Q(e){return q(e)?z(e):e.parentNode}function Z(e){return void 0===e&&(e=window),e.navigator.userAgent.indexOf("MSIE ")>0||!!navigator.userAgent.match(/Trident.*rv\:11\./)}function ee(e,t,n){var i;void 0===n&&(n=!0);var r,o=e.createElement("script");if(o.type="text/javascript",o.async=!0,o.src=t,n){var a=e.getElementsByTagName("script")[0];null===(i=null==a?void 0:a.parentNode)||void 0===i||i.insertBefore(o,a)}else r=o,document.body?document.body.appendChild(r):ce(document,"DOMContentLoaded",(function(){document.body.appendChild(r)}));return o}function te(){try{var e=(new Date).getTimezoneOffset();return e||0===e?"GMT"+(e<=0?"+":"")+e/60*-1:""}catch(e){return""}}function ne(e){void 0===e&&(e=window);try{var t=e.navigator.userAgent;return t?function(e){void 0===e&&(e=window);var t=e.navigator.platform.toLowerCase();if(t.indexOf("win")>-1)return!0;for(var n=["mac68k","macppc","macintosh","macintel"],i=0;i<n.length;i++)if(t===n[i])return!0;return!1}(e)||function(e){for(var t=["AIX","Amiga","BeOS","DragonFly","FreeBSD","GNU","Haiku","HP-UX","IRIX","Joli","Java","Macintosh","Minix","MorphOS","NetBSD","OpenBSD","PClinuxOS","QNX x86pc","SunOS","Ubuntu","Mint","Red Hat","Slackware","SUSE","PCLinuxOS","Debian","Fedora","CentOS","Vine","Arch Linux","Gentoo","Kanotix","Mandriva"],n=0;n<t.length;n++)if(e.indexOf(t[n])>-1)return!0;return!1}(t)?function(e){for(var t=["Android","AROS","Bada","BlackBerry","Chromium","CrOS","Danger Hiptop","Inferno","iPhone","iPad","iPod","Nintendo DS","Nintendo Wii","Palm OS","PLAYSTATION","Syllable","SymbOS","Symbian","Tizen","webOS","WebTV","Windows CE","Windows Mobile","Windows Phone","Xbox"],n=0;n<t.length;n++)if(e.indexOf(t[n])>-1)return!0;return!1}(t)?t.indexOf("iPad")>-1||t.match(/.*MSIE.*Windows NT 6\.2;.*Touch\).*/)||Math.min(ie(),e.screen.height)>=1e3?4:1:2:t.indexOf("iPad")>-1||Math.min(ie(e),e.screen.height)>=1e3?4:1:0}catch(e){return 0}}function ie(e){void 0===e&&(e=window);try{var t=e.screen.width;return t?isNaN(parseInt(t.toString(),10))?0:parseInt(t.toString(),10):0}catch(e){return 0}}function re(e){void 0===e&&(e=window);try{var t=e.screen.height;return t?isNaN(parseInt(t.toString(),10))?0:parseInt(t.toString(),10):0}catch(e){return 0}}function oe(e){void 0===e&&(e=window);var t=self.innerWidth||e.document.body.clientWidth;return isNaN(t)?0:parseInt(t.toString(),10)}function ae(e){void 0===e&&(e=window);try{var t=self.innerHeight||e.document.body.clientHeight;return isNaN(t)?0:parseInt(t.toString(),10)}catch(e){return 0}}function le(e){void 0===e&&(e=window);try{var t=e.document.getElementsByTagName("title")[0]&&e.document.getElementsByTagName("title")[0].innerHTML||e.document.title;return A(t.split("#")[0])}catch(e){return""}}function ce(e,t,n,i){void 0===i&&(i=!1),e.addEventListener?e.addEventListener(t,n,i):e.attachEvent&&e.attachEvent("on"+t,n)}function ue(e,t,n){e.removeEventListener?e.removeEventListener(t,n,!1):e.detachEvent&&e.detachEvent("on"+t,n)}function se(e){return void 0===e&&(e=window),void 0===e.screen.orientation||0===e.screen.orientation.angle?1:-1}function pe(e){return void 0===e&&(e=window),/MicroMessenger/i.test(e.navigator.userAgent)}function de(e){var t=0;try{t=(null==e?void 0:e.scrollTop)||window.pageYOffset,t=isNaN(t)?0:t}catch(e){t=0}return parseInt(t.toString(),10)}function fe(e,t){var n=+de(t)+ +function(e){void 0===e&&(e=window);try{var t=e.innerHeight||e.document.documentElement.clientHeight||e.document.body.clientHeight;return t?isNaN(parseInt(t.toString(),10))?0:parseInt(t.toString(),10):0}catch(e){return 0}}(e);return isNaN(n)?0:parseInt(n.toString(),10)}function he(e){return/(#[0-9]+)/.test(e)?e.replace(/(^|>)(#)([^>]+)/g,(function(e,t,n,i){return"".concat(t,'[id="').concat(i.trim(),'"]')})):e}function ve(e){var t;return{"jstest.ptmind.cn":"jp","jstest.ptengine.jp":"jp","js.ptengine.jp":"jp","jstest.ptmind.com":"en","jstest.ptengine.com":"en","js.ptengine.com":"en"}[(null===(t=((null==e?void 0:e.getAttribute("src"))||"").match(/js(test)?\.(ptengine|ptmind)\.(jp|com|cn)/))||void 0===t?void 0:t[0])||""]||"en"}function be(e,t){return void 0===t&&(t=window),-1!==t.location.href.indexOf(e)}function me(e,t){var n,i,r;return void 0===t&&(t=window),-1!==(null===(i=null===(n=t.document)||void 0===n?void 0:n.referrer)||void 0===i?void 0:i.indexOf(e))&&function(e,t){if(!e||!t)return!1;var n=ye(e)||{},i=n.protocol,r=n.host,o=n.port,a=n.pathname,l=n.hash,c=ye(t)||{},u=c.protocol,s=c.host,p=c.port,d=c.pathname,f=c.hash;return x("".concat(i,"://").concat(r).concat(null!=o?o:"").concat(a).concat(Be.watchRouterHashChange&&l?l:""))===x("".concat(u,"://").concat(s).concat(null!=p?p:"").concat(d).concat(Be.watchRouterHashChange&&f?f:""))}(t.location.href,null===(r=t.document)||void 0===r?void 0:r.referrer)}function ge(e,t){return void 0===t&&(t=window),be(e,t)||me(e,t)}function ye(e){var t=document.createElement("a");return t.href=e,t}function we(e){for(var t={},n=("?"===e[0]?e.substr(1):e).split("&"),i=0;i<n.length;i++){var r=n[i].split("=");t[decodeURIComponent(r[0])]=decodeURIComponent(r[1]||"")}return t}function _e(e){for(var t=x(e),n=0;t!==e&&n<10;)t=x(e=t),n++;return t}function Oe(e){return(e=(e=(e=e.replace(/www\./,"")).replace(/\/\?/,"?")).replace(/\/\#/,"#")).replace(/\/$/,"")}function Te(e){var t=new RegExp("[#|?|&]".concat(r,"=[^#|^&]*"),"g"),n=e.match(t),i=e;return n&&n.forEach((function(e){var t=i.split(e);i=t[0]+(t[1]?t[1]:"")})),i||e}function Pe(e,t){try{var n=e.toLowerCase().split("."),i=t.toLowerCase().split(".");if(n.length!==i.length)return!1;for(var r=n.length-1;r>=0;r--)if(n[r]!==i[r])return!1}catch(e){return!1}return!0}function Ee(e,t){try{var n=e.toLowerCase().split("."),i=t.toLowerCase().split(".");if(n.length<i.length)return!1;for(var r=i.length-1;r>=0;r--)if(n[r+(n.length-i.length)]!==i[r])return!1}catch(e){return!1}return!0}function Se(e){var t=Ie(e);return t&&function(e){for(var t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-/",n="",i=0;i<e.length/6-1;)n+=t.charAt(Number(parseInt(e.slice(6*i,6*(i+1)),2).toString(10))),i++;var r=e.slice(6*i,6*(i+1));if(r){var o=r.length;for(i=0;i<6-o;i++)r+="0";n+=t.charAt(Number(parseInt(r,2).toString(10)))}return n}(function(e){for(var t="",n="",i=0,r=e.length,o=0;o<r;o++){i=(n=parseInt(e.charAt(o),16).toString(2)).length;for(var a=0;a<4-i;a++)n="0"+n;t+=n}return t}(t))}function Ie(e){function t(e,t){return e<<t|e>>>32-t}function n(e,t){var n=2147483648&e,i=2147483648&t,r=1073741824&e,o=1073741824&t,a=(1073741823&e)+(1073741823&t);return r&o?2147483648^a^n^i:r|o?1073741824&a?3221225472^a^n^i:1073741824^a^n^i:a^n^i}function i(e,i,r,o,a,l,c){return e=n(e,n(n(function(e,t,n){return e&t|~e&n}(i,r,o),a),c)),n(t(e,l),i)}function r(e,i,r,o,a,l,c){return e=n(e,n(n(function(e,t,n){return e&n|t&~n}(i,r,o),a),c)),n(t(e,l),i)}function o(e,i,r,o,a,l,c){return e=n(e,n(n(function(e,t,n){return e^t^n}(i,r,o),a),c)),n(t(e,l),i)}function a(e,i,r,o,a,l,c){return e=n(e,n(n(function(e,t,n){return t^(e|~n)}(i,r,o),a),c)),n(t(e,l),i)}function l(e){var t,n="",i="";for(t=0;t<=3;t++)n+=(i="0"+(e>>>8*t&255).toString(16)).substr(i.length-2,2);return n}var c,u,s,p,d,f,h,v,b,m;for(c=function(e){for(var t,n=e.length,i=n+8,r=16*((i-i%64)/64+1),o=Array(r-1),a=0,l=0;l<n;)a=l%4*8,o[t=(l-l%4)/4]=o[t]|e.charCodeAt(l)<<a,l++;return a=l%4*8,o[t=(l-l%4)/4]=o[t]|128<<a,o[r-2]=n<<3,o[r-1]=n>>>29,o}(e),h=1732584193,v=4023233417,b=2562383102,m=271733878,u=0;u<c.length;u+=16)s=h,p=v,d=b,f=m,h=i(h,v,b,m,c[u+0],7,3614090360),m=i(m,h,v,b,c[u+1],12,3905402710),b=i(b,m,h,v,c[u+2],17,606105819),v=i(v,b,m,h,c[u+3],22,3250441966),h=i(h,v,b,m,c[u+4],7,4118548399),m=i(m,h,v,b,c[u+5],12,1200080426),b=i(b,m,h,v,c[u+6],17,2821735955),v=i(v,b,m,h,c[u+7],22,4249261313),h=i(h,v,b,m,c[u+8],7,1770035416),m=i(m,h,v,b,c[u+9],12,2336552879),b=i(b,m,h,v,c[u+10],17,4294925233),v=i(v,b,m,h,c[u+11],22,2304563134),h=i(h,v,b,m,c[u+12],7,1804603682),m=i(m,h,v,b,c[u+13],12,4254626195),b=i(b,m,h,v,c[u+14],17,2792965006),h=r(h,v=i(v,b,m,h,c[u+15],22,1236535329),b,m,c[u+1],5,4129170786),m=r(m,h,v,b,c[u+6],9,3225465664),b=r(b,m,h,v,c[u+11],14,643717713),v=r(v,b,m,h,c[u+0],20,3921069994),h=r(h,v,b,m,c[u+5],5,3593408605),m=r(m,h,v,b,c[u+10],9,38016083),b=r(b,m,h,v,c[u+15],14,3634488961),v=r(v,b,m,h,c[u+4],20,3889429448),h=r(h,v,b,m,c[u+9],5,568446438),m=r(m,h,v,b,c[u+14],9,3275163606),b=r(b,m,h,v,c[u+3],14,4107603335),v=r(v,b,m,h,c[u+8],20,1163531501),h=r(h,v,b,m,c[u+13],5,2850285829),m=r(m,h,v,b,c[u+2],9,4243563512),b=r(b,m,h,v,c[u+7],14,1735328473),h=o(h,v=r(v,b,m,h,c[u+12],20,2368359562),b,m,c[u+5],4,4294588738),m=o(m,h,v,b,c[u+8],11,2272392833),b=o(b,m,h,v,c[u+11],16,1839030562),v=o(v,b,m,h,c[u+14],23,4259657740),h=o(h,v,b,m,c[u+1],4,2763975236),m=o(m,h,v,b,c[u+4],11,1272893353),b=o(b,m,h,v,c[u+7],16,4139469664),v=o(v,b,m,h,c[u+10],23,3200236656),h=o(h,v,b,m,c[u+13],4,681279174),m=o(m,h,v,b,c[u+0],11,3936430074),b=o(b,m,h,v,c[u+3],16,3572445317),v=o(v,b,m,h,c[u+6],23,76029189),h=o(h,v,b,m,c[u+9],4,3654602809),m=o(m,h,v,b,c[u+12],11,3873151461),b=o(b,m,h,v,c[u+15],16,530742520),h=a(h,v=o(v,b,m,h,c[u+2],23,3299628645),b,m,c[u+0],6,4096336452),m=a(m,h,v,b,c[u+7],10,1126891415),b=a(b,m,h,v,c[u+14],15,2878612391),v=a(v,b,m,h,c[u+5],21,4237533241),h=a(h,v,b,m,c[u+12],6,1700485571),m=a(m,h,v,b,c[u+3],10,2399980690),b=a(b,m,h,v,c[u+10],15,4293915773),v=a(v,b,m,h,c[u+1],21,2240044497),h=a(h,v,b,m,c[u+8],6,1873313359),m=a(m,h,v,b,c[u+15],10,4264355552),b=a(b,m,h,v,c[u+6],15,2734768916),v=a(v,b,m,h,c[u+13],21,1309151649),h=a(h,v,b,m,c[u+4],6,4149444226),m=a(m,h,v,b,c[u+11],10,3174756917),b=a(b,m,h,v,c[u+2],15,718787259),v=a(v,b,m,h,c[u+9],21,3951481745),h=n(h,s),v=n(v,p),b=n(b,d),m=n(m,f);return l(h)+l(v)+l(b)+l(m)}function Ce(){var e=(new Date).getTime();return"undefined"!=typeof performance&&"function"==typeof performance.now&&(e+=performance.now()),"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(function(t){var n=(e+16*function(){if("function"==typeof Uint32Array){var e="";if("undefined"!=typeof crypto?e=crypto:void 0!==window.msCrypto&&(e=window.msCrypto),"object"==typeof e&&(null==e?void 0:e.getRandomValues)){var t=new Uint32Array(1);return e.getRandomValues(t)[0]/Math.pow(2,32)}}return n=(new Date).getTime(),Math.ceil(1e19*function(e){return(e=(9301*e+49297)%233280)/233280}(n))/1e19;var n}())%16|0;return e=Math.floor(e/16),("x"===t?n:3&n|8).toString(16)}))}function je(e){var t,n;void 0===e&&(e=window.event);var i=((null==e?void 0:e.composed)?e.composedPath()[0]:null==e?void 0:e.target)||(null===(t=window.event)||void 0===t?void 0:t.srcElement);try{if((null==i?void 0:i.shadowRoot)&&("touchend"===(null==e?void 0:e.type)||"touchstart"===(null==e?void 0:e.type))){var r="touchend"===e.type?e.changedTouches:e.touches;(null==r?void 0:r[0])&&(i=null===(n=i.shadowRoot)||void 0===n?void 0:n.elementFromPoint(r[0].clientX,r[0].clientY))}}catch(e){}return i}function ke(e,t){void 0===t&&(t=window);var n={top:0,left:0};if(void 0!==e.getBoundingClientRect){var i=t.document.documentElement,r=e.getBoundingClientRect();n={top:r.top+(t.pageYOffset||i.scrollTop)-(i.clientTop||0),left:r.left+(t.pageXOffset||i.scrollLeft)-(i.clientLeft||0)}}else{if(n.top+=e.offsetTop,n.left+=e.offsetLeft,e.offsetParent){var o=ke(e.offsetParent);n.top+=o.top,n.left+=o.left}n.top<0&&(n.top=0),n.left<0&&(n.left=0),n.top=isNaN(n.top)?0:parseInt(n.top.toString(),10),n.left=isNaN(n.left)?0:parseInt(n.left.toString(),10)}return n.top=Math.round(n.top),n.left=Math.round(n.left),n}function xe(e){var t={x:0,y:0};try{t.x=e.touches[0].pageX?e.touches[0].pageX:e.clientX,t.y=e.touches[0].pageY?e.touches[0].pageY:e.clientY,t.x||(t.x=0),t.y||(t.y=0)}catch(e){}return t.x=isNaN(t.x)?0:parseInt(t.x.toString(),10),t.y=isNaN(t.y)?0:parseInt(t.y.toString(),10),t}function Ae(e,t){var n;if(!e)return"";var i=e.nodeName.toLowerCase();if("body"===i||"html"===i)return"body";var r=e.parentNode;if(!r)return"";if(q(r))return Ae(z(r))+">shadowRoot";var o=null===(n=e.getAttribute)||void 0===n?void 0:n.call(e,"id");if(r&&o)return Ae(r)+">#"+o.replace(/([^a-zA-Z0-9_-])/g,"\\$1").replace(/^([0-9])/,"\\3$1 ").replace(/^(-[0-9-])/,"\\$1");if(-1!==["input","select","textarea","button"].indexOf(i)&&e.getAttribute("name")){var a=r.querySelectorAll(i+"[name='"+e.getAttribute("name")+"']");if(a.length>1){for(var l=0;l<a.length;l++)if(a[l]===e)return"".concat(Ae(r),">").concat(i,":input[name='").concat(e.getAttribute("name"),"']:eq(").concat(l,")")}else if(1===a.length)return Ae(r)+">"+i+":input[name='"+e.getAttribute("name")+"']"}for(var c=[],u=0;u<r.children.length;u++){var s=r.children[u];s.nodeName&&s.nodeName.toLowerCase()===i&&c.push(s)}for(var p=0;p<c.length;p++)if(c[p]===e)return"".concat(Ae(r),">").concat(i,":eq(").concat(p,")");return""}function De(e,t){var n,i=null==e?void 0:e.nodeName.toLowerCase(),r=null===(n=null==e?void 0:e.getAttribute)||void 0===n?void 0:n.call(e,"type"),o="input"===i&&("submit"===r||"image"===r||"button"===r),a=Boolean(e.onclick);return{elementType:-1!==["a","input","select","embed","object","textarea","button"].indexOf(i)||a||0!==t?1:0===e.childNodes.length||1===e.childNodes.length&&1!==e.childNodes[0].nodeType?2:0,interactionType:-1!==["a","button"].indexOf(i)||o||a||2===t?1:0}}function Le(e,t){if(!e||!t)return!1;for(;"body"!==e.nodeName.toLowerCase();){if(e===t)return!0;e=Q(e)}return!1}function Ne(e,t,n){if(void 0===n&&(n=window),!t||!e)return null;for(var i=function(e,t,n){void 0===n&&(n=window);var i=X(e=x(e,!1),n);return i}(t,0,n),r=null,o=0,a=i.length;o<a;o++)if(Le(e,i[o])){r=i[o];break}return r}function Re(e){return!!e&&("fixed"===getComputedStyle(e).position||Re(e.parentElement))}function Me(e,t){for(var n,i=e.getElementsByTagName(t),r=[],o=i.length-1;o>=0;o--){var a=i[o];null===(n=null==a?void 0:a.parentNode)||void 0===n||n.removeChild(a),r.push(a)}}function Fe(e,t){void 0===t&&(t=!0);var n=[];try{n=(window[C]||[]).filter((function(t){return t.startsWith(e)})).map((function(e){return e.split(",")}))}catch(e){}return(t?null==n?void 0:n[0]:n)||[]}var Be={"sid":"749kjopx","domain":["carepro-hairmedication.com"],"crossDomainEnabled":false,"crossAnyDomain":false,"watchRouterHashChange":false,"frameworkName":"","silentTimes":{"mobile":5,"pc":30},"ptxEventList":[],"ptiEventList":[{"eventId":1686033462934,"eventName":"care%20pro%E3%83%96%E3%83%A9%E3%83%B3%E3%83%89%E3%82%B5%E3%82%A4%E3%83%88%E8%B3%BC%E5%85%A5%E3%83%9C%E3%82%BF%E3%83%B3","source":"insight","selfSelector":"body > div:nth-of-type(1) > main:nth-of-type(1) > div:nth-of-type(2) > div:nth-of-type(3) > div:nth-of-type(2) > a:nth-of-type(1)","sameSelector":"body%20%3E%20div%3Anth-of-type(1)%20%3E%20main%3Anth-of-type(1)%20%3E%20div%3Anth-of-type(2)%20%3E%20div%3Anth-of-type(3)%20%3E%20div%3Anth-of-type(2)%20%3E%20a%3Anth-of-type(1)","eventUrl":"https://www.carepro-hairmedication.com","urlRegex":"^.*https:\\/\\/www\\.carepro-hairmedication\\.com.*$","isOnly":true,"urlRuleType":8,"urlRuleString":"https://www.carepro-hairmedication.com"},{"eventId":1686034156209,"eventName":"%E5%86%99%E7%9C%9F%E3%82%B9%E3%83%A9%E3%82%A4%E3%83%80%E3%83%BC%E3%82%AF%E3%83%AA%E3%83%83%E3%82%AF","source":"insight","selfSelector":"#insta > div:nth-of-type(2) > div:nth-of-type(3) > img:nth-of-type(1)","sameSelector":"%23insta%20%3E%20div%3Anth-of-type(2)%20%3E%20div%3Anth-of-type(3)%20%3E%20img%3Anth-of-type(1)","eventUrl":"https://www.carepro-hairmedication.com","urlRegex":"^.*https:\\/\\/www\\.carepro-hairmedication\\.com.*$","isOnly":true,"urlRuleType":8,"urlRuleString":"https://www.carepro-hairmedication.com"},{"eventId":1686034014969,"eventName":"%E5%86%99%E7%9C%9F%E3%82%B9%E3%83%A9%E3%82%A4%E3%83%80%E3%83%BC%E3%82%AF%E3%83%AA%E3%83%83%E3%82%AF","source":"insight","selfSelector":"#insta > div:nth-of-type(2) > div:nth-of-type(3)","sameSelector":"%23insta%20%3E%20div%3Anth-of-type(2)%20%3E%20div%3Anth-of-type(3)","eventUrl":"https://www.carepro-hairmedication.com","urlRegex":"^.*https:\\/\\/www\\.carepro-hairmedication\\.com.*$","isOnly":true,"urlRuleType":8,"urlRuleString":"https://www.carepro-hairmedication.com"}],"pageConditions":[],"hasRedirect":false,"hasInline":false,"isExcess":false,"crossDomainType":"HASH","optimizely":0,"optimizelyX":0,"experienceList":[]}
,Ue=(function(){var e;return"1"===(null===(e=Fe("setOuterIframeEnabled"))||void 0===e?void 0:e[1])}()||Be.enableOutIframe)&&window.top?window.top.window:window,He=new Date,$e=new H,Ve={domain:"",page:"",initPage:"",multiDomainFlag:!1,silentTime:5,trackEventList:[],visualEventSelectors:[],crossDomainLink:function(){var e,t=null===(e=Fe("setCrossDomainLink"))||void 0===e?void 0:e[1];return"allManual"===t?"allManual":"halfManual"===t&&"halfManual"}(),domainSet:[],vUrl:"",vTitle:"",urlMark:"",camParamAry:[],ignoreCampaign:!1,isNV:!1,ref:"",terminalType:O.PC,rotationFlag:1,mouseCoo:{x:0,y:0},srcElement:null,srcElementAbsLeft:0,srcElementAbsTop:0,yMax:1,yMaxP:0,yMaxM:0,hbCount:0,visitTime:0,clickActionTime:0,multiLinkTag:"",activeFlag:!0,scrolledFlag:!1,optFlag:!1,optType:"OptimizelyX",autoEventList:{}};function We(e,t){Array.isArray(e)?e.forEach((function(e,n){Object.prototype.hasOwnProperty.call(Ve,e)&&(Ve[e]=t[n])})):"string"==typeof e&&Object.prototype.hasOwnProperty.call(Ve,e)&&(Ve[e]=t)}function Ge(e){var t=fe(Ue,e||Ue.document.documentElement);We("rotationFlag",se(Ue)),1===Ve.rotationFlag&&t>Ve.yMaxP?We("yMaxP",t):1!==Ve.rotationFlag&&t>Ve.yMaxM&&We("yMaxM",t)}function qe(e,t,n){var i=0;return 1===e?i=1e3:((i=t-n-Ve.hbCount*l)<0||i>1.5*l)&&(i=l),$(i,1e3)}function ze(){var t=[],n=Be.ptiEventList;return Be.ptxEventList.forEach((function(e){e.events.forEach((function(n){var i=he(x(n.selector)),r=t.find((function(e){return e.selector===i})),o={eventName:x(e.eventName),isOnly:!1,properties:n.properties||{},source:"ptx"};r?r.events.push(o):t.push({selector:i,events:[o]})}))})),n.forEach((function(n){if(n.urlRegex)if(n.urlRuleType===e.REGEX){if(!Ue.location.href.replace(/\/$/,"").match(new RegExp(n.urlRegex.replace(/^\//,"").replace(/[\\]?[\\]?\/[\.]?[\*]?[\$]?$/,""))))return}else if(!Ue.location.href.replace(/https?:\/\/(www.)?/,"").replace(/\/$/,"").match(new RegExp(n.urlRegex.replace(/https?(\?)?\:(\/\/)?(\\\/\\\/)?(www\\.)?/,"").replace(/^\//,"").replace(/[\\]?[\\]?\/[\.]?[\*]?[\$]?$/,""))))return;var i=he(x(n.isOnly?n.selfSelector:n.sameSelector)),r=t.find((function(e){return e.selector===i})),o={isOnly:n.isOnly,eventName:x(n.eventName),source:"pti"};r?r.events.push(o):t.push({selector:i,events:[o]})})),t}function Ye(e){return[g,v,h,m,b,f,d,s,p].some((function(t){return-1!==e.indexOf(t)}))}function Je(){var e,t,n,i=(e=Ue.location.href,t=new RegExp(w),(n=e.match(t))&&(e="&"===(null==n?void 0:n[3])?e.replace(t,"$1"):e.replace(t,"$3")),e);return i=i.replace(/\?_randomTest=\S*/,""),Ve.vUrl&&(i=Ve.vUrl),Ve.urlMark&&(i+="#"+Ve.urlMark),i}function Xe(e){return"string"!=typeof e||["?","^","$","*","+","(",")","|"].map((function(t){var n=new RegExp("(\\"+t+")","g");e=e.replace(n,"\\$1")})),e}function Ke(e){void 0===e&&(e=!1);var t=!1,n=!1,i=!1,r=!1;e?(t=ge("hasInline=1",Ue),n=ge("hasRedirect=1",Ue),i=!ge("hasAntiFlicker",Ue)||ge("hasAntiFlicker=1",Ue),r=!0):(t=Be.hasInline,n=Be.hasRedirect,r=function(e,t){if(!e||!t||!Array.isArray(t)||0===t.length)return!0;for(var n=!1,i=0;i<t.length;i++){var r=t[i];if(!r||!Array.isArray(r))break;if(n||(n=et(e,r)),n)break}return n}(_e(Ue.location.href),Be.pageConditions));var o,a,l=(t||n)&&(e&&i||!e&&r),c={startTime:(new Date).getTime(),endTime:null,timeout:u};return l&&!Be.isExcess&&(o=y,(a=document.createElement("style")).appendChild(document.createTextNode(".".concat(o," { opacity: 0 !important}"))),document.getElementsByTagName("head")[0].appendChild(a),document.documentElement.classList.add(o),setTimeout((function(){Ze()}),u)),c}function Qe(e,t){void 0===t&&(t=!1),(t?ge("hasRedirect=1",Ue):"controlGroup"!==e&&function(e,t){if(!e||!t||!Array.isArray(t)||0===t.length)return!1;for(var n=!1,i=0;i<t.length;i++){var r=t[i];if(!r||!Array.isArray(r))break;if(r.some((function(t){return"REDIRECT_ORIGINAL_PAGE"===t.uuid&&Array.isArray(t.value)&&t.value.indexOf(e)>-1}))&&(n||(n=et(e,r)),n))break}return n}(_e(Ue.location.href),Be.pageConditions))||-1===document.documentElement.className.indexOf(y)||((t?ge("hasInline=1",Ue):Be.hasInline)&&"loading"===window.document.readyState?ce(Ue.document,"DOMContentLoaded",Ze):Ze())}function Ze(){var e,t=(new Date).getTime();document.documentElement.className=document.documentElement.className.replace(RegExp(" ?"+y),""),(null===(e=window[E])||void 0===e?void 0:e.__antiFlicker)&&!window[E].__antiFlicker.endTime&&(window[E].__antiFlicker.endTime=t),ue(Ue.document,"DOMContentLoaded",Ze),ue(Ue.document,"readystatechange",Ze)}function et(e,t,n){var i;void 0===n&&(n=!1);for(var r=[],o=function(o){var a=t[o]||{},l=a||{},c=l.type,u=l.condition,s=a.value;if("ALL"===c.toLocaleUpperCase())r.push(!0);else{var p=n?(null===(i=ye(e))||void 0===i?void 0:i.protocol)+"//"+ye(e).host+ye(e).pathname:Ue.location.protocol+"//"+Ue.location.host+Ue.location.pathname,d="COMBINEDPAGE"===c.toLocaleUpperCase()?p:e,f=Oe(_e(d)),h=[];"string"==typeof s&&(s=[s]),Array.isArray(s)&&(h=s.map((function(e){var t=Oe(_e(e));switch(u){case"==":e=f===t;break;case"[()]":e=-1!==f.indexOf(t);break;case"![()]":e=-1===f.indexOf(t);break;case"[(":e=new RegExp("^"+Xe(t)).test(f);break;case")]":e=new RegExp(Xe(t)+"$").test(f);break;case"Rex":e=new RegExp(e).test(d);break;default:e=!1}return e}))),r.push("![()]"===u?h.every((function(e){return e})):h.some((function(e){return e})))}},a=0;a<t.length;a++)o(a);return r.every((function(e){return e}))}function tt(e){return Ue.navigator.cookieEnabled?decodeURIComponent(Ue.document.cookie.replace(new RegExp("(?:(?:^|.*;)\\s*"+encodeURIComponent(e).replace(/[-.+*]/g,"\\$&")+"\\s*\\=\\s*([^;]*).*$)|^.*$"),"$1"))||null:""}function nt(e,t,n,i,r,o){if(!Ue.navigator.cookieEnabled)return!1;if(!e||/^(?:expires|max-age|path|domain|secure)$/i.test(e))return!1;var a=r?"; domain="+r:"",l=i?"; path="+i:"",c=o?"; secure":"",u="";if(n)switch(n.constructor){case Number:if(n===1/0)u="; expires=Fri, 31 Dec 9999 23:59:59 GMT";else{var s=new Date;s.setTime(s.getTime()+24*n*60*60*1e3),u="; expires="+s.toUTCString()}break;case String:u="; expires="+n;break;case Date:u="; expires="+n.toUTCString()}return Ue.document.cookie=encodeURIComponent(e)+"="+encodeURIComponent(t)+u+a+l+c,!0}function it(e,t,n){return!(!Ue.navigator.cookieEnabled||!e||!function(e){return!!Ue.navigator.cookieEnabled&&new RegExp("(?:^|;\\s*)"+encodeURIComponent(e).replace(/[-.+*]/g,"\\$&")+"\\s*\\=").test(Ue.document.cookie)}(e)||(Ue.document.cookie=encodeURIComponent(e)+"=; expires=Thu, 01 Jan 1970 00:00:00 GMT"+(n?"; domain="+n:"")+(t?"; path="+t:""),0))}function rt(){var e="_ptTestCookie";return nt(e,"1",1),tt(e)?(nt(e,"2",1),"2"!==tt(e)?(it(e),0):(it(e),1)):-1}function ot(e,t){if(!Ue.navigator.cookieEnabled)return!1;localStorage.setItem(e,t)}function at(e){return Ue.navigator.cookieEnabled&&localStorage.getItem(e)||""}function lt(e){var t,n=e.method,i=e.data,r=e.url,o=e.callback,a=e.rejectCallback,l=e.contentType,c=e.async,u=e.traceId,s=function(e,t,n){void 0===n&&(n=!1);var i=new window.XMLHttpRequest;return"withCredentials"in i?i.open(e,t,!0):void 0!==window.XDomainRequest?null==(i=new window.XDomainRequest)||i.open(e,t,n):i=null,i}(n||"GET",r,c);s&&(l&&(null===(t=null==s?void 0:s.setRequestHeader)||void 0===t||t.call(s,"Content-Type",l)),s.onreadystatechange=function(){4===s.readyState&&(-1!==[200,201,204].indexOf(null==s?void 0:s.status)?"function"==typeof o&&o(s.responseText):"function"==typeof a&&a(s.status,s.statusText,u))},s.send(i))}function ct(e){navigator.sendBeacon?(navigator.sendBeacon(e.url,e.data),"function"==typeof e.callback&&e.callback("")):lt(e)}function ut(){var e,t,n,i,r,o=Ue.navigator.userAgent,a=(new Date).getTime(),l=Math.random(),c=null!==(t=null!==(e=Ue.document.documentElement.clientWidth)&&void 0!==e?e:Ue.document.body.clientWidth)&&void 0!==t?t:0,u=0;try{u=null!==(r=null!==(i=null!==(n=Ue.innerHeight)&&void 0!==n?n:Ue.document.documentElement.clientHeight)&&void 0!==i?i:Ue.document.body.clientHeight)&&void 0!==r?r:0}catch(e){}var s=function(e){void 0===e&&(e=window);var t="",n=e.navigator.plugins;if(0!==n.length){for(var i=[],r=0;r<n.length;r++){i[r]=n[r].name+";"+n[r].description+";"+n[r].filename+";";for(var o=0;o<n[r].length;o++)i[r]+="("+n[r][o].description+";"+n[r][o].type+";"+n[r][o].suffixes+")";i[r]+="."}t=i.sort().join("")}return t}();return Ie("ua=".concat(o,"&ts=").concat(a,"&random=").concat(l,"&bw=").concat(c,"&bh=").concat(u,"&plugins=").concat(s))}function st(e){e.meta={level:"error"},e.userAgent=navigator.userAgent,e.cookieEnable=navigator.cookieEnabled,function(e){var t=[{product:"pt-sdk-v3",sdkVer:S,env:"production",url:Ue.location.href,profileId:bt(),sessionId:Ot(),meta:{level:"info"}}||{},e||{}].reduce((function(e,t){return Object.keys(t).forEach((function(n){e[n]=t[n]})),e}),{});ct({url:"https://exceptcollect.ptengine.com/post",method:"POST",data:JSON.stringify(t)})}(e)}Ue.location.protocol;var pt=Ue.navigator.cookieEnabled&&1===rt(),dt=!1,ft={packageId:"",profileId:"",pageId:"",pageViewId:"",deviceId:"",sessionId:"",sessionIdLastSendTime:0,accountId:"",vn:0,pvn:0,lastActionTime:He.getTime(),lastUpdateTime:He.getTime(),nid:0,toFlag:0,pageList:"",visitRef:"",preSessionId:"",preSessionLastSendTime:0};function ht(){return ft.deviceId=xt("deviceId"),ft.sessionId=xt("sessionId"),ft.accountId=xt("accountId"),ft.visitRef=xt("visitRef"),ft.vn=Et(),ft.pvn=St(),ft.lastActionTime=It(),ft.nid=gt(),ft.toFlag=yt(),ft}function vt(e,t){ht(),Array.isArray(e)&&Array.isArray(t)&&e.forEach((function(e,n){Object.prototype.hasOwnProperty.call(ft,e)&&(ft[e]=t[n])})),"string"==typeof e&&Object.prototype.hasOwnProperty.call(ft,e)&&(ft[e]=t),Dt()}function bt(){return ft.profileId}function mt(){return ft.lastUpdateTime}function gt(){var e=Number(xt("nid","number"));return ft.nid=$(e,0),ft.nid}function yt(){var e=Number(xt("toFlag","number"));return ft.toFlag=$(e,0),ft.toFlag}function wt(){return ft.pageList=xt("pageList"),ft.pageList}function _t(e){return void 0===e&&(e=!1),!e&&ft.pageViewId||(dt?vt("pageViewId",Ce()):ft.pageViewId=Ce()),ft.pageViewId}function Ot(e){return void 0===e&&(e=!1),e||(ft.sessionId=xt("sessionId")),!e&&ft.sessionId||(ft.sessionId&&(ft.preSessionId=ft.sessionId,ft.preSessionLastSendTime=ft.sessionIdLastSendTime),dt?vt("sessionId",Ce()):ft.sessionId=Ce()),ft.sessionId}function Tt(){return ft.accountId=xt("accountId"),ft.accountId}function Pt(){var e;return ft.deviceId=xt("deviceId"),ft.deviceId||(dt?vt("deviceId",Ce()):ft.deviceId=Ce()),(null===(e=null==ft?void 0:ft.deviceId)||void 0===e?void 0:e.toString().length)<10&&st({module:"api",message:"deviceId length exceptions: "+ft.deviceId}),ft.deviceId}function Et(){var e=$(Number(xt("vn","number")),0);return ft.vn=13===e.toString().length?0:e,13===e.toString().length&&st({module:"api",message:"vn length exceptions: "+e}),ft.vn}function St(){var e=Number(xt("pvn","number"));return ft.pvn=$(e,0),ft.pvn}function It(){var e=Number(xt("lastActionTime","number"));return ft.lastActionTime=$(e,He.getTime()),ft.lastActionTime}function Ct(e){return void 0===e&&(e=""),e?dt?vt("pageId",Se(e)):ft.pageId=Se(e):ft.pageId=Se(Ve.page),ft.pageId}function jt(){return xt("visitRef")}function kt(){return Ct()+"*pt*"+mt()}function xt(e,t){var n;if(void 0===t&&(t="string"),pt){var i=At();return"string"===t?i[e]||ft[e]:null!==(n=i[e])&&void 0!==n?n:ft[e]}return ft[e]}function At(e){var t=at("".concat(i).concat(e||ft.profileId))||"",n=(tt("".concat(i).concat(e||ft.profileId))||"")+t,r=tt("ptx_".concat(ft.profileId));r&&(it("ptx_".concat(ft.profileId),"/",Ve.domain),n||(n=r));var o=n.split("&").reduce((function(e,t){var n=t.split("="),i=n[0],r=n[1];if(i)switch(i){case"uid":e.deviceId=r;break;case"pl":e.pageList=r;break;case"vid":e.sessionId=r;break;case"to_flag":e.toFlag=r;break;case"sact":e.lastActionTime=r;break;case"pageviewId":e.pageViewId=r;break;default:e[i]=r}return e}),{});return o}function Dt(){var e=["deviceId","sessionId","accountId","vn","pvn","lastActionTime"],t=ft.profileId,n=ft.lastActionTime,i=ft.lastUpdateTime;if(t){var r=e.map((function(e){var t=ft[e];return void 0===t?"":"".concat(e,"=").concat(t,"&")}));!n&&r.push("lastActionTime=".concat(i)),nt("pt_".concat(t),r.join(""),a,"/",Ve.domain);var o=Object.keys(ft).filter((function(t){return-1===e.indexOf(t)})).map((function(e){var t=ft[e];return"".concat(e,"=").concat(t,"&")}));ot("pt_".concat(t),o.join(""))}}function Lt(){var e=Ve.multiLinkTag.split("_s_"),t=e[1]&&e[1].split("."),n=t[1],i=t[2],r=t[3],o=t[4],a=t[5],l=t[6];vt(["deviceId","sessionId","vn","pvn","lastActionTime","nid","accountId","visitRef"],[n,i,r,o,t[7],a,l,k(e[0]?e[0].replace(/\*_\*/g,".").replace(/\*_wh_\*/g,"?"):"",!1)]),We("isNV",!1)}function Nt(){var e,t,n=document.body&&document.body.innerHTML;(Be.crossDomainEnabled||Ve.crossDomainLink||!n||-1!==n.indexOf("data-pt-crossDomain")||-1!==n.indexOf("pt_domain"))&&(e="halfManual"===Ve.crossDomainLink||Be.crossDomainEnabled,(t=document.getElementsByTagName("a")).length>0&&[].map.call(t,(function(t){var n=t.getAttribute("href")||"",i=t.getAttribute("onclick"),r=t.getAttribute("data-pt-crossDomain"),o=Rt(n);(o&&e||o&&(i&&-1!==i.indexOf("pt_domain")||null!==r))&&t.setAttribute("href",Mt(n))})))}function Rt(e){var t;if(!e)return!1;var n=e&&function(e){var t=document.createElement("a");t.href=e||"";var n={source:e,protocol:t.protocol.replace(":",""),host:t.hostname,port:t.port,path:x(t.pathname,!1).replace(/^([^/])/,"/$1")},i=n.protocol+"://"+n.host+(n.port?":"+n.port:"")+n.path;return x(e,!1).indexOf(i)<0&&(n.path=n.path.replace(/^\//,"")),n}(e);return e&&e.match(/^https?:\/\//)&&e.length<900&&n&&!Pe(n.host,location.hostname)&&!Ee(n.host,Ve.domain)&&(null===(t=Be.domain)||void 0===t?void 0:t.some((function(e){return!!Pe(t=e,i=n.host)||!!Ee(t,i)||!!Ee(i,t);var t,i})))}function Mt(e){return function(e,t,n){if(void 0===n&&(n="HASH"),!e)return"";var i=e.split("#");if(1===i.length&&"HASH"===(n+"").toLocaleUpperCase())e+="#".concat(r,"=").concat(t);else{var o=i[1]?"#".concat(i[1]):"";e="".concat(i[0]).concat(-1===i[0].indexOf("?")?"?":"&").concat(r,"=").concat(t).concat(o)}return e}(Te(e),function(){var e=jt(),t=bt()+"."+Pt()+"."+Ot()+"."+Et()+"."+St()+"."+gt()+"."+Tt()+"."+It();return"".concat(Ye(e)?"":e).concat(o).concat(t)}(),Be.crossDomainType)}var Ft,Bt,Ut,Ht,$t,Vt,Wt,Gt,qt,zt,Yt,Jt=new(function(){function e(){Object.defineProperty(this,"cache",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.cache={}}return Object.defineProperty(e.prototype,"get",{enumerable:!1,configurable:!0,writable:!0,value:function(e){return this.cache[e]}}),Object.defineProperty(e.prototype,"set",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t){this.cache[e]=t}}),Object.defineProperty(e.prototype,"clear",{enumerable:!1,configurable:!0,writable:!0,value:function(){this.cache={}}}),e}()),Xt="CONTROL_GROUP_ID",Kt="ptxEngage",Qt="position",Zt="experienceRenderedVersion",en="experienceRenderedPopup",tn="pt-inline-action",nn="pt-insert-element",rn="PTX_SID",on={DATA_BLOCK:"data-engage-block",DATA_WIDGET_ID:"data-engage-widget-id",DATA_SHOW_ENGAGE:"data-show-engage",DATA_GOTO_WIDGET:"data-goto-widget",DATA_BUTTON_TYPE:"data-button-type",BUTTON_FORM_SUBMIT:"button-submit-success",DATA_ACTION_CLICK:"data-engage-action-click",DATA_ACTION_CLOSE:"data-engage-action-close",DATA_ACTION_CONFIG:"data-engage-action",DATA_NO_PACKAGE:"data-engage-no-package",DATA_URL_CLOSE_POPUP:"data-engage-url-close-popup",DATA_COUNTDOWN:"insert.count_down",BUTTON_URL:"button-url",BUTTON_TEL:"button-tel",BUTTON_CLOSE:"button-close",BUTTON_GOTO_WIDGET:"button-goto-widget",ICON_CLOSE:"icon-close",POSITION:"position",CENTER_POSITION:"pos-center",LAYOUT_MODE:"layoutMode",DATA_TRACK_EVENTS:"data-track-events",DATA_MENU_ACTION:"data-menu-action",POPUP:"insert.popup",CLOSE_BUTTON:"insert.close",FORM:"form-element",DOM_TYPE:"data-silex-type",TEMP_A:"pt-temp-a"},an={SELECT:[1,'<select multiple="multiple">',"</select>"],FIELDSET:[1,"<fieldset>","</fieldset>"],MAP:[1,"<map>","</map>"],OBJECT:[1,"<object>","</object>"],TABLE:[1,"<table>","</table>"],TBODY:[2,"<table><tbody>","</tbody></table>"],COLGROUP:[2,"<table><colgroup>","</colgroup></table>"],TR:[3,"<table><tbody><tr>","</tr></tbody></table>"]};function ln(e,t){var n=Jt.get(Qt)||[],i=n.indexOf(t);"add"===e&&-1===i&&n.push(t),"delete"===e&&-1!==i&&n.splice(i,1),Jt.set(Qt,n)}function cn(e){var t=e&&Jt.get(Zt)||[];e&&t.push(e),Jt.set(Zt,t)}function un(e){var t=J(".engage-layer",Ue);if(t){var n="".concat("pt_mask_").concat(e),i=["engage-layer-open",n],r=Ue.document.getElementsByTagName("html")[0],o=Ue.document.body;Array.prototype.slice.call(Ue.document.body.classList).filter((function(e){return"engage-layer-open"===e||/^pt_mask_/.test(e)})).reverse().join("")===i.reverse().join("")?(o.removeChild(t),i.forEach((function(e){r.classList.remove(e),o.classList.remove(e)}))):(r.classList.remove(n),o.classList.remove(n))}}function sn(e,t){var n=Jt.get(en)||[],i=n.indexOf(t);"add"===e&&-1===i&&n.push(t),"delete"===e&&-1!==i&&n.splice(i,1),Jt.set(en,n)}function pn(e,t,n){var i,r;void 0===t&&(t="seenTimes");var o=ht(),a=gn(e),l=n?gn(n):"";if(a||l)try{var c=JSON.parse(a||l);c[t]=Number(c[t]||0)+1,"seenTimes"===t&&(c.session&&c.session[o.sessionId]||(c.session=((i={})[o.sessionId]={frequencySessionTimes:0},i)),c.session[o.sessionId].frequencySessionTimes=Number(c.session[o.sessionId].frequencySessionTimes||0)+1),!a&&l&&n&&function(e){if(e){var t=bn();delete t[e],ot(vn(),JSON.stringify(t))}}(n),mn(e,JSON.stringify(c))}catch(e){}else{var u={seenTimes:1,hasClosed:0,hasClicked:0,formSubmitted:0,previewFormContent:null,session:(r={},r[o.sessionId]={frequencySessionTimes:1},r)};mn(e,JSON.stringify(u))}}function dn(e){var t=function(){var e,t,n,i=Ue.document.getElementsByTagName("head")[0];return i||(i=Ue.document.createElement("head"),null===(n=null===(t=null===(e=Ue.document)||void 0===e?void 0:e.body)||void 0===t?void 0:t.parentNode)||void 0===n||n.insertBefore(i,Ue.document.body)),i}(),n=document.createElement("script"),i="\n        try {\n            (function(){".concat(e,"})();\n        } catch (error) {\n            console.warn(error);\n        }");n.innerHTML=i,t.appendChild(n),t.removeChild(n)}function fn(e,t){var n=t.position,i=t.toEnter,r=t.toLeave,o=t.enterDuration,a=void 0===o?"300ms":o,l=t.leaveDuration,c=void 0===l?"300ms":l,u=t.timeFunction,s=void 0===u?"ease":u;return"@keyframes animate-".concat(n,"-enter {").concat(i,"} \n\n            @keyframes animate-").concat(n,"-leave {").concat(r,"}\n            .animate-enter { animation: animate-").concat(n,"-enter ").concat(a," ").concat(s," }\n            .animate-leave { animation: animate-").concat(n,"-leave ").concat(c," ").concat(s," }")}function hn(e,t){var n=new RegExp("([^\r\n,{}]+)(,(?=[^}]*{)|s*{)","g");return e.replace(n,(function(e,n,i){return n.match(/^\s*(@media|@.*keyframes|to|from|@font-face|1?[0-9]?[0-9])/)?n+i:(n.match(/:scope/)&&(n=n.replace(/([^\s]*):scope/,(function(e,t){return""===t?"> *":"> "+t}))),(n=n.replace(/^(\s*)/,"$1"+t+" "))+i)}))}function vn(){return window.PTX_PREVIEW_ID?"ptx_preview_"+window.PTX_PREVIEW_ID:window.PT_ENGAGE_IN_DEBUG?"ptx_engager_debug":"ptx_engager"}function bn(){var e={};try{var t=vn();e=JSON.parse(at(t)||"{}")}catch(e){}return e}function mn(e,t){if(e){var n=bn();n[e]=t,ot(vn(),JSON.stringify(n))}}function gn(e,t){var n;if(e){var i=bn();t&&Object.prototype.hasOwnProperty.call(i,t)?n=i[t]:Object.prototype.hasOwnProperty.call(i,e)&&(n=i[e])}return n}function yn(e){return void 0===e&&(e=window),ne(e)===O.SMARTPHONE?O.SMARTPHONE:O.PC}function wn(e,t,n){var i=-1!==["POPUP","STICKY_BAR"].indexOf(e.engageType)?e.engageId:e.engageId+"--"+(null==t?void 0:t.versionId)+"--"+(null==n?void 0:n.popupId);return e.engageType+"_"+Ie(i)}function _n(e){var t=[];try{var n=at("".concat(rn,"_").concat(e,":exp:versions"));n&&(t=JSON.parse(n))}catch(e){}return Array.isArray(t)?t.map((function(e){return e.id})):[]}function On(e,t){void 0===t&&(t=[]);var n="".concat(rn,"_").concat(e,":exp:versions");try{var i=at(n),r=i?JSON.parse(i):[];t.forEach((function(e){var t=r.filter((function(t){return t.id===e}));t.length>0?t.forEach((function(e){return e.ts=Date.now()})):r.push({id:e,ts:Date.now()})})),r.length>256&&(r=r.sort((function(e,t){return e.ts-t.ts})).slice(r.length-256)),ot(n,JSON.stringify(r))}catch(e){st({module:"popup",message:e.toString()})}}function Tn(e,t,n){var i=t&&J("#link_"+t,Ue);i&&i.remove();var r=Ue.document.createElement("style");r.type="text/css",r.id="link_"+t,r.appendChild(Ue.document.createTextNode(e)),r.appendChild(document.createTextNode(".data-focus:focus { outline: 5px auto -webkit-focus-ring-color !important}")),Y()&&"body"!==n?G(r,Ue):Ue.document.getElementsByTagName("head")[0].appendChild(r)}function Pn(){var e=at("PT_REDIRECT_TARGET_URL");return e&&("PT_REDIRECT_TARGET_URL",Ue.navigator.cookieEnabled&&localStorage.removeItem("PT_REDIRECT_TARGET_URL")),Ue.location.href===e&&Ue.location.href.match(/(utm_campaign|utm_source|utm_medium|utm_term|utm_content)/)}function En(e){Ue.location.href=e}function Sn(e){for(var t=100*Math.random(),n=0,i=0;i<e.length;i++){var r=e[i],o=100*n,a=100*(n+r);if(n+=r,o<=t&&t<a)return i}return 0}function In(){var e=(Be.experienceList||[]).filter((function(e){return"REDIRECT"===e.engageType})).map((function(e){return{experienceId:e.engageId,conditions:e.conditions,versions:e.versions.map((function(e){var t;return{controlGroup:e.controlGroup,rate:e.rate,versionId:e.versionId,redirect:null===(t=e.terminals)||void 0===t?void 0:t[0].redirect}}))}})),t=function(e){for(var t,n,i=_n(Be.sid),r=null,o=0;o<e.length&&!r;o++){var a=e[o],l=a.versions.find((function(e){return i.includes(e.versionId)})),c=l&&0!==l.rate?l:a.versions[Sn(a.versions.map((function(e){return e.rate})))],u=c.redirect;if(u&&et(_e(Ue.location.href),(null===(n=null===(t=a.conditions)||void 0===t?void 0:t[0])||void 0===n?void 0:n.when)||[])){r={experienceId:a.experienceId,versionId:c.versionId,controlGroup:c.controlGroup,redirect:u};break}}return r}(e);if(!t)return!1;var n=t.controlGroup,i=t.experienceId,r=t.versionId,o=t.redirect;if(n)return Bn.addCallbackToWaitList((function(){Bn.engage({engageId:i,engageVersionId:r,engageAction:"view",properties:{creativeId:"",creativeType:"controlGroup"}}),On(Be.sid,[r]),pn(r,"seenTimes")})),!1;if(!o||!o.toValue||"=="!==o.condition)return!1;var a=function(e,t){var n=ye(e),i=ye(t),r=n.search?we(n.search):{},o=i.search?we(i.search):{};for(var a in r)o.hasOwnProperty(a)||(o[a]=r[a]);!i.hash&&n.hash&&(i.hash=n.hash);var l=function(e){var t=[];for(var n in e)e.hasOwnProperty(n)&&t.push(encodeURIComponent(n)+"="+encodeURIComponent(e[n]));return t.join("&")}(o),c=l?"?".concat(l):"";return"".concat(i.protocol,"//").concat(i.host).concat(i.pathname).concat(c).concat(i.hash)}(_e(Ue.location.href),_e(t.redirect.toValue));return!(!a||Ue.location.href===a||(On(Be.sid,[r]),Bn.redirect({engageId:t.experienceId,engageVersionId:t.versionId,toUrl:a},(function(){En(-1===a.indexOf(Ue.location.hostname)?Mt(a):a)})),0))}function Cn(){jn(),kn(),We("hbCount",0)}function jn(){clearInterval(window[I])}function kn(){window[I]=setInterval((function(){Bn.heartBeat()}),l)}function xn(e){return e-It()>Ve.silentTime+ +l}function An(){$e.emit(T.SESSION_TIMEOUT),Ve.multiDomainFlag&&function(){for(var e=document.getElementsByTagName("a"),t=0;t<e.length;t++){var n=e[t].getAttribute("href");if(n){var i=Te(n);i&&e[t].setAttribute("href",i)}}}(),jn(),vt("toFlag",1)}function Dn(e){Bn.page(e),Bn.performance(),Cn(),Ve.multiDomainFlag&&Nt()}function Ln(e){if(1===yt()||wt()!==kt()){var t=function(e,t){var n=Ot()!==e,i=+t>=It();return n&&i}(ft.sessionId,e);if(1===yt())return Dn("pn"),!0;if(t)return Dn("pv"),!0;We("activeFlag",!0)}return!1}function Nn(){var e="";if("object"==typeof window.optimizely&&"function"==typeof window.optimizely.get){var t=window.optimizely.get("state");if(t)for(var n=t.getActiveExperimentIds(),i=0;i<n.length;i++){var r=n[i],o=t.getExperimentStates({isActive:!0})[r].experimentName||"",a=t.getVariationMap()[r],l=a.id,c=a.name||"";e+=0===i?"":"|o|",e+=r+"|p|"+o.substr(0,100)+"|p|"+l+"|p|"+c.substr(0,100),e+="|p|"+Ve.optType}}return e}function Rn(){var e="";if("object"==typeof window.optimizely){var t=window.optimizely.activeExperiments;if(t&&t.length>0)for(var n=0;n<t.length;n++)e+=0===n?"":"|o|",e+=t[n]+"|p|"+window.optimizely.data.experiments[t[n]].name.substr(0,100)+"|p|"+window.optimizely.variationIdsMap[t[n]][0]+"|p|"+window.optimizely.variationNamesMap[t[n]].substr(0,100),e+="|p|"+Ve.optType}return e}function Mn(){var e=Be.optimizely,t=Be.optimizelyX,n="";if(1===e&&(n=Rn()),1===t&&(n=Nn()),Ve.optFlag)switch(Ve.optType){case"GoogleOptimize":n+=function(){var e="";return window.gaData&&window.gaData.expId&&window.gaData.expVar&&(e+=window.gaData.expId+"|p||p|"+window.gaData.expVar+"|p||p|"+Ve.optType),e}();break;case"OptimizelyX":n=Nn();break;case"Optimizely":n=Rn()}return n?k(n,!1):""}var Fn=function(){function e(){var e=this;Object.defineProperty(this,"collectUrl",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"formSubmitUrl",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"experienceInstance",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"sendPageFlag",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"ajaxList",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"callbackList",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"lastTraceId",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.collectUrl="https://stats.ptengine.jp/collect",this.formSubmitUrl="https://xbackend.ptengine.jp/formVerification",this.experienceInstance=null,this.sendPageFlag=!1,this.ajaxList=[],this.callbackList=[],this.lastTraceId="",$e.on(T.ROUTER_CHANGE,(function(){e.ajaxList=[],e.callbackList=[],We("page",Je()),We("initPage",Je()),xn((new Date).getTime())?Dn("pn"):(e.page("vpv"),e.performance(),Ve.multiDomainFlag&&Nt())}))}return Object.defineProperty(e.prototype,"_handlePageSend",{enumerable:!1,configurable:!0,writable:!0,value:function(){this.sendPageFlag=!0;for(var e=this.ajaxList.length-1;e>=0;e--)this._sendPackage(this.ajaxList[e]),this.ajaxList.pop();for(e=this.callbackList.length-1;e>=0;e--)"function"==typeof this.callbackList[e]&&this.callbackList[e](),this.callbackList.pop()}}),Object.defineProperty(e.prototype,"_getBaseData",{enumerable:!1,configurable:!0,writable:!0,value:function(){return{timestamp:(new Date).getTime(),packageId:ut(),profileId:bt(),pageViewId:_t(),deviceId:Pt(),sessionId:Ot(),accountId:Tt()}}}),Object.defineProperty(e.prototype,"_getDefaultData",{enumerable:!1,configurable:!0,writable:!0,value:function(){var e=Ve.page;return{timezone:te(),screen:"".concat(ie(Ue),"*").concat(re(Ue)),referrer:k(Ve.ref.replace(/&/g,"*&*").replace(/\+/g,"*+*"),!1),title:k(Ve.vTitle||le(Ue),!1),url:e||Ve.page}}}),Object.defineProperty(e.prototype,"_getAttentionBaseData",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t){return F({readLineStart:this._getReadlineStart(),readLineEnd:this._getReadlineEnd(),stayTime:e},this._getOSData(t))}}),Object.defineProperty(e.prototype,"_getReadlineStart",{enumerable:!1,configurable:!0,writable:!0,value:function(){return 1===Ve.rotationFlag?de():(de()+1)*Ve.rotationFlag}}),Object.defineProperty(e.prototype,"_getReadlineEnd",{enumerable:!1,configurable:!0,writable:!0,value:function(){return 1===Ve.rotationFlag?Ve.yMaxP:Ve.yMaxM*Ve.rotationFlag}}),Object.defineProperty(e.prototype,"_getRelativePosition",{enumerable:!1,configurable:!0,writable:!0,value:function(e){return e*Ve.rotationFlag}}),Object.defineProperty(e.prototype,"_getDeviceHeight",{enumerable:!1,configurable:!0,writable:!0,value:function(){return Math.min(ae(Ue),1500)}}),Object.defineProperty(e.prototype,"_getOSData",{enumerable:!1,configurable:!0,writable:!0,value:function(e){try{if(!Ve.scrolledFlag)return{};var t=oe(),n=function(e,t,n){var i,r=e.elementFromPoint(t,n);return(null==r?void 0:r.shadowRoot)?null===(i=r.shadowRoot)||void 0===i?void 0:i.elementFromPoint(t,n):r}(Ue.document,t/2,e/2);if(!n||"BODY"===n.nodeName||"HTML"===n.nodeName)return{};var i=Ae(n);if(!i)return{};var r=n.getBoundingClientRect();return{osDomSelector:encodeURIComponent(i),osDomHeight:parseInt(r.height.toString(),10),osDomTop:parseInt(r.top.toString(),10)}}catch(e){return{}}}}),Object.defineProperty(e.prototype,"_getOldSession",{enumerable:!1,configurable:!0,writable:!0,value:function(){return ft.preSessionId&&ft.preSessionId!==Ot()&&0!==ft.preSessionLastSendTime&&Date.now()-ft.preSessionLastSendTime<Ve.silentTime&&Et()>1?{oldSession:{sessionId:ft.preSessionId,timestamp:ft.preSessionLastSendTime}}:{}}}),Object.defineProperty(e.prototype,"_sendPackage",{enumerable:!1,configurable:!0,writable:!0,value:function(e){if(!e.afterThePage||this.sendPageFlag){e.data&&!e.data.sdkVer&&(e.data.sdkVer=S),"566d12f9"===Be.sid&&this.lastTraceId&&(e.data.lastTraceId=this.lastTraceId);var t=ut();this.lastTraceId=t;var n={url:("form"===e.type?this.formSubmitUrl:this.collectUrl)+"?traceId=".concat(t)+"&deviceId=".concat(Pt())+(pt?"":"&cookieEnabled=0"),traceId:t,method:"POST",data:JSON.stringify(e.data),callback:function(t){"function"==typeof e.callback&&e.callback(t)},rejectCallback:function(t,n,i){"function"==typeof e.rejectCallback&&e.rejectCallback(t,n,i)}};"form"===e.type&&(n.contentType="application/json"),"beacon"===e.transport?ct(n):lt(n),"page"===e.type&&this._handlePageSend(),vt("sessionIdLastSendTime",(new Date).getTime())}else this.ajaxList.push(e)}}),Object.defineProperty(e.prototype,"_getExperienceListForResponse",{enumerable:!1,configurable:!0,writable:!0,value:function(e){var t=[];try{var n=JSON.parse(e);"success"===n.status&&Array.isArray(n.content)&&(t=n.content)}catch(e){}return t}}),Object.defineProperty(e.prototype,"_sendHeartbeatPackage",{enumerable:!1,configurable:!0,writable:!0,value:function(e){var t=this._getDeviceHeight(),n=F(F(F({},this._getBaseData()),this._getAttentionBaseData(e,t)),{title:this._getDefaultData().title,type:"heartbeat",viewHeight:t});this._sendPackage({type:"heartbeat",data:n,transport:"beacon",afterThePage:!0})}}),Object.defineProperty(e.prototype,"setExperience",{enumerable:!1,configurable:!0,writable:!0,value:function(e){this.experienceInstance=e}}),Object.defineProperty(e.prototype,"page",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t){var n=this,i=(new Date).getTime();this.sendPageFlag=!1,_t(!0),We("page",Je()),We("initPage",Je()),We("yMax",fe(Ue,Ue.document.documentElement)),"pn"===e?(We("isNV",!Pn()),Ot(!0),vt(["pvn","vn","nid"],[1,+Et()+1,1])):vt("pvn",St()?+St()+1:1),vt(["lastUpdateTime","lastActionTime","toFlag","pageList"],[i,i,0,kt()]);var r=Mn(),o=F(F(F(F({},this._getBaseData()),this._getDefaultData()),this._getOldSession()),{type:"page",vn:Et(),pvn:St(),readLineStart:this._getReadlineStart(),readLineEnd:this._getReadlineEnd(),viewHeight:this._getDeviceHeight(),renderedVersions:_n(Be.sid),visitReferrer:jt(),matchedDomain:Ve.domain});r&&(o.optimize=r);var a=function(e){var i,r=n._getExperienceListForResponse(e);null===(i=n.experienceInstance)||void 0===i||i.render(r),0===r.length?Ze():Qe("pagePackageSended"),t&&"function"==typeof t&&t(e)};this._sendPackage({type:"page",data:o,afterThePage:!1,callback:a,rejectCallback:function(){n._sendPackage({type:"page",data:o,afterThePage:!1,callback:a,rejectCallback:function(e,t,n){Ze(),st({module:"api",message:"Send package failed, type: page, traceId: ".concat(n,", status: ").concat(e,", statusText: ").concat(t,", cookieEnableStatus: ").concat(rt())})}})}})}}),Object.defineProperty(e.prototype,"heartBeat",{enumerable:!1,configurable:!0,writable:!0,value:function(){if(!(xn((new Date).getTime())&&(An(),(Ve.hbCount+5)*+l<Ve.silentTime))){We("hbCount",Ve.hbCount+1),Ge();var e=1===yt()?-1*Ve.silentTime+1:l;this._sendHeartbeatPackage(e)}}}),Object.defineProperty(e.prototype,"track",{enumerable:!1,configurable:!0,writable:!0,value:function(e){var t,n,i,r=this,o=F(F(F(F({type:"track"},this._getBaseData()),this._getDefaultData()),this._getOldSession()),{visitReferrer:jt(),events:null===(t=e.events)||void 0===t?void 0:t.map((function(e){return"string"==typeof e.eventName&&(e.eventName=A(e.eventName).substring(0,512)),e})),renderedVersions:_n(Be.sid)});if(e.cssSelector){var a=e.stayTime,l=this._getDeviceHeight(),c=Ve.mouseCoo,u=Ve.srcElementAbsLeft,s=Ve.srcElementAbsTop,p=e.events?e.events.some((function(e){return 1===e.eventType}))?1:0:1;o.clickDetail=F(F({},this._getAttentionBaseData(a,l)),{relativeX:this._getRelativePosition(c.x),relativeY:this._getRelativePosition(c.y),absoluteX:u,absoluteY:s,viewWidth:oe(Ue),viewHeight:this._getDeviceHeight(),selector:e.cssSelector,interactionType:null!==(n=e.interactionType)&&void 0!==n?n:0,oe:0,isVisualEventElement:p}),e.visualEventElementSelector&&o.clickDetail&&(o.clickDetail.visualEventElementSelector=e.visualEventElementSelector)}this._sendPackage({type:"track",data:o,callback:function(t){var n;null===(n=r.experienceInstance)||void 0===n||n.render(r._getExperienceListForResponse(t)),e.callback&&"function"==typeof e.callback&&e.callback(t)},rejectCallback:function(e,t,n){st({module:"api",message:"Send package failed, traceId: ".concat(n,", type: page, status: ").concat(e,", statusText: ").concat(0===e?"XMLHttpRequest blocked by CORS or other error":t)})},transport:null===(i=e.params)||void 0===i?void 0:i.transport,afterThePage:!1})}}),Object.defineProperty(e.prototype,"click",{enumerable:!1,configurable:!0,writable:!0,value:function(e){var t=e.cssSelector,n=e.stayTime,i=e.visualEventElementSelector,r=e.isVisualEventElement,o=e.interactionType,a=Ve.mouseCoo,l=Ve.srcElementAbsLeft,c=Ve.srcElementAbsTop,u=this._getDeviceHeight(),s=F(F(F({},this._getBaseData()),this._getAttentionBaseData(n,u)),{title:this._getDefaultData().title,type:"click",relativeX:this._getRelativePosition(a.x),relativeY:this._getRelativePosition(a.y),absoluteX:l,absoluteY:c,viewWidth:oe(Ue),viewHeight:this._getDeviceHeight(),selector:t,oe:0,stayTime:n,isVisualEventElement:r?1:0,interactionType:o});i&&(s.visualEventElementSelector=i),this._sendPackage({type:"click",data:s,transport:"beacon",afterThePage:!0})}}),Object.defineProperty(e.prototype,"scroll",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t){void 0===t&&(t=!1);var n=this._getDeviceHeight(),i=F(F(F({},this._getBaseData()),this._getAttentionBaseData(e,n)),{title:this._getDefaultData().title,end:t?1:void 0,type:"scroll",viewHeight:n});this._sendPackage({type:"scroll",data:i,transport:"beacon",afterThePage:!0})}}),Object.defineProperty(e.prototype,"impression",{enumerable:!1,configurable:!0,writable:!0,value:function(e){var t=F(F({},this._getBaseData()),{selectors:e,type:"impression"});this._sendPackage({type:"impression",data:t,transport:"beacon",afterThePage:!1})}}),Object.defineProperty(e.prototype,"engage",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t){var n,i,r,o=this,a="xhr",l=F(F(F({type:"engage"},this._getBaseData()),this._getDefaultData()),e);if((null===(n=e.config)||void 0===n?void 0:n.events)&&(null===(i=e.config)||void 0===i?void 0:i.events.length)>0){var c=F(F(F(F({type:"track"},this._getBaseData()),this._getDefaultData()),this._getOldSession()),{events:e.config.events,visitReferrer:jt(),renderedVersions:_n(Be.sid)});if(e.config.cssSelector){var u=Ve.mouseCoo,s=Ve.srcElementAbsLeft,p=Ve.srcElementAbsTop,d=e.config.events?e.config.events.some((function(e){return 1===e.eventType}))?1:0:1;c.clickDetail={relativeX:this._getRelativePosition(u.x),relativeY:this._getRelativePosition(u.y),absoluteX:s,absoluteY:p,viewWidth:oe(Ue),viewHeight:ae(Ue),selector:e.config.cssSelector,interactionType:null!==(r=e.config.interactionType)&&void 0!==r?r:0,oe:0,readLineStart:this._getReadlineStart(),readLineEnd:this._getReadlineEnd(),stayTime:e.config.stayTime,isVisualEventElement:d},e.config.visualEventElementSelector&&c.clickDetail&&(c.clickDetail.visualEventElementSelector=e.config.visualEventElementSelector)}l.track=c}delete l.config,delete l.transport,e.transport&&(a=e.transport),"view"===e.engageAction&&(a="beacon"),this._sendPackage({type:"engage",data:l,transport:a,callback:function(e){var n;l.track&&(null===(n=o.experienceInstance)||void 0===n||n.render(o._getExperienceListForResponse(e))),t&&"function"==typeof t&&t(e)},afterThePage:!0})}}),Object.defineProperty(e.prototype,"identify",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t,n){var i=this;if(void 0!==e){if("string"!=typeof e&&"number"!=typeof e){try{st({module:"api",message:"Identify params accountId type invalid, accountId: "+e.toString()})}catch(e){}return}if("number"==typeof e&&(e=e.toString()),e.length>512){try{st({module:"api",message:"Identify params accountId over length, accountId:\n                        ".concat(e.slice(0,512),"\n                         ...")})}catch(e){"Ptengine identify parameter length overflow, The maximum length is ".concat(512,".")}return}vt("accountId",e)}var r=F(F(F(F({type:"identify"},this._getBaseData()),this._getDefaultData()),this._getOldSession()),{visitReferrer:jt(),renderedVersions:_n(Be.sid),properties:t});n&&(r.source=n),this._sendPackage({type:"identify",data:r,afterThePage:!0,callback:function(e){var t;e&&(null===(t=i.experienceInstance)||void 0===t||t.render(i._getExperienceListForResponse(e)))},rejectCallback:function(e,t,n){st({module:"api",message:"Send package failed, traceId: ".concat(n,", type: page, status: ").concat(e,", statusText: ").concat(0===e?"XMLHttpRequest blocked by CORS or other error":t)})}})}}),Object.defineProperty(e.prototype,"performance",{enumerable:!1,configurable:!0,writable:!0,value:function(){var e=this;setTimeout((function(){var t=function(e){var t,n={},i=null===(t=e.performance||e.webkitPerformance)||void 0===t?void 0:t.timing;return i?(0===i.navigationStart||(n.loadPageTime=i.domInteractive-i.navigationStart,n.requestTime=i.responseEnd-i.requestStart,n.loadEventTime=i.loadEventEnd-i.loadEventStart,n.redirectTime=i.redirectEnd-i.redirectStart,n.dnsTime=i.domainLookupEnd-i.domainLookupStart,n.ttfbTime=i.responseStart-i.navigationStart,n.appcacheTime=i.domainLookupStart-i.fetchStart,n.unloadTime=i.unloadEventEnd-i.unloadEventStart,n.tcpTime=i.connectEnd-i.connectStart,n.reqTime=i.responseEnd-i.responseStart,n.domComplete=i.domComplete-i.domInteractive,n.blankTime=(i.domInteractive||i.domLoading)-i.fetchStart,n.domContentLoadedEventEnd=i.domContentLoadedEventEnd-i.fetchStart,n.loadEventStart=i.loadEventStart-i.navigationStart,n.firstRequestTime=i.responseStart-i.requestStart,n.fetchStart=i.fetchStart-i.navigationStart,n.domInteractive=i.domInteractive-i.navigationStart,n.domContentLoadedEventStart=i.domContentLoadedEventStart-i.navigationStart),n):n}(Ue),n=t.blankTime,i=t.loadPageTime;if(void 0!==i){var r=F(F({type:"performance"},e._getBaseData()),{loadPageTime:i});n&&(r.blankTime=n),e._sendPackage({type:"performance",data:r,transport:"beacon",afterThePage:!1})}}))}}),Object.defineProperty(e.prototype,"redirect",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t){var n=(new Date).getTime();_t(!0),We("yMax",fe(Ue,Ue.document.documentElement)),Ve.isNV&&(Ot(!0),vt(["pvn","vn","nid"],[1,+Et()+1,1])),vt(["lastUpdateTime","lastActionTime","toFlag","pageList"],[n,n,0,kt()]);var i=Mn(),r=F(F(F(F({},this._getBaseData()),this._getDefaultData()),this._getOldSession()),{type:"redirect",engageId:e.engageId,engageVersionId:e.engageVersionId,pvn:St(),toUrl:e.toUrl,visitReferrer:jt(),vn:Et()});i&&(r.optimize=i),this._sendPackage({type:"redirect",data:r,transport:"beacon",afterThePage:!1,callback:t})}}),Object.defineProperty(e.prototype,"form",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t,n,i,r,o){var a={field:e,sid:bt(),engageID:t,engageVersion:n,configVersion:"3.0",creativeID:i};this._sendPackage({type:"form",data:a,callback:r,rejectCallback:o,afterThePage:!0})}}),Object.defineProperty(e.prototype,"addCallbackToWaitList",{enumerable:!1,configurable:!0,writable:!0,value:function(e){e&&"function"==typeof e&&(this.sendPageFlag?e():this.callbackList.push(e))}}),e}(),Bn=new Fn;function Un(){return ge(v)}function Hn(){return ge("ptengine=")}function $n(){var e=Ue.document.referrer||Ue.name||"";return ge(g)&&/^https?:\/\/(.*\.(ptengine|ptmind).(com|cn|jp)|localhost).*/gim.test(e)}function Vn(e,t){Ue.CustomEvent=Ue.CustomEvent||function(){function e(e,t){t=t||{bubbles:!1,cancelable:!1,detail:void 0};var n=Ue.document.createEvent("CustomEvent");return n.initCustomEvent(e,t.bubbles,t.cancelable,t.detail),n}return e.prototype=Ue.Event.prototype,e}();try{return new Ue.CustomEvent(e,t)}catch(e){return null}}function Wn(e,t){void 0===t&&(t=window),t.dispatchEvent&&"function"==typeof t.dispatchEvent?t.dispatchEvent(e):t.fireEvent&&"function"==typeof t.fireEvent&&t.fireEvent(e)}var Gn=function(){function e(){Object.defineProperty(this,"__sid",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"__ver",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"__start",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"__area",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"__isPreview",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"getIds",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"__antiFlicker",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"__experience",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.__sid=Be.sid,this.__ver=S,this.__isPreview=!1,this.__experience={},this.__start=0,this.__antiFlicker=null,this.__area="jp",this.getIds=ht}return Object.defineProperty(e.prototype,"__addPopupToRenderList",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t,n){this.__experience[e]||(this.__experience[e]={}),this.__experience[e][t]=n,window.ptEngage||(window.ptEngage={}),window.ptEngage[e]=n,window.ptEngage[e].current=n,window.ptEngage[e].context={send:""},window.ptEngage[e]._handleClear=function(){$e.emit("".concat(T.CLEAR_POPUP,".").concat(t))}}}),Object.defineProperty(e.prototype,"__deletePopupFromTheRenderList",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t){var n,i,r,o,a;null===(i=null===(n=this.__experience)||void 0===n?void 0:n[e])||void 0===i||delete i[t],0===Object.keys((null===(r=this.__experience)||void 0===r?void 0:r[e])||{}).length&&(null===(o=this.__experience)||void 0===o||delete o[e],null===(a=window.ptEngage)||void 0===a||delete a[e])}}),Object.defineProperty(e.prototype,"init",{enumerable:!1,configurable:!0,writable:!0,value:function(e){var t;this.__start=He.getTime(),this.__area=ve(e.scriptElement),this.__isPreview=null!==(t=e.isPreview)&&void 0!==t&&t,e.antiFlickerObj&&(this.__antiFlicker=e.antiFlickerObj),window[E]=this;var n=Vn("ptReady"),i=Vn("ptEventReady");n&&Wn(n,Ue.document),i&&Wn(i,Ue.document)}}),Object.defineProperty(e.prototype,"page",{enumerable:!1,configurable:!0,writable:!0,value:function(){this.__isPreview||Bn.page("vpv")}}),Object.defineProperty(e.prototype,"identify",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t){this.__isPreview||Bn.addCallbackToWaitList((function(){Bn.identify(e,t)}))}}),Object.defineProperty(e.prototype,"track",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t,n){this.__isPreview||Bn.track({events:[{eventName:e,eventType:0,properties:t}],params:n})}}),Object.defineProperty(e.prototype,"showEngagement",{enumerable:!1,configurable:!0,writable:!0,value:function(e){$e.emit("".concat(T.SHOW_POPUP,".").concat(e))}}),Object.defineProperty(e.prototype,"clearEngagement",{enumerable:!1,configurable:!0,writable:!0,value:function(e){this.clearExperience(e)}}),Object.defineProperty(e.prototype,"showPopup",{enumerable:!1,configurable:!0,writable:!0,value:function(e){$e.emit("".concat(T.SHOW_POPUP,".").concat(e))}}),Object.defineProperty(e.prototype,"clearPopup",{enumerable:!1,configurable:!0,writable:!0,value:function(e){$e.emit("".concat(T.CLEAR_POPUP,".").concat(e))}}),Object.defineProperty(e.prototype,"clearExperience",{enumerable:!1,configurable:!0,writable:!0,value:function(e){$e.emit("".concat(T.CLEAR_EXPERIENCE,".").concat(e))}}),Object.defineProperty(e.prototype,"createCrossDomainUrl",{enumerable:!1,configurable:!0,writable:!0,value:function(e){return Rt(e)?Mt(e):e}}),Object.defineProperty(e.prototype,"openWidget",{enumerable:!1,configurable:!0,writable:!0,value:function(){Tr.openWidget()}}),Object.defineProperty(e.prototype,"closeWidget",{enumerable:!1,configurable:!0,writable:!0,value:function(e){void 0===e&&(e="local"),Tr.closeWidget(e)}}),e}(),qn=new Gn,zn=function(){function e(){Object.defineProperty(this,"ready",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"interrupted",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"pageSended",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.ready=!1,this.interrupted=!1,this.pageSended=!1}return Object.defineProperty(e.prototype,"_checkUrlAndReferrer",{enumerable:!1,configurable:!0,writable:!0,value:function(){return!!$n()||(-1!==P.indexOf(Be.sid)||!(!Ue.location.href.match(/^https?:\/\/.*/)||/#_pt_capture/.test(Ue.location.href))&&!(!/lp(pager)?(dev|staging)?\.ptengine\.(jp|com)/.test(Ue.location.href)&&/^http[s]?:\/\/((?!datatest|devx|x).)+\.(miapex|ptengine|ptmind)\.(com|jp|cn)/.test(Ue.document.referrer)))}}),Object.defineProperty(e.prototype,"_setInterrupted",{enumerable:!1,configurable:!0,writable:!0,value:function(e){this.interrupted=!0}}),Object.defineProperty(e.prototype,"preInspection",{enumerable:!1,configurable:!0,writable:!0,value:function(){var e,t;if((null===(e=window.ptengine)||void 0===e?void 0:e.__ver)!==S)if("1"!==(null===(t=Ue.navigator)||void 0===t?void 0:t.doNotTrack)){var n=/^(127.0.0.1|192.168|localhost)/.test(location.host);if(Ve.domain||n)if(ge(p,Ue))this._setInterrupted("experience screenshot");else if(function(){var e=be(s,Ue)||me(s,Ue)&&-1===Ue.document.referrer.indexOf("hasRedirect=1");return e&&(window[j]||(window[j]={sid:Be.sid,loaded:!1},Ke(!0),ee(Ue.document,"//js.ptengine.com/preview.js"))),e}())this._setInterrupted("experience preview");else{if(!(Ue.document.referrer.indexOf(s)>-1))return ge(f,Ue)?(window[E]={__sid:Be.sid,__ver:S,__experience:{},page:function(){},identify:function(){},track:function(){},showEngagement:function(){},clearEngagement:function(){},showPopup:function(){},clearPopup:function(){},clearExperience:function(){},createCrossDomainUrl:function(){},openWidget:function(){},closeWidget:function(){}},void this._setInterrupted("experience editor iframe")):void(function(){var e,t=ge(d,Ue);if(!t)try{t="ptengine_campaign_editor"===(window.name||(null===(e=null===window||void 0===window?void 0:window.parent)||void 0===e?void 0:e.name))}catch(e){}return t&&function(){if(!window._ptExperienceEditor){window._ptExperienceEditor={},ot(rn,Be.sid);var e=ge("isdev",Ue)?"localhost:8082":"pteglobalstatic.ptengine.com/ptx-editor";ee(Ue.document,"".concat(location.protocol,"//").concat(e,"/inject.js"))}}(),t}()?this._setInterrupted("experience editor"):function(){var e=ge(h,Ue),t=ge("pt_cert",Ue);return!(!e||t||Un()||(function(){var e;if(!window._ptInsightHeatmap){window._ptInsightHeatmap={};var t=function(e){for(var t,n=/[?&#]([^=#&]+)(?:=([^&#]*))?/g,i={};t=n.exec(e);){var r=decodeURIComponent(t[1].replace(/\+/g," ")),o=t[2]?decodeURIComponent(t[2].replace(/\+/g," ")):"";i[r]=o}return i}(Ue.location.href),n="l"===(null===(e=null==t?void 0:t.ptengine_heatmap_token)||void 0===e?void 0:e.slice(0,1))||"-1"===(null==t?void 0:t.area)?"localhost:8000":"pti.ptengine.com";ee(Ue.document,"".concat(location.protocol,"//").concat(n,"/heatmap/inject.js?sid=").concat(Be.sid))}}(),0))}()?this._setInterrupted("insight heatmap"):this._checkUrlAndReferrer()?function(){var e,t=null===(e=Fe("setSampleRate"))||void 0===e?void 0:e[1];if(t&&/^\d+$/.test(t.toString())){for(var n=Pt(),i=[[1,2],[5,1],[8,1],[10,1],[13,1],[15,1],[19,1]].reduce((function(e,t){return e+n.substring(t[0],t[0]+t[1])}),""),r=0,o=0;r<i.length;){var a=i.charAt(7-r);o+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-/".indexOf(a)*Math.pow(64,r),r++}return o%Number(t)!=0}return!1}()?this._setInterrupted("insight sample"):this.ready=!0:this._setInterrupted("url or referrer"));this._setInterrupted("experience redirect preview")}else this._setInterrupted("domain")}else this._setInterrupted("browser do not track");else this._setInterrupted("repeat")}}),e}(),Yn=new zn,Jn=function(){function e(e,t,n){Object.defineProperty(this,"codeList",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"vivaiProductSocialProof",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"callback",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"hasSendCodeView",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"cssRollBack",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"jsRollBack",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.codeList=e,this.vivaiProductSocialProof=t,this.callback=n,this.cssRollBack=null,this.jsRollBack=null,this.hasSendCodeView=!1,this._init()}return Object.defineProperty(e.prototype,"_init",{enumerable:!1,configurable:!0,writable:!0,value:function(){var e=this;this.codeList.forEach((function(t){var n=t.code,i=t.type;if(n){var r=n;try{"javascript"===i&&e.vivaiProductSocialProof&&(r="var productSocialProof=".concat(JSON.stringify(e.vivaiProductSocialProof),"; ").concat(n))}catch(e){}e._apply(i,r),e.hasSendCodeView||(e.callback(),e.hasSendCodeView=!0)}}))}}),Object.defineProperty(e.prototype,"_getDocHead",{enumerable:!1,configurable:!0,writable:!0,value:function(){var e,t=Ue.document.getElementsByTagName("head")[0];return t||(t=Ue.document.createElement("head"),null===(e=Ue.document.body.parentNode)||void 0===e||e.insertBefore(t,Ue.document.body)),t}}),Object.defineProperty(e.prototype,"_createStyleElement",{enumerable:!1,configurable:!0,writable:!0,value:function(e){var t=Ue.document.createElement("style");return void 0!==(null==t?void 0:t.cssText)?t.cssText=e:t.innerHTML=e,t}}),Object.defineProperty(e.prototype,"_createScriptElement",{enumerable:!1,configurable:!0,writable:!0,value:function(e){var t=null,n=null;try{t=new Function("element",e)}catch(e){n=e}return{jsJd:t,jsError:n}}}),Object.defineProperty(e.prototype,"_attachElementToHead",{enumerable:!1,configurable:!0,writable:!0,value:function(e){var t=this._getDocHead();t.appendChild(e),this.cssRollBack=function(){t.removeChild(e)}}}),Object.defineProperty(e.prototype,"_addStyle",{enumerable:!1,configurable:!0,writable:!0,value:function(e){var t=this._createStyleElement(e);this._attachElementToHead(t)}}),Object.defineProperty(e.prototype,"_runScript",{enumerable:!1,configurable:!0,writable:!0,value:function(e){var t=this._getDocHead(),n=document.createElement("script"),i="\n        try {\n            (function(){".concat(e,"})();\n        } catch (error) {\n            console.warn(error);\n        }");n.innerHTML=i,t.appendChild(n),t.removeChild(n)}}),Object.defineProperty(e.prototype,"_apply",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t){switch(e){case"css":this._addStyle(t);break;case"javascript":dn(t)}}}),Object.defineProperty(e.prototype,"unmounted",{enumerable:!1,configurable:!0,writable:!0,value:function(){var e,t;null===(e=this.cssRollBack)||void 0===e||e.call(this),null===(t=this.jsRollBack)||void 0===t||t.call(this)}}),e}();function Xn(e){var t=[];return e.querySelectorAll("[tabindex]").forEach((function(e){Number(e.getAttribute("tabindex"))>0&&t.push(e)})),t}function Kn(e){var t=[];if("all"!==e&&"normal"!==e||t.push.apply(t,Xn(Ue.document)),"all"===e||"shadow-root"===e){var n=K('[id^="ptxEngage_"]');n.length&&n.forEach((function(e){t.push.apply(t,Xn(e))}))}return t.sort((function(e,t){return Number(e.getAttribute("tabindex"))-Number(t.getAttribute("tabindex"))})),t}function Qn(e,t){var n=Kn("all"),i=Ue.document.querySelector("pt-experience");if(null==i||i.setAttribute("style","position: fixed;z-index:2147483647"),"Escape"===e){if(!n.length)return;for(var r=0;r<n.length;r++)if("insert.popup"===n[r].getAttribute("data-menu-action")){n[r].classList.add("data-focus"),n[r].focus();break}}if("Tab"===e&&"first"===t){if(!n.length)return;var o=i&&n[0].getAttribute("tabindex")===i.getAttribute("tabindex")?n[1]:n[0];o.classList.add("data-focus"),o.focus()}"render"===e&&"shadow-root"===t&&i.focus(),setTimeout((function(){null==i||i.removeAttribute("style")}))}function Zn(){var e,t=[],n=[].slice.call(Ue.document.querySelectorAll('[id^="ptxEngage_')),i=[].slice.call(K('[id^="ptxEngage_'));if(B(B([],n,!0),i,!0).forEach((function(e){if(e.hasChildNodes()){var n=e.getAttribute("id"),i=n?n.includes("stickybar")?"z-index: 2147483637":"z-index: 2147483647":"",r="position: fixed; ".concat(i);e.setAttribute("tabindex","-1"),e.setAttribute("style",r),t.push(e)}})),t.length){for(var r,o=t.length,a=o-1;a>=0;a--)if(-1===(null===(e=t[a].getAttribute("id"))||void 0===e?void 0:e.indexOf("ptxEngage_stickybar_"))){r=t[a];break}(r||t[o-1]).focus(),setTimeout((function(){var e;t.forEach((function(e){e.removeAttribute("style")})),null===(e=Ue.document.querySelector("pt-experience"))||void 0===e||e.removeAttribute("style")}))}}function ei(e){for(var t=0,n=0,i=e;null!==i;)t+=i.offsetLeft,n+=i.offsetTop,i=i.offsetParent;var r=Math.max(Ue.document.body.scrollHeight,Ue.document.documentElement.scrollHeight);return{left:t,top:n,right:Math.max(Ue.document.body.scrollWidth,Ue.document.documentElement.scrollWidth)-t-e.offsetWidth,bottom:r-n-e.offsetHeight}}function ti(e,t){var n=je(t);return"keydown"===e&&("Enter"===t.key||"ArrowDown"===t.key&&"SELECT"===n.tagName)||"keyup"===e&&"Tab"===t.key&&("TEXTAREA"===n.tagName||"INPUT"===n.tagName)}"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self&&self;var ni={exports:{}};ni.exports=function(){var e=6e4,t=36e5,n="millisecond",i="second",r="minute",o="hour",a="day",l="week",c="month",u="quarter",s="year",p="date",d="Invalid Date",f=/^(\d{4})[-/]?(\d{1,2})?[-/]?(\d{0,2})[Tt\s]*(\d{1,2})?:?(\d{1,2})?:?(\d{1,2})?[.:]?(\d+)?$/,h=/\[([^\]]+)]|Y{1,4}|M{1,4}|D{1,2}|d{1,4}|H{1,2}|h{1,2}|a|A|m{1,2}|s{1,2}|Z{1,2}|SSS/g,v={name:"en",weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),ordinal:function(e){var t=["th","st","nd","rd"],n=e%100;return"["+e+(t[(n-20)%10]||t[n]||t[0])+"]"}},b=function(e,t,n){var i=String(e);return!i||i.length>=t?e:""+Array(t+1-i.length).join(n)+e},m={s:b,z:function(e){var t=-e.utcOffset(),n=Math.abs(t),i=Math.floor(n/60),r=n%60;return(t<=0?"+":"-")+b(i,2,"0")+":"+b(r,2,"0")},m:function e(t,n){if(t.date()<n.date())return-e(n,t);var i=12*(n.year()-t.year())+(n.month()-t.month()),r=t.clone().add(i,c),o=n-r<0,a=t.clone().add(i+(o?-1:1),c);return+(-(i+(n-r)/(o?r-a:a-r))||0)},a:function(e){return e<0?Math.ceil(e)||0:Math.floor(e)},p:function(e){return{M:c,y:s,w:l,d:a,D:p,h:o,m:r,s:i,ms:n,Q:u}[e]||String(e||"").toLowerCase().replace(/s$/,"")},u:function(e){return void 0===e}},g="en",y={};y[g]=v;var w=function(e){return e instanceof P},_=function e(t,n,i){var r;if(!t)return g;if("string"==typeof t){var o=t.toLowerCase();y[o]&&(r=o),n&&(y[o]=n,r=o);var a=t.split("-");if(!r&&a.length>1)return e(a[0])}else{var l=t.name;y[l]=t,r=l}return!i&&r&&(g=r),r||!i&&g},O=function(e,t){if(w(e))return e.clone();var n="object"==N(t)?t:{};return n.date=e,n.args=arguments,new P(n)},T=m;T.l=_,T.i=w,T.w=function(e,t){return O(e,{locale:t.$L,utc:t.$u,x:t.$x,$offset:t.$offset})};var P=function(){function v(e){this.$L=_(e.locale,null,!0),this.parse(e)}var b=v.prototype;return b.parse=function(e){this.$d=function(e){var t=e.date,n=e.utc;if(null===t)return new Date(NaN);if(T.u(t))return new Date;if(t instanceof Date)return new Date(t);if("string"==typeof t&&!/Z$/i.test(t)){var i=t.match(f);if(i){var r=i[2]-1||0,o=(i[7]||"0").substring(0,3);return n?new Date(Date.UTC(i[1],r,i[3]||1,i[4]||0,i[5]||0,i[6]||0,o)):new Date(i[1],r,i[3]||1,i[4]||0,i[5]||0,i[6]||0,o)}}return new Date(t)}(e),this.$x=e.x||{},this.init()},b.init=function(){var e=this.$d;this.$y=e.getFullYear(),this.$M=e.getMonth(),this.$D=e.getDate(),this.$W=e.getDay(),this.$H=e.getHours(),this.$m=e.getMinutes(),this.$s=e.getSeconds(),this.$ms=e.getMilliseconds()},b.$utils=function(){return T},b.isValid=function(){return!(this.$d.toString()===d)},b.isSame=function(e,t){var n=O(e);return this.startOf(t)<=n&&n<=this.endOf(t)},b.isAfter=function(e,t){return O(e)<this.startOf(t)},b.isBefore=function(e,t){return this.endOf(t)<O(e)},b.$g=function(e,t,n){return T.u(e)?this[t]:this.set(n,e)},b.unix=function(){return Math.floor(this.valueOf()/1e3)},b.valueOf=function(){return this.$d.getTime()},b.startOf=function(e,t){var n=this,u=!!T.u(t)||t,d=T.p(e),f=function(e,t){var i=T.w(n.$u?Date.UTC(n.$y,t,e):new Date(n.$y,t,e),n);return u?i:i.endOf(a)},h=function(e,t){return T.w(n.toDate()[e].apply(n.toDate("s"),(u?[0,0,0,0]:[23,59,59,999]).slice(t)),n)},v=this.$W,b=this.$M,m=this.$D,g="set"+(this.$u?"UTC":"");switch(d){case s:return u?f(1,0):f(31,11);case c:return u?f(1,b):f(0,b+1);case l:var y=this.$locale().weekStart||0,w=(v<y?v+7:v)-y;return f(u?m-w:m+(6-w),b);case a:case p:return h(g+"Hours",0);case o:return h(g+"Minutes",1);case r:return h(g+"Seconds",2);case i:return h(g+"Milliseconds",3);default:return this.clone()}},b.endOf=function(e){return this.startOf(e,!1)},b.$set=function(e,t){var l,u=T.p(e),d="set"+(this.$u?"UTC":""),f=(l={},l[a]=d+"Date",l[p]=d+"Date",l[c]=d+"Month",l[s]=d+"FullYear",l[o]=d+"Hours",l[r]=d+"Minutes",l[i]=d+"Seconds",l[n]=d+"Milliseconds",l)[u],h=u===a?this.$D+(t-this.$W):t;if(u===c||u===s){var v=this.clone().set(p,1);v.$d[f](h),v.init(),this.$d=v.set(p,Math.min(this.$D,v.daysInMonth())).$d}else f&&this.$d[f](h);return this.init(),this},b.set=function(e,t){return this.clone().$set(e,t)},b.get=function(e){return this[T.p(e)]()},b.add=function(n,u){var p,d=this;n=Number(n);var f=T.p(u),h=function(e){var t=O(d);return T.w(t.date(t.date()+Math.round(e*n)),d)};if(f===c)return this.set(c,this.$M+n);if(f===s)return this.set(s,this.$y+n);if(f===a)return h(1);if(f===l)return h(7);var v=(p={},p[r]=e,p[o]=t,p[i]=1e3,p)[f]||1,b=this.$d.getTime()+n*v;return T.w(b,this)},b.subtract=function(e,t){return this.add(-1*e,t)},b.format=function(e){var t=this,n=this.$locale();if(!this.isValid())return n.invalidDate||d;var i=e||"YYYY-MM-DDTHH:mm:ssZ",r=T.z(this),o=this.$H,a=this.$m,l=this.$M,c=n.weekdays,u=n.months,s=function(e,n,r,o){return e&&(e[n]||e(t,i))||r[n].slice(0,o)},p=function(e){return T.s(o%12||12,e,"0")},f=n.meridiem||function(e,t,n){var i=e<12?"AM":"PM";return n?i.toLowerCase():i},v={YY:String(this.$y).slice(-2),YYYY:this.$y,M:l+1,MM:T.s(l+1,2,"0"),MMM:s(n.monthsShort,l,u,3),MMMM:s(u,l),D:this.$D,DD:T.s(this.$D,2,"0"),d:String(this.$W),dd:s(n.weekdaysMin,this.$W,c,2),ddd:s(n.weekdaysShort,this.$W,c,3),dddd:c[this.$W],H:String(o),HH:T.s(o,2,"0"),h:p(1),hh:p(2),a:f(o,a,!0),A:f(o,a,!1),m:String(a),mm:T.s(a,2,"0"),s:String(this.$s),ss:T.s(this.$s,2,"0"),SSS:T.s(this.$ms,3,"0"),Z:r};return i.replace(h,(function(e,t){return t||v[e]||r.replace(":","")}))},b.utcOffset=function(){return 15*-Math.round(this.$d.getTimezoneOffset()/15)},b.diff=function(n,p,d){var f,h=T.p(p),v=O(n),b=(v.utcOffset()-this.utcOffset())*e,m=this-v,g=T.m(this,v);return g=(f={},f[s]=g/12,f[c]=g,f[u]=g/3,f[l]=(m-b)/6048e5,f[a]=(m-b)/864e5,f[o]=m/t,f[r]=m/e,f[i]=m/1e3,f)[h]||m,d?g:T.a(g)},b.daysInMonth=function(){return this.endOf(c).$D},b.$locale=function(){return y[this.$L]},b.locale=function(e,t){if(!e)return this.$L;var n=this.clone(),i=_(e,t,!0);return i&&(n.$L=i),n},b.clone=function(){return T.w(this.$d,this)},b.toDate=function(){return new Date(this.valueOf())},b.toJSON=function(){return this.isValid()?this.toISOString():null},b.toISOString=function(){return this.$d.toISOString()},b.toString=function(){return this.$d.toUTCString()},v}(),E=P.prototype;return O.prototype=E,[["$ms",n],["$s",i],["$m",r],["$H",o],["$W",a],["$M",c],["$y",s],["$D",p]].forEach((function(e){E[e[1]]=function(t){return this.$g(t,e[0],e[1])}})),O.extend=function(e,t){return e.$i||(e(t,P,O),e.$i=!0),O},O.locale=_,O.isDayjs=w,O.unix=function(e){return O(1e3*e)},O.en=y[g],O.Ls=y,O.p={},O}();var ii=ni.exports,ri={exports:{}};!function(e,t){var n,i,r,o,a,l,c,u,s,p,d,f,h,v,b,m,g;e.exports=(a=/\[([^\]]+)]|Y{1,4}|M{1,4}|D{1,2}|d{1,4}|H{1,2}|h{1,2}|a|A|m{1,2}|s{1,2}|Z{1,2}|SSS/g,u=/^(-|\+)?P(?:([-+]?[0-9,.]*)Y)?(?:([-+]?[0-9,.]*)M)?(?:([-+]?[0-9,.]*)W)?(?:([-+]?[0-9,.]*)D)?(?:T(?:([-+]?[0-9,.]*)H)?(?:([-+]?[0-9,.]*)M)?(?:([-+]?[0-9,.]*)S)?)?$/,s={years:l=31536e6,months:c=2592e6,days:o=864e5,hours:r=36e5,minutes:6e4,seconds:1e3,milliseconds:1,weeks:6048e5},p=function(e){return e instanceof g},d=function(e,t,n){return new g(e,n,t.$l)},f=function(e){return i.p(e)+"s"},h=function(e){return e<0},v=function(e){return h(e)?Math.ceil(e):Math.floor(e)},b=function(e){return Math.abs(e)},m=function(e,t){return e?h(e)?{negative:!0,format:""+b(e)+t}:{negative:!1,format:""+e+t}:{negative:!1,format:""}},g=function(){function e(e,t,n){var i=this;if(this.$d={},this.$l=n,void 0===e&&(this.$ms=0,this.parseFromMilliseconds()),t)return d(e*s[f(t)],this);if("number"==typeof e)return this.$ms=e,this.parseFromMilliseconds(),this;if("object"==N(e))return Object.keys(e).forEach((function(t){i.$d[f(t)]=e[t]})),this.calMilliseconds(),this;if("string"==typeof e){var r=e.match(u);if(r){var o=r.slice(2).map((function(e){return null!=e?Number(e):0}));return this.$d.years=o[0],this.$d.months=o[1],this.$d.weeks=o[2],this.$d.days=o[3],this.$d.hours=o[4],this.$d.minutes=o[5],this.$d.seconds=o[6],this.calMilliseconds(),this}}return this}var t=e.prototype;return t.calMilliseconds=function(){var e=this;this.$ms=Object.keys(this.$d).reduce((function(t,n){return t+(e.$d[n]||0)*s[n]}),0)},t.parseFromMilliseconds=function(){var e=this.$ms;this.$d.years=v(e/l),e%=l,this.$d.months=v(e/c),e%=c,this.$d.days=v(e/o),e%=o,this.$d.hours=v(e/r),e%=r,this.$d.minutes=v(e/6e4),e%=6e4,this.$d.seconds=v(e/1e3),e%=1e3,this.$d.milliseconds=e},t.toISOString=function(){var e=m(this.$d.years,"Y"),t=m(this.$d.months,"M"),n=+this.$d.days||0;this.$d.weeks&&(n+=7*this.$d.weeks);var i=m(n,"D"),r=m(this.$d.hours,"H"),o=m(this.$d.minutes,"M"),a=this.$d.seconds||0;this.$d.milliseconds&&(a+=this.$d.milliseconds/1e3);var l=m(a,"S"),c=e.negative||t.negative||i.negative||r.negative||o.negative||l.negative,u=r.format||o.format||l.format?"T":"",s=(c?"-":"")+"P"+e.format+t.format+i.format+u+r.format+o.format+l.format;return"P"===s||"-P"===s?"P0D":s},t.toJSON=function(){return this.toISOString()},t.format=function(e){var t=e||"YYYY-MM-DDTHH:mm:ss",n={Y:this.$d.years,YY:i.s(this.$d.years,2,"0"),YYYY:i.s(this.$d.years,4,"0"),M:this.$d.months,MM:i.s(this.$d.months,2,"0"),D:this.$d.days,DD:i.s(this.$d.days,2,"0"),H:this.$d.hours,HH:i.s(this.$d.hours,2,"0"),m:this.$d.minutes,mm:i.s(this.$d.minutes,2,"0"),s:this.$d.seconds,ss:i.s(this.$d.seconds,2,"0"),SSS:i.s(this.$d.milliseconds,3,"0")};return t.replace(a,(function(e,t){return t||String(n[e])}))},t.as=function(e){return this.$ms/s[f(e)]},t.get=function(e){var t=this.$ms,n=f(e);return"milliseconds"===n?t%=1e3:t="weeks"===n?v(t/s[n]):this.$d[n],0===t?0:t},t.add=function(e,t,n){var i;return i=t?e*s[f(t)]:p(e)?e.$ms:d(e,this).$ms,d(this.$ms+i*(n?-1:1),this)},t.subtract=function(e,t){return this.add(e,t,!0)},t.locale=function(e){var t=this.clone();return t.$l=e,t},t.clone=function(){return d(this.$ms,this)},t.humanize=function(e){return n().add(this.$ms,"ms").locale(this.$l).fromNow(!e)},t.milliseconds=function(){return this.get("milliseconds")},t.asMilliseconds=function(){return this.as("milliseconds")},t.seconds=function(){return this.get("seconds")},t.asSeconds=function(){return this.as("seconds")},t.minutes=function(){return this.get("minutes")},t.asMinutes=function(){return this.as("minutes")},t.hours=function(){return this.get("hours")},t.asHours=function(){return this.as("hours")},t.days=function(){return this.get("days")},t.asDays=function(){return this.as("days")},t.weeks=function(){return this.get("weeks")},t.asWeeks=function(){return this.as("weeks")},t.months=function(){return this.get("months")},t.asMonths=function(){return this.as("months")},t.years=function(){return this.get("years")},t.asYears=function(){return this.as("years")},e}(),function(e,t,r){n=r,i=r().$utils(),r.duration=function(e,t){var n=r.locale();return d(e,{$l:n},t)},r.isDuration=p;var o=t.prototype.add,a=t.prototype.subtract;t.prototype.add=function(e,t){return p(e)&&(e=e.asMilliseconds()),o.bind(this)(e,t)},t.prototype.subtract=function(e,t){return p(e)&&(e=e.asMilliseconds()),a.bind(this)(e,t)}})}(ri);var oi=ri.exports;ii.extend(oi);var ai=["days","hours","minutes","seconds","milliseconds"];function li(e){if(e){var t,n,i=function(e){return{mode:e.dataset.CountDownMode||"CountDown",showUnit:e.dataset.CountDownShowUnit?L(ai.map((function(t){var n,i;return[t,-1!==(null===(i=null===(n=null==e?void 0:e.dataset)||void 0===n?void 0:n.CountDownShowUnit)||void 0===i?void 0:i.split("-").indexOf(t))]}))):{days:!1,hours:!0,minutes:!0,seconds:!0,milliseconds:!1},isShowLabel:"false"!==e.dataset.CountDownIsShowLabel,showLabel:e.dataset.CountDownShowLabel?L(e.dataset.CountDownShowLabel.split("-").map((function(e){return e.split(":")}))):L(ai.map((function(e){return[e,e.charAt(0).toUpperCase()+e.slice(1)]}))),behaviorAfter:e.dataset.CountDownBehaviorAfter||"keep",endDate:e.dataset.CountDownEndDate||ii(ii().format("YYYY-MM-DD")).add(1,"day").add(12,"hour").toString(),timeZone:"Project timezone",countDown:e.dataset.CountDownTime?Number(e.dataset.CountDownTime):0,countDownUnit:e.dataset.CountDownUnit?e.dataset.CountDownUnit:"minutes"}}(e);t="CountDown"===i.mode?e.dataset.CountDownStartTime?ii.duration(ii(e.dataset.CountDownStartTime).add(Number(i.countDown),i.countDownUnit).diff(ii())):ii.duration(Number(i.countDown),i.countDownUnit):ii.duration(ii(i.endDate).diff(ii())),n="CountDown"===i.mode?e.dataset.CountDownStartTime?ii.duration(Number(i.countDown),i.countDownUnit):t:e.dataset.CountDownStartTime?ii.duration(ii(i.endDate).diff(ii(e.dataset.CountDownStartTime))):t;var r=2,o=L(ai.filter((function(e){return i.showUnit[e]})).map((function(e,i){var o=t.as(e);if(t=t.subtract(0|o,e),"milliseconds"===e&&(o=o/10|0),0===i){r=String(0|n.as(e)).length;var a=n.as(e);a%1==0&&a===Math.pow(10,r-1)&&(r-=1),r<2&&(r=2)}return[e,0|o]}))),a=Object.values(o).every((function(e){return 0===e}))||Object.values(o).some((function(e){return e<0}));if(Object.values(o).some((function(e){return e<0})))for(var l in o)o[l]&&(o[l]=0);a&&(e.dataset.CountDownEnd=a?"CountDown"===i.mode&&0===i.countDown?"false":"true":"false");var c=e.querySelector(".pt-count-down-wrapper");c&&(e.dataset.CountDownFontSize&&""!==e.dataset.CountDownFontSize&&(e.style.fontSize=e.dataset.CountDownFontSize),e.dataset.CountDownFontFamily&&""!==e.dataset.CountDownFontFamily&&(e.style.fontFamily=e.dataset.CountDownFontFamily),e.dataset.CountDownFontWeight&&""!==e.dataset.CountDownFontWeight&&(e.style.fontWeight=e.dataset.CountDownFontWeight),c.style.cssText="\n        box-sizing: border-box;\n        display: flex;\n        justify-content: space-between;\n        width: 100%;\n        height:".concat("true"===e.dataset.CountDownIsShowLabel?"100%":"fit-content",";\n        user-select: none;\n    "),c.innerHTML=Object.entries(o).map((function(t,n){var o=t[0],a=t[1];return'\n            <div contenteditable="false" class="pt-count-down-time" style="box-sizing: border-box;display: flex;flex-direction: column;align-items: center;min-width: fit-content;height: 100%;flex: '.concat(0!==n?1:r-1," 1 ").concat(0!==n?3.11:3.11+1.68*(r-2),'em;;">\n                <div contenteditable="false" class="pt-count-down-number-wrapper" style="box-sizing: border-box;display: flex;width: 100%;flex: 1 1;">\n                    ').concat(Array.from(Array.from({length:(0===n?r:2)-String(a).length},(function(){return"0"})).join("")+a).map((function(t){return'\n                            <div contenteditable="false" style="height: 1.43em;flex:0 1 4px;display:inline-block;"></div>\n                            <div\n                                contenteditable="false"\n                                class="pt-count-down-number"\n                                style="\n                                    display:inline-block;position: relative;box-sizing: border-box;display: flex;justify-content: center;align-items: center;max-width: calc(1.43em - 8px);height: 1.43em;font-size: 1em;flex: 1 1000 calc(1.43em - 8px);\n                                    color:'.concat(e.dataset.CountDownNumColor||"#fff",';\n                                "\n                            >\n                                <div style="display:inline-block;position: absolute;width: calc(100% + 8px); height: 100%;left:-4px;top: 0;background:').concat(e.dataset.CountDownNumBgColor||"#091e42",";border-radius:").concat(e.dataset.CountDownNumBorderRadius||"4",'px;"></div>\n                                <div style="z-index: 1;display:inline-block;">').concat(t,'</div>\n                            </div>\n                            <div contenteditable="false" style="height: 1.43em;flex:0 1 4px;display:inline-block;"></div>\n                        ')})).join('<div contenteditable="false" style="height: 1.43em;flex:1 100 0.25em;display:inline-block;"></div>'),"\n                </div>\n                ").concat(i.isShowLabel?'<div contenteditable="false" class="pt-count-down-label" style="box-sizing: border-box;position: relative;margin-top: 0 !important;font-size: .4em !important;flex-wrap: nowrap;color: #091e42;flex: 0 0;color:'.concat(e.dataset.CountDownLabelColor||"",';">\n                        <div contenteditable="false" style="opacity:0;display:inline-block;">透</div>\n                        <div contenteditable="false" style="display:inline-block;position: absolute;left: 50%;top: 50%;transform: translate(-50%, -50%);white-space: nowrap;">').concat(i.showLabel[o],"</div>\n                    </div>"):"","\n            </div>\n        ")})).join('\n            <div\n                contenteditable="false"\n                class="pt-count-down-divide"\n                style="\n                    box-sizing: border-box;line-height: 1.43em;font-size: 1em !important;color: #091e42;margin-top: 0 !important;text-align: center;flex: 2.5 0.1 0.75em;\n                    color:'.concat(e.dataset.CountDownDivideColor||"",';\n                "\n            >\n                :\n            </div>\n        ')))}}var ci=function(){function e(){Object.defineProperty(this,"timer",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"onmessage",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.timer=null,this.onmessage=null}return Object.defineProperty(e.prototype,"postMessage",{enumerable:!1,configurable:!0,writable:!0,value:function(e){this.timer&&clearInterval(this.timer),"stop"===e?this.timer=null:"function"==typeof this.onmessage&&(this.timer=setInterval(this.onmessage,1e3))}}),e}();function ui(){var e=this,t=null;this.onmessage=function(n){var i=n.data;t&&clearInterval(t),"stop"===i?t=null:(e.postMessage(""),t=setInterval((function(){return e.postMessage("")}),1e3))}}var si,pi=function(){function e(e){var t=this;Object.defineProperty(this,"type",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"set",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"state",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"closePopup",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"worker",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.type=e,this.set=[],this.state="stop",this.add=this.add.bind(this),this.delete=this.delete.bind(this),this.checkSizeToRunOrStop=this.checkSizeToRunOrStop.bind(this),this.run=this.run.bind(this),this.stop=this.stop.bind(this),this.update=this.update.bind(this),this.closePopup={},"seconds"===e?(this.worker=function(){try{var e=new Blob(["(".concat(ui.toString(),")()")],{type:"application/javascript"});return new Worker(URL.createObjectURL(e))}catch(e){return new ci}}(),this.worker.onmessage=function(){return t.update()}):this.worker=null}return Object.defineProperty(e.prototype,"add",{enumerable:!1,configurable:!0,writable:!0,value:function(e){e&&(e.dataset.CountDownEnd="false",this.set.push(e),this.checkSizeToRunOrStop())}}),Object.defineProperty(e.prototype,"delete",{enumerable:!1,configurable:!0,writable:!0,value:function(e){this.set=this.set.filter((function(t){return t!==e})),this.checkSizeToRunOrStop()}}),Object.defineProperty(e.prototype,"checkSizeToRunOrStop",{enumerable:!1,configurable:!0,writable:!0,value:function(){"stop"===this.state?this.set.length>0&&this.run():0===this.set.length&&this.stop()}}),Object.defineProperty(e.prototype,"run",{enumerable:!1,configurable:!0,writable:!0,value:function(){this.state="run","milliseconds"===this.type?this.worker=requestAnimationFrame(this.update):this.worker.postMessage("start")}}),Object.defineProperty(e.prototype,"stop",{enumerable:!1,configurable:!0,writable:!0,value:function(){this.set=[],this.state="stop","milliseconds"===this.type?(cancelAnimationFrame(this.worker),this.worker=null):this.worker.postMessage("stop")}}),Object.defineProperty(e.prototype,"update",{enumerable:!1,configurable:!0,writable:!0,value:function(){var e=this;this.set&&(this.set.forEach((function(t){t.parentNode&&"false"===t.dataset.CountDownEnd?li(t,e.type):("true"===t.dataset.CountDownEnd&&"close"===t.dataset.CountDownBehaviorAfter&&"function"==typeof e.closePopup[t.dataset.popupId]&&e.closePopup[t.dataset.popupId](),e.delete(t))})),"milliseconds"===this.type&&"stop"!==this.state&&(this.worker=requestAnimationFrame(this.update)))}}),e}(),di=function(){function e(){this.addCountDown=this.addCountDown.bind(this),this.deleteCountDown=this.deleteCountDown.bind(this),this.clear=this.clear.bind(this),this.setClosePopup=this.setClosePopup.bind(this),this.updateSet={seconds:new pi("seconds"),milliseconds:new pi("milliseconds")}}return Object.defineProperty(e.prototype,"setClosePopup",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t){this.updateSet.seconds.closePopup[e]=t,this.updateSet.milliseconds.closePopup[e]=t}}),Object.defineProperty(e.prototype,"addCountDown",{enumerable:!1,configurable:!0,writable:!0,value:function(e){var t;e&&e.dataset.menuAction===on.DATA_COUNTDOWN&&(-1!==(null===(t=e.dataset.CountDownShowUnit)||void 0===t?void 0:t.indexOf("milliseconds"))?(this.updateSet.seconds.delete(e),this.updateSet.milliseconds.add(e)):(this.updateSet.milliseconds.delete(e),this.updateSet.seconds.add(e)))}}),Object.defineProperty(e.prototype,"deleteCountDown",{enumerable:!1,configurable:!0,writable:!0,value:function(e){this.updateSet.seconds.delete(e),this.updateSet.milliseconds.delete(e)}}),Object.defineProperty(e.prototype,"clear",{enumerable:!1,configurable:!0,writable:!0,value:function(){this.updateSet.seconds.stop(),this.updateSet.milliseconds.stop()}}),e}(),fi=new di,hi=function(){function e(e){Object.defineProperty(this,"popup",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"countDownWorker",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.popup=e,this.countDownWorker=fi}return Object.defineProperty(e.prototype,"checkCountDownExpired",{enumerable:!1,configurable:!0,writable:!0,value:function(){return!!this.popup.popupWrap&&[].slice.call(this.popup.popupWrap.querySelectorAll('[data-menu-action="'.concat(on.DATA_COUNTDOWN,'"]'))).some((function(e){if("true"===e.dataset.CountDownEnd&&"close"===e.dataset.CountDownBehaviorAfter)return!0}))}}),Object.defineProperty(e.prototype,"init",{enumerable:!1,configurable:!0,writable:!0,value:function(){var e=this;if(this.popup.popupWrap){var t=[].slice.call(this.popup.popupWrap.querySelectorAll('[data-menu-action="'.concat(on.DATA_COUNTDOWN,'"]')));t instanceof Array&&!t.length||t.forEach((function(t){"CountDown"===t.dataset.CountDownMode&&t.dataset.silexId&&(t.dataset.CountDownStartTime=vi(e.popup.popup.popupId,t.dataset.silexId,e.popup.isPreview)),t.dataset.popupId=e.popup.popup.popupId,li(t)}))}}}),Object.defineProperty(e.prototype,"startCountDown",{enumerable:!1,configurable:!0,writable:!0,value:function(){var e=this;if(this.popup.popupWrap){var t=[].slice.call(this.popup.popupWrap.querySelectorAll('[data-menu-action="'.concat(on.DATA_COUNTDOWN,'"]')));t instanceof Array&&!t.length||t.forEach((function(t){("CountDown"!==t.dataset.CountDownMode||t.dataset.CountDownTime&&Number(t.dataset.CountDownTime)>0)&&("CountDown"===t.dataset.CountDownMode&&t.dataset.silexId&&(t.dataset.CountDownStartTime=vi(e.popup.popup.popupId,t.dataset.silexId,e.popup.isPreview)),fi.addCountDown(t))}))}}}),Object.defineProperty(e.prototype,"clearCountDownFromPop",{enumerable:!1,configurable:!0,writable:!0,value:function(){if(this.popup.popupWrap){var e=[].slice.call(this.popup.popupWrap.querySelectorAll('[data-menu-action="'.concat(on.DATA_COUNTDOWN,'"]')));e instanceof Array&&!e.length||e.forEach((function(e){fi.deleteCountDown(e)}))}}}),e}();function vi(e,t,n){var i="pt_countdown_".concat(e,"_").concat(t),r=n?gn(i):tt(i);return r||(r=new Date+"",n?mn(i,r):nt(i,r,1e3,"/",Ve.domain)),r}function bi(e){return/\S+@\S+\.\S+/.test(e)}function mi(e){return e&&/^[0-9_-]+$/.test(e)}var gi={copySuccessfully:{zh:"复制成功！",ja:"コピーに成功しました！",en:"Copy successfully!"},previewExpiredTitle:{zh:"- 预览链接已失效 -",ja:"- プレビュー用URL失効のお知らせ -",en:"- Preview URL expired -"},previewExpiredContent:{zh:"该预览链接已失效。请重新生成预览链接。",ja:"このプレビュー用URLは失効になりました。もう一度生成してください。",en:"This preview URL has expired. Please generate a new URL to preview."},previewExpiredButton:{zh:"确定",ja:"確定",en:"Confirm"},form_error_tips_normal:{zh:"请输入值",ja:"入力してください",en:"Please input your answer."},form_error_tips_name_required:{zh:"请输入名字",ja:"入力してください",en:"Please input a name."},form_error_tips_email_required:{zh:"请输入邮箱",ja:"入力してください",en:"Please input an email."},form_error_tips_phone_required:{zh:"请输入电话号码",ja:"入力してください",en:"Please input a phone number."},form_error_tips_dropdown_required:{zh:"请输入值",ja:"入力してください",en:"Please select your answer."},form_error_tips_email_invalid:{zh:"请输入有效邮箱",ja:"有効なメールアドレスを記入してください",en:"Please input a valid email."},form_error_tips_phone_invalid:{zh:"请输入有效电话号码",ja:"有効な電話番号を記入してください",en:"Please input a valid phone number."},form_error_tips_duplicate:{zh:"当前值已存在，请尝试其他值",ja:"この値は既に登録されています",en:"This answer was already submitted. Please try another."},form_error_tips_name_duplicate:{zh:"当前名字已存在，请尝试其他值",ja:"この値は既に登録されています",en:"This name was already submitted. Please try another."},form_error_tips_email_duplicate:{zh:"当前邮箱已存在，请尝试其他值",ja:"この値は既に登録されています",en:"This email was already submitted. Please try another."},form_error_tips_phone_duplicate:{zh:"当前电话号码已存在，请尝试其他值",ja:"この値は既に登録されています",en:"This phone number was already submitted. Please try another."}},yi=null===(si=Ue.navigator.userLanguage||Ue.navigator.language)||void 0===si?void 0:si.toLocaleLowerCase().substring(0,2);function wi(e){var t,n;return(null===(t=gi[e])||void 0===t?void 0:t[yi])||(null===(n=gi[e])||void 0===n?void 0:n.en)||""}var _i=function(){function e(e){Object.defineProperty(this,"popup",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"hasError",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"needCheckDuplicate",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"formFieldDomList",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"fieldIdList",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"fieldValueList",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"submitLoading",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"clickTarget",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"submitResoluteCallback",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"fieldNameLabel",{enumerable:!0,configurable:!0,writable:!0,value:"data-field-name"}),this.popup=e,this.hasError=!1,this.needCheckDuplicate=!1,this.formFieldDomList=[],this.fieldIdList=[],this.fieldValueList=[],this.submitLoading=!1,this.clickTarget=void 0,this.submitResoluteCallback=void 0}return Object.defineProperty(e.prototype,"_resetStates",{enumerable:!1,configurable:!0,writable:!0,value:function(){this.hasError=!1,this.needCheckDuplicate=!1,this.formFieldDomList=[],this.fieldIdList=[],this.fieldValueList=[]}}),Object.defineProperty(e.prototype,"_setFieldDomList",{enumerable:!1,configurable:!0,writable:!0,value:function(){this.formFieldDomList=[].slice.call(this.popup.popupWrap.querySelectorAll('[data-menu-action="insert.field"]'))}}),Object.defineProperty(e.prototype,"_checkField",{enumerable:!1,configurable:!0,writable:!0,value:function(){for(var e,t,n,i=0;i<this.formFieldDomList.length;i++){var r=this.formFieldDomList[i].getAttribute("data-field-id")||"",o=this.formFieldDomList[i].querySelector(".control input, .control textarea, .control select"),a=o.value,l=null===(t=null===(e=this.formFieldDomList)||void 0===e?void 0:e[i])||void 0===t?void 0:t.querySelector(".label"),c=this.formFieldDomList[i].getAttribute("data-ptx-componentid")||"",u=JSON.parse((null==o?void 0:o.getAttribute("data-ptx-validators"))||""),s=(null==l?void 0:l.getAttribute(this.fieldNameLabel))||(null==l?void 0:l.innerText),p=o&&o.getAttribute("data-ptx-property"),d=!1,f=this.formFieldDomList[i].querySelector(".error");if(null==f||f.setAttribute("class","error"),(null==u?void 0:u.allowDuplicate)||(this.needCheckDuplicate=!0),null==u?void 0:u.required)if((n=a)&&""!==n)"email"!==c||bi(a)||(d=wi("form_error_tips_email_invalid")),"phone"!==c||mi(a)||(d=wi("form_error_tips_phone_invalid"));else switch(c){case"name":d=wi("form_error_tips_name_required");break;case"email":d=wi("form_error_tips_email_required");break;case"phone":d=wi("form_error_tips_phone_required");break;case"dropdownlist":d=wi("form_error_tips_dropdown_required");break;default:d=wi("form_error_tips_normal")}else a&&""!==a&&("email"!==c||bi(a)||(d=wi("form_error_tips_email_invalid")),"phone"!==c||mi(a)||(d=wi("form_error_tips_phone_invalid")));d&&f?(f.innerText=d,f.style.display="block",this.hasError=!0):f.style.display="none",this.fieldValueList.push({fieldID:this.formFieldDomList[i].getAttribute("data-field-id")||"",fieldValue:a,fieldName:s,fieldType:c}),this.fieldIdList.push({fieldID:r,fieldName:s,alowDuplicate:u.allowDuplicate,allowConnect:!!u.allowConnect,connectProperty:p||"",fieldValue:a,error:d,errorDom:f})}}}),Object.defineProperty(e.prototype,"_checkPreviewFormField",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t){var n=gn(e),i=t.reduce((function(e,t){return e[t.fieldID]=!0,e}),{});if(!n)return i;var r=(n=JSON.parse(n)).previewFormContent;return r?(t.forEach((function(e){var t=e.fieldID,n=e.fieldValue;i[e.fieldID]=!r.some((function(e){return e.fieldID===t&&e.fieldValue===n}))})),i):i}}),Object.defineProperty(e.prototype,"_checkDuplicate",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t){var n,i=this,r=this.fieldIdList.filter((function(e){return!e.alowDuplicate&&e.fieldValue&&""!==e.fieldValue})).map((function(e){return{fieldID:e.fieldID,fieldValue:e.fieldValue}}));if(this.popup.isPreview){var o=this._checkPreviewFormField(this.popup.popup.popupId,r);return this.fieldIdList.forEach((function(e){var t;if(void 0!==o[e.fieldID]&&!e.error&&1==!o[e.fieldID]){var n=e.fieldID,r=wi("form_error_tips_duplicate");n.indexOf("name")>-1&&(r=wi("form_error_tips_name_duplicate")),n.indexOf("email")>-1&&(r=wi("form_error_tips_email_duplicate")),n.indexOf("phone")>-1&&(r=wi("form_error_tips_phone_duplicate")),e.error=r,null===(t=e.errorDom)||void 0===t||t.setAttribute("class","error allow-duplicate"),i.hasError=!0}})),void(this.hasError?this._handleSubmitReject(t):(function(e,t){var n=gn(e);if(n){var i=(n=JSON.parse(n)).previewFormContent;i?i.concat(t):i=t,n.previewFormContent=i,mn(e,JSON.stringify(n))}else n={seenTimes:1,hasClosed:0,hasClicked:0,formSubmitted:0,session:{},previewFormContent:null}}(this.popup.popup.popupId,this.fieldValueList),null===(n=this.submitResoluteCallback)||void 0===n||n.call(this)))}this.submitLoading=!0,Bn.form(r,this.popup.experience.engageId,this.popup.version.versionId,this.popup.popup.popupId,(function(n){setTimeout((function(){i.submitLoading=!1})),i._handleSubmitCallback(n,e,t)}),(function(){setTimeout((function(){i.submitLoading=!1}))}))}}),Object.defineProperty(e.prototype,"_handleSubmitCallback",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t,n){var i;if(e){var r=JSON.parse(e),o=this;if("success"!==(null==r?void 0:r.status))st({module:"form",message:"Form Submit field: Error info: ".concat(r)});else{var a=r.data;if(this.fieldIdList.forEach((function(e){if(void 0!==a[e.fieldID])if(e.error||1!=!a[e.fieldID])e.errorDom&&(e.errorDom.style.display="none");else{var t=e.fieldID,n=wi("form_error_tips_duplicate");t.indexOf("name")>-1&&(n=wi("form_error_tips_name_duplicate")),t.indexOf("email")>-1&&(n=wi("form_error_tips_email_duplicate")),t.indexOf("phone")>-1&&(n=wi("form_error_tips_phone_duplicate")),e.error=n,e.errorDom&&(e.errorDom.innerText=e.error,e.errorDom.style.display="block"),o.hasError=!0}})),this.hasError)return void this._handleSubmitReject(n);this.sendSubmitPackage({formContent:JSON.stringify(this.fieldValueList),fieldIdList:JSON.stringify(this.fieldIdList),config:n,transport:t}),null===(i=this.submitResoluteCallback)||void 0===i||i.call(this);var l=this.fieldIdList.reduce((function(e,t){return t.connectProperty&&(e[t.connectProperty]=t.fieldValue),e}),{});"{}"!==JSON.stringify(l)&&Bn.identify("",l,"engage")}}else st({module:"form",message:"Form Submit field: Error info: ".concat(e)})}}),Object.defineProperty(e.prototype,"_handleSubmitReject",{enumerable:!1,configurable:!0,writable:!0,value:function(e){var t=e||{},n=t.cssSelector,i=t.stayTime,r=t.visualEventElementSelector,o=t.isVisualEventElement,a=t.interactionType;[n,i,r,o,a].some((function(e){return void 0===e}))||Bn.click({cssSelector:n,stayTime:i,visualEventElementSelector:r,isVisualEventElement:o,interactionType:a})}}),Object.defineProperty(e.prototype,"handleFormSubmit",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t,n,i){var r,o=this;if(!this.submitLoading)if(this._resetStates(),this._setFieldDomList(),this._checkField(),this.submitResoluteCallback=i,this.clickTarget=t,this.hasError)this._handleSubmitReject(n);else if(this.needCheckDuplicate)this._checkDuplicate(e,n);else{var a=this.fieldIdList.reduce((function(e,t){return t.connectProperty&&(e[t.connectProperty]=t.fieldValue),e}),{});"{}"!==JSON.stringify(a)&&Bn.identify("",a,"engage"),this.popup.isPreview?this.popup.updateCache("previewFormContent"):this.sendSubmitPackage({formContent:JSON.stringify(this.fieldValueList),fieldIdList:JSON.stringify(this.fieldIdList),config:n,transport:e}),this.popup.updateCache("formSubmitted"),t&&this.popup.popupRender.handleGotoWidgetClick(t),null===(r=this.submitResoluteCallback)||void 0===r||r.call(this),setTimeout((function(){o.submitLoading=!1}))}}}),Object.defineProperty(e.prototype,"sendSubmitPackage",{enumerable:!1,configurable:!0,writable:!0,value:function(e){this.popup.isPreview||(Bn.engage({engageId:this.popup.experience.engageId,engageVersionId:this.popup.version.versionId,engageAction:"submit",properties:{creativeId:this.popup.popup.popupId,creativeType:this.popup.createType,formContent:e.formContent||"",fieldIdList:e.fieldIdList||""},config:e.config,transport:e.transport||"xhr"}),Or.sendExperienceEventToGA("click",{experienceType:this.popup.experience.engageType,experienceId:this.popup.experience.engageId,experienceName:this.popup.experience.engageName,versionId:this.popup.version.versionId,versionName:this.popup.version.versionName,clickTarget:this.clickTarget}))}}),Object.defineProperty(e.prototype,"checkElementHasNoPackageAttr",{enumerable:!1,configurable:!0,writable:!0,value:function(e){return null==e?void 0:e.getAttribute("data-engage-no-package")}}),Object.defineProperty(e.prototype,"setFieldNameToAttribute",{enumerable:!1,configurable:!0,writable:!0,value:function(){var e=this;this.popup.popupWrap.querySelectorAll('[data-menu-action="insert.field"]').forEach((function(t){var n=t.querySelector(".label");n&&n.setAttribute(e.fieldNameLabel,n.innerText)}))}}),e}();function Oi(e){var t;return null===(t=null==e?void 0:e.hasAttribute)||void 0===t?void 0:t.call(e,on.TEMP_A)}function Ti(e,t,n){var i=document.createElement("textarea");i.style.position="fixed",i.style.top="0",i.style.left="0",i.style.width="2em",i.style.height="2em",i.style.padding="0",i.style.border="none",i.style.outline="none",i.style.boxShadow="none",i.style.background="transparent",i.value=e,document.body.appendChild(i),i.focus(),i.select();try{document.execCommand("copy"),"function"==typeof t&&t()}catch(e){"function"==typeof n&&n()}document.body.removeChild(i)}var Pi="data-engage-action";function Ei(e,t,n){if(!e)return null;var i=(t||{}).enableClickAction,r=e.getAttribute("href");return"A"===e.tagName&&(e.removeAttribute("href"),e.removeAttribute("target")),i&&(e.setAttribute(tn,JSON.stringify(t)),e.style.cursor="pointer","function"==typeof n&&e.addEventListener("click",D(n,200),!1)),function(){"A"===e.tagName&&r&&e.setAttribute("href",r),i&&(e.removeAttribute(tn),e.style.cursor="auto","function"==typeof n&&e.removeEventListener("click",D(n,200),!1))}}function Si(e,t,n,i){var r=n.clickActionConfig,o=n.clickActionType,a=n.enableClickAction;if(a){switch(o){case"link":case"line":var l=r[o]||{},c=l.linkURL,u=l.openNewTab;c&&function(e,t){void 0===t&&(t=!1);var n=document.createElement("a");n.setAttribute(on.TEMP_A,""),n.href=e,n.target=t?"_blank":"_self",document.body.appendChild(n),n.click(),document.body.removeChild(n)}((v=Rt(h=c),Be.crossDomainEnabled&&v?Mt(h):h),u);break;case"tel":var s=(r[o]||{}).phoneNumber;s&&function(e){var t=document.createElement("a");t.setAttribute(on.TEMP_A,""),t.href="tel:"+e,document.body.appendChild(t),t.click(),document.body.removeChild(t)}(s);break;case"copiedText":var p=(r[o]||{}).text;p&&function(e,t,n){!function(e,t,n,i){new(n||(n=Promise))((function(r,o){function a(e){try{c(i.next(e))}catch(e){o(e)}}function l(e){try{c(i.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,l)}c((i=i.apply(e,t||[])).next())}))}(this,void 0,void 0,(function(){return function(e,t){var n,i,r,o,a={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return o={next:l(0),throw:l(1),return:l(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function l(l){return function(c){return function(l){if(n)throw new TypeError("Generator is already executing.");for(;o&&(o=0,l[0]&&(a=0)),a;)try{if(n=1,i&&(r=2&l[0]?i.return:l[0]?i.throw||((r=i.return)&&r.call(i),0):i.next)&&!(r=r.call(i,l[1])).done)return r;switch(i=0,r&&(l=[2&l[0],r.value]),l[0]){case 0:case 1:r=l;break;case 4:return a.label++,{value:l[1],done:!1};case 5:a.label++,i=l[1],l=[0];continue;case 7:l=a.ops.pop(),a.trys.pop();continue;default:if(!((r=(r=a.trys).length>0&&r[r.length-1])||6!==l[0]&&2!==l[0])){a=0;continue}if(3===l[0]&&(!r||l[1]>r[0]&&l[1]<r[3])){a.label=l[1];break}if(6===l[0]&&a.label<r[1]){a.label=r[1],r=l;break}if(r&&a.label<r[2]){a.label=r[2],a.ops.push(l);break}r[2]&&a.ops.pop(),a.trys.pop();continue}l=t.call(e,a)}catch(e){l=[6,e],i=0}finally{n=r=0}if(5&l[0])throw l[1];return{value:l[0]?l[1]:void 0,done:!0}}([l,c])}}}(this,(function(i){try{navigator.clipboard.writeText(e).then((function(){t()}),(function(i){Ti(e,t,n)}))}catch(i){return Ti(e,t,n),[2]}return[2]}))}))}(p,(function(){!function(e,t,n){if(e&&t){var i=J('[data-insert-tooltip-text="'.concat(n,']"'),Ue);i&&i.remove();var r=0,o=0;if("click"===e.type&&(r=e.clientX,o=e.clientY),"touchend"===e.type||"touchstart"===e.type){var a="touchend"===e.type?e.changedTouches:e.touches;(null==a?void 0:a[0])&&(r=a[0].clientX,o=a[0].clientY)}var l=t.getBoundingClientRect(),c=l.top,u=l.left,s=l.right,p=l.height,d=document.body.clientWidth,f={top:parseInt((c-4-32).toString(),10),bottom:parseInt((c+p+4).toString(),10),left:u,right:s};0===r&&0===o?(f.left=parseInt((u+(s-u)/2-85).toString(),10),f.right=parseInt((u+(s-u)/2+85).toString(),10)):(f.left=r>parseInt(85..toString(),10)?parseInt((r-85).toString(),10):r,f.right=parseInt((r-170).toString(),10));var h=document.createElement("div");h.innerHTML='<div data-insert-tooltip="true" data-insert-tooltip-text="'.concat(n,'" style="\n          position: fixed;\n          border-radius: 3px;\n          background-color: #212121;\n          padding: 6px 16px;\n          display: flex;\n          align-items: center;\n          font-size: 13px;\n          color: #fff;\n          font-weight: 400;\n          white-space: nowrap;\n          top: ').concat(f.top>0?f.top:f.bottom,"px;\n          left: ").concat(f.left>0&&f.left<d?f.left:f.right,'px;\n          z-index: 2147483647;\n      ">\n        <svg\n          style="width: 16px; height: 16px; fill: #fff; margin-right: 8px;"\n          viewBox="0 0 1024 1024"\n          version="1.1"\n          xmlns="http://www.w3.org/2000/svg">\n          <path d="M512 0C229.696 0 0 229.696 0 512s229.696 512 512 512 512-229.696 512-512-229.696-512-512-512z m0 960c-246.976 0-448-201.024-448-448s201.024-448 448-448 448 201.024 448 448-201.024 448-448 448z"  />\n          <path d="M828.544 349.696L433.92 744.32 195.456 503.872a40.64 40.64 0 1 1 57.472-57.472l180.992 182.4 337.152-337.152a40.64 40.64 0 1 1 57.472 57.472v0.576z"  />\n        </svg>\n        <span>').concat(n,"</span>\n    </div>");var v=h.firstChild;v&&document.body.appendChild(v),setTimeout((function(){v&&v.remove()}),1500)}}(e,t,wi("copySuccessfully"))}));break;case"downloadFile":var d=(r[o]||{}).fileURL;d&&function(e){var t=document.createElement("a");t.setAttribute(on.TEMP_A,""),t.href=e,t.download="",document.body.appendChild(t),t.click(),document.body.removeChild(t)}(d);break;case"runCode":var f=(r[o]||{}).code;f&&function(e,t){var n=t.getElementsByTagName("head")[0],i=document.createElement("script"),r="\n        try {\n            (function(){".concat(e,"})();\n        } catch (error) {\n            console.warn(error);\n        }");i.innerHTML=r,n.appendChild(i),n.removeChild(i)}(f,Ue.document)}var h,v;null==i||i(t,{enableClickAction:a,clickActionType:o,clickActionConfig:r})}}function Ii(e){return!!e&&(q(e)?Ii(z(e)):"submit"===(null==e?void 0:e.getAttribute("data-button-type"))||!(!e.parentNode||"body"===e.nodeName.toLowerCase())&&Ii(e.parentNode))}function Ci(e){if(!e)return 0;if(q(e))return Ci(z(e));var t=on.DATA_ACTION_CONFIG,n=on.DATA_BLOCK,i=on.BUTTON_CLOSE,r=on.ICON_CLOSE,o=on.BUTTON_FORM_SUBMIT,a=e.getAttribute(t)||e.getAttribute(tn),l=e.getAttribute(n),c=!1;try{a&&"closePopup"===JSON.parse(a).clickActionType&&(c=!0)}catch(e){}return c||l===i||l===r?1:a||l===o?2:e.parentNode&&"BODY"!==e.nodeName?Ci(e.parentNode):0}var ji=function(){function e(e){Object.defineProperty(this,"popup",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.popup=e}return Object.defineProperty(e.prototype,"_handleActionClick",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t,n,i){var r,o,a=Ii(e),l=t||{},c=l.enableClickAction,u=l.clickActionType,s=l.clickActionConfig,p=!0;if(c){switch(u){case"link":case"line":var d=null!==(r=s[u])&&void 0!==r?r:{},f=d.linkURL,h=d.closePopup;(a||f&&h)&&(this.popup.unmounted(),p=!a);break;case"runCode":(null===(o=s.runCode)||void 0===o?void 0:o.closePopup)&&(this.popup.unmounted(),p=!a);break;case"closePopup":this.popup.unmounted(),a||this.popup.popupRender.sendClose(n,e,i),p=!1;break;case"showMessage":this.popup.popupRender.gotoNext(!0),p=!1}a&&(p=!1,this.popup.updateCache("formSubmitted"))}c&&!this.popup.isPreview&&p&&(this.popup.updateCache("hasClicked"),this.popup.sendEngagePackage({type:"click",config:n,transport:i,properties:{},clickTarget:e}))}}),Object.defineProperty(e.prototype,"applyAction",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t,n,i){this._handleActionClick(e,t,n,i)}}),e}();function ki(e){if(!e)return e;var t;if([Number,String,Boolean].forEach((function(n){e instanceof n&&(t=n(e))})),void 0===t)if("[object Array]"===Object.prototype.toString.call(e))t=[],e.forEach((function(e,n){t[n]=ki(e)}));else if("object"==typeof e)if(e.nodeType&&"function"==typeof e.cloneNode)t=e.cloneNode(!0);else if(e.prototype)t=e;else if(e instanceof Date)t=new Date(e);else for(var n in t={},e)t[n]=ki(e[n]);else t=e;return t}function xi(e){var t=je(e);if(!t)return!1;if(function(e){var t;if(!e)return!0;var n=on.TEMP_A;if(null===(t=null==e?void 0:e.hasAttribute)||void 0===t?void 0:t.call(e,n))return!0;var i=e.nodeName.toLowerCase();return"html"===i||(new Date).getTime()-Ve.clickActionTime<c&&"a"!==i}(t))return!1;var n=on.DATA_MENU_ACTION,i=on.POPUP,r=on.DOM_TYPE,o=Ai(t,n,i),a=function(e,t){for(var n=Ve.trackEventList,i=[],r=[],o=t?Ai(e,t,""):e,a=0;a<n.length;a++)try{for(var l=n[a],c=0;c<l.events.length;c++)for(var u=l.events[c],s=X(l.selector,Ue),p=0;p<s.length;p++)s[p]===o?i.push(u):0===i.length&&Di(s[p],o)&&r.push(u)}catch(e){}return 0===i.length&&r.length>0&&(i=r),ki(i).reduce((function(e,t){return e.push({eventName:t.eventName,eventType:"pti"===t.source?1:0,properties:t.properties}),e}),[])}(t,o?r:"");return{events:a,isPopup:o}}function Ai(e,t,n){var i;if(!e||!t)return null;if(q(e))return Ai(z(e),t,n);if(null===(i=null==e?void 0:e.hasAttribute)||void 0===i?void 0:i.call(e,t)){if(!n)return e;if(e.getAttribute(t)===n)return e;if(e.parentNode&&"body"!==e.nodeName.toLowerCase())return Ai(e.parentNode,t,n)}else if(e.parentNode&&"body"!==e.nodeName.toLowerCase())return Ai(e.parentNode,t,n);return null}function Di(e,t){return!(!e||!t)&&(e===t||!(!t.parentNode||"body"===e.nodeName.toLowerCase())&&Di(e,t.parentNode))}var Li=function(){function e(e){Object.defineProperty(this,"popupInstance",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"hasClosedByManual",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"rollBackList",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"allAction",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_pageClickCallback",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.popupInstance=e,this.rollBackList=[],this.allAction=[],this.hasClosedByManual=!1;var t=this;this._pageClickCallback=function(e){t.popupInstance.popupWrap&&t.popupInstance.popupWrap.contains(e.target)&&t.applyAction(e.event,e.config)}}return Object.defineProperty(e.prototype,"_bindActionStyle",{enumerable:!1,configurable:!0,writable:!0,value:function(){var e=this,t=on.DATA_ACTION_CONFIG,n=on.DOM_TYPE;this.allAction=function(e){var t=[];return e?([].slice.call(e.querySelectorAll("div["+Pi+"]")).forEach((function(e){var n=e.getAttribute(Pi);if(n)try{var i=JSON.parse(n);t.push({el:e,config:i})}catch(e){}})),t):t}(this.popupInstance.popupWrap);var i=this.popupInstance.popupWrap.querySelectorAll("div[data-engage-action]");[].slice.call(i).length>0&&[].slice.call(i).forEach((function(i){var r=Ai(i,n),o=Ai(i,t),a=e.allAction.find((function(e){return o===e.el})),l=r&&Ei(r,null==a?void 0:a.config);l&&e.rollBackList.push(l)}))}}),Object.defineProperty(e.prototype,"removeActionEffect",{enumerable:!1,configurable:!0,writable:!0,value:function(){this.rollBackList.forEach((function(e){return e()}))}}),Object.defineProperty(e.prototype,"_renderCodeMode",{enumerable:!1,configurable:!0,writable:!0,value:function(){var e=this;(this.popupInstance.popup.code||[]).forEach((function(t){if("css"===t.type){var n="#engage_".concat(e.popupInstance.popup.popupId),i=hn(t.code,n);i&&Tn(i,e.popupInstance.popup.popupId,e.popupInstance.renderType)}else!function(e,t){var n=Ue.document.createElement("script"),i="\n        try {\n            (function(){".concat(e,"})();\n        } catch (error) {\n            console.warn(error);\n        }");if(n.innerHTML=i,!Y()||"body"===t)return Ue.document.getElementsByTagName("head")[0].appendChild(n),void Ue.document.getElementsByTagName("head")[0].removeChild(n);G(n,Ue),function(e,t){var n;void 0===t&&(t=window),null===(n=W(t).shadowRoot)||void 0===n||n.removeChild(e)}(n,Ue)}(t.code,e.popupInstance.renderType)}))}}),Object.defineProperty(e.prototype,"_updateRootPageStyles",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t){if(void 0===t&&(t=0),"update"===e){if(!document.body.getAttribute("ptx_stickybar_origin_top_value")){var n=window.getComputedStyle(document.body).getPropertyValue("top"),i="auto"===n?0:Number(n.replace("px",""));document.body.setAttribute("ptx_stickybar_origin_top_value",i.toString())}var r=Number(document.body.getAttribute("ptx_stickybar_origin_top_value"));document.body.style.position="relative",document.body.style.top=t+r+"px"}else"restore"===e&&(r=Number(document.body.getAttribute("ptx_stickybar_origin_top_value")),document.body.style.position="static",document.body.style.top=r+"px")}}),Object.defineProperty(e.prototype,"_getNodeActionType",{enumerable:!1,configurable:!0,writable:!0,value:function(e){var t,n,i,r,o,a=on.DATA_BLOCK,l=on.DATA_BUTTON_TYPE,c=on.DATA_ACTION_CLICK,u=on.DATA_ACTION_CLOSE,s=on.DATA_ACTION_CONFIG,p=on.BUTTON_CLOSE,d=on.ICON_CLOSE,f=on.BUTTON_GOTO_WIDGET,h=on.BUTTON_FORM_SUBMIT,v=on.BUTTON_URL,b=on.DATA_URL_CLOSE_POPUP,m=je(e),g=je(e),y=null,w=null,_=!1,O=!1;try{do{y=(null===(t=null==g?void 0:g.getAttribute)||void 0===t?void 0:t.call(g,a))||"",w=null===(n=g.getAttribute)||void 0===n?void 0:n.call(g,l),O||(O=(null===(i=null==m?void 0:m.hasAttribute)||void 0===i?void 0:i.call(m,c))||(null===(r=null==m?void 0:m.hasAttribute)||void 0===r?void 0:r.call(m,u))||-1!==[p,d,f,h,v,b].indexOf(y))&&(g=m),_||(_=null===(o=null==m?void 0:m.hasAttribute)||void 0===o?void 0:o.call(m,s)),(!O||!_)&&(m=m.parentNode)}while(!(O&&_||m===this.popupInstance.popupWrap))}catch(e){st({module:"popup",message:"Popup check action node has error: "+e})}return{linkType:y,buttonType:w,interactiveNode:g,isActionNode:_,isInteractiveNode:O}}}),Object.defineProperty(e.prototype,"_triggerLink",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t){if("_blank"===e)try{Ue.open(t,"_blank")}catch(e){st({module:"popup",message:"not support to use window.open, error: "+e})}else Ue.location.href=t}}),Object.defineProperty(e.prototype,"_handleInteractiveNodeClick",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t,n,i,r){var o,a,l,c=this,u=on.BUTTON_CLOSE,s=on.ICON_CLOSE,p=on.BUTTON_GOTO_WIDGET,d=on.BUTTON_FORM_SUBMIT,f=on.BUTTON_URL,h=on.DATA_URL_CLOSE_POPUP,v=e.tagName.toUpperCase(),b=(e.textContent||v||"").trim()||"unknow target";if("image"===(null===(o=null==e?void 0:e.parentNode)||void 0===o?void 0:o.getAttribute("data-engage-block"))){var m=null===(a=e.querySelector("img"))||void 0===a?void 0:a.getAttribute("alt");m&&(b=m)}switch(t){case u:case s:return this.sendClose(r,e,i),void this.popupInstance.unmounted();case p:this._clear(),this.popupInstance.sendEngagePackage({type:"click",config:r,transport:i,properties:{target:b},clickTarget:e}),this.handleGotoWidgetClick(e);break;case d:this.popupInstance.popupForm.handleFormSubmit(i,e,r,(function(){c.handleGotoWidgetClick(e),c.popupInstance.updateCache("formSubmitted")}));break;default:this.popupInstance.sendEngagePackage({type:"click",config:r,transport:i,properties:{target:b},clickTarget:e})}var g=(null==e?void 0:e.href)||"",y=(null==e?void 0:e.target)||"";if(g&&!/^javascript:(void\(0\))?;?$/.test(g))if("submit"===n){var w="beacon";(null==r?void 0:r.events)&&r.events.length>0&&(w="xhr","_blank"===y&&(w="beacon")),this.popupInstance.popupForm.handleFormSubmit(w,e,r,(function(){c.popupInstance.updateCache("formSubmitted"),c._triggerLink(y,g)}))}else this._triggerLink(y,g);t===f&&(null===(l=e.getAttribute)||void 0===l?void 0:l.call(e,h))&&this.popupInstance.unmounted(),this.popupInstance.updateCache("hasClosed")}}),Object.defineProperty(e.prototype,"_clear",{enumerable:!1,configurable:!0,writable:!0,value:function(){var e,t,n;this.popupInstance.widget&&("inject"===this.popupInstance.widget.widgetSettings.stickyMode&&this._updateRootPageStyles("restore"),(null===(e=this.popupInstance.widget)||void 0===e?void 0:e.widgetSettings.showMask)&&un(this.popupInstance.widget.widgetId),ln("delete",this.popupInstance.widget.widgetSettings.position),this.popupInstance.popupWrap&&(null===(n=null===(t=this.popupInstance)||void 0===t?void 0:t.popupContainer)||void 0===n?void 0:n.hasChildNodes())&&this.popupInstance.popupContainer.contains(this.popupInstance.popupWrap)&&this.popupInstance.popupContainer.removeChild(this.popupInstance.popupWrap))}}),Object.defineProperty(e.prototype,"_setMaskStyle",{enumerable:!1,configurable:!0,writable:!0,value:function(){var e=(this.popupInstance.widget||{}).widgetSettings,t=this.popupInstance.popupWrap.querySelector('[data-engage-block="engage"]');t&&((null==e?void 0:e.showMask)?(null==e?void 0:e.showMask)&&(t.style.position="fixed"):(t.style.left="auto",t.style.right="auto",t.style.top="auto",t.style.bottom="auto"),"pos-sticky-top"===(null==e?void 0:e.position)&&"inject"===(null==e?void 0:e.stickyMode)&&this._updateRootPageStyles("update",null==e?void 0:e.height))}}),Object.defineProperty(e.prototype,"_renderHtmlCss",{enumerable:!1,configurable:!0,writable:!0,value:function(){var e;if(this.popupInstance.widget){var t=null!==(e=this.popupInstance.widget)&&void 0!==e?e:{},n=t.widgetNodes,i=t.version,r=n.css,o=n.html,a=n.commonStyle,l=void 0===a?"":a,c=this.popupInstance.widget.widgetSettings.position,u=i?function(e){switch(void 0===e&&(e="pos-center"),e){case"pos-center-top":return fn(Ft||(Ft=U(["",""],["",""])),{position:e,toEnter:"0% { opacity: 0; left: 50%; top: 0 } 100% { opacity: 1 }",toLeave:"0% { opacity: 1 } 100% { opacity: 0; left: 50%; top: 0 }"});case"pos-sticky-top":return fn(Bt||(Bt=U(["",""],["",""])),{position:e,toEnter:"0% { opacity: 0; transform: translate(-50%, -100%) } 100% { opacity: 1 }",toLeave:"0% { opacity: 1 } 100% { opacity: 0; transform: translate(-50%, -100%) }"});case"pos-right-bottom":return fn(Ut||(Ut=U(["",""],["",""])),{position:e,toEnter:"0% { opacity: 0; right:0; bottom: 0 } 100% { opacity: 1 }",toLeave:"0% { opacity: 1 } 100% { opacity: 0; right:0; bottom: 0 }"});case"pos-right-center":return fn(Ht||(Ht=U(["",""],["",""])),{position:e,toEnter:"0% { opacity: 0; right: 0; top: 50%; } 100% { opacity: 1 }",toLeave:"0% { opacity: 1; right: 0; top: 50%; } 100% { opacity: 0 }"});case"pos-right-top":return fn($t||($t=U(["",""],["",""])),{position:e,toEnter:"0% { opacity: 0; right: 0; top: 0; } 100% { opacity: 1 }",toLeave:"0% { opacity: 1; right: 0; top: 0; } 100% { opacity: 0 }"});case"pos-center-bottom":return fn(Vt||(Vt=U(["",""],["",""])),{position:e,toEnter:"0% { opacity: 0; left: 50%; bottom: 0; } 100% { opacity: 1 }",toLeave:"0% { opacity: 1; left: 50%; bottom: 0; } 100% { opacity: 0 }"});case"pos-sticky-bottom":return fn(Wt||(Wt=U(["",""],["",""])),{position:e,toEnter:"0% { opacity: 0; transform: translate(-50%, 100%) } 100% { opacity: 1 }",toLeave:"0% { opacity: 1; transform: translate(-50%, 100%) } 100% { opacity: 0 }"});case"pos-left-bottom":return fn(Gt||(Gt=U(["",""],["",""])),{position:e,toEnter:"0% { opacity: 0; left: 0; bottom: 0; } 100% { opacity: 1 }",toLeave:"0% { opacity: 1; left: 0; bottom: 0; } 100% { opacity: 0 }"});case"pos-left-center":return fn(qt||(qt=U(["",""],["",""])),{position:e,toEnter:"0% { opacity: 0; left: 0; top: 50%; } 100% { opacity: 1 }",toLeave:"0% { opacity: 1; left: 0; top: 50%; } 100% { opacity: 0 }"});case"pos-left-top":return fn(zt||(zt=U(["",""],["",""])),{position:e,toEnter:"0% { opacity: 0; left: 0; top: 0 } 100% { opacity: 1 }",toLeave:"0% { opacity: 1; left: 0; top: 0 } 100% { opacity: 0 }"});case"pos-center":return fn(Yt||(Yt=U(["",""],["",""])),{position:e,toEnter:"from { transform: scale(.8) }",toLeave:"to { transform: scale(.8) }"});default:return""}}(c):"",s=hn(l+r+u,"#engage_".concat(this.popupInstance.popup.popupId));if(s&&Tn(s,this.popupInstance.popup.popupId+this.popupInstance.widget.widgetId,this.popupInstance.renderType),o&&(this.popupInstance.popupWrap.innerHTML=o),i){var p=this.popupInstance.popupWrap.querySelector('div[data-menu-action="insert.popup"]');p&&"pos-center"===c&&(p.style.removeProperty("transform"),p.style.inset="0",p.style.margin="auto"),p&&p.classList.add("animate-enter")}this.popupInstance.popupWrap.style.display="none"}}}),Object.defineProperty(e.prototype,"_checkEngageData",{enumerable:!1,configurable:!0,writable:!0,value:function(){var e,t=on.DATA_SHOW_ENGAGE,n=(this.popupInstance.widget||{}).widgetSettings;if("false"===(null===(e=this.popupInstance.popupWrap)||void 0===e?void 0:e.getAttribute(t))&&n){var i=Jt.get(Qt)||[],r=i.indexOf(null==n?void 0:n.position);-1!==r&&(i.splice(r,1),Jt.set(Qt,i))}else;}}),Object.defineProperty(e.prototype,"_handlePopupClick",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t,n){var i=this._getNodeActionType(e),r=i.linkType,o=i.buttonType,a=i.interactiveNode;i.isInteractiveNode&&a&&r&&(e.preventDefault(),this._handleInteractiveNodeClick(a,r,o||"",t,n))}}),Object.defineProperty(e.prototype,"handleGotoWidgetClick",{enumerable:!1,configurable:!0,writable:!0,value:function(e){var t,n=null===(t=null==e?void 0:e.getAttribute)||void 0===t?void 0:t.call(e,on.DATA_GOTO_WIDGET);"prev"===n?this.gotoPrev():"next"===n&&this.gotoNext(!0)}}),Object.defineProperty(e.prototype,"gotoPrev",{enumerable:!1,configurable:!0,writable:!0,value:function(){var e=this.popupInstance.widgetIndex-1;e>=0&&(this.popupInstance.updateInstanceState("widgetIndex",e),this.render())}}),Object.defineProperty(e.prototype,"gotoNext",{enumerable:!1,configurable:!0,writable:!0,value:function(e){var t=this.popupInstance.popup.widgets.length-1,n=this.popupInstance.widgetIndex+1;if(n<=t){if(this.popupInstance.updateInstanceState("widgetIndex",n),e)try{ln("delete",this.popupInstance.popup.widgets[this.popupInstance.widgetIndex].widgetSettings.position)}catch(e){}this.render()}}}),Object.defineProperty(e.prototype,"sendClose",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t,n){var i=this.popupInstance.popupForm.checkElementHasNoPackageAttr(t),r={};t&&(r.target=((null==t?void 0:t.textContent)||(null==t?void 0:t.tagName.toUpperCase())||"").trim()||"unknow target"),this.popupInstance.isPreview||i||this.popupInstance.sendEngagePackage({type:"close",config:e,transport:n,properties:r}),this.popupInstance.updateCache("hasClosed")}}),Object.defineProperty(e.prototype,"close",{enumerable:!1,configurable:!0,writable:!0,value:function(){this._clear(),this.popupInstance.popupCountDown.clearCountDownFromPop(),this.popupInstance.shownByJs||qn.__deletePopupFromTheRenderList(this.popupInstance.experience.engageId,this.popupInstance.popup.popupId),sn("delete",this.popupInstance.popup.popupId),$e.off(T.PAGE_ON_CLICK,this._pageClickCallback)}}),Object.defineProperty(e.prototype,"getTransport",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t){var n,i="beacon";return(null==e?void 0:e.events)&&(null===(n=e.events)||void 0===n?void 0:n.length)>0&&(i="xhr",!1===t&&(i="beacon")),i}}),Object.defineProperty(e.prototype,"applyAction",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t){var n,i,r,o,a,l,c=this,u=on.DATA_ACTION_CONFIG,s=on.DOM_TYPE,p=on.DATA_ACTION_CLOSE,d=on.DATA_BLOCK,f=on.BUTTON_FORM_SUBMIT,h=on.DATA_ACTION_CLICK,v=je(e),b=!(["input","select","option","radio","textarea","checkbox"].indexOf(v.tagName.toLocaleLowerCase())>-1),m=Ai(v,s),g=Ai(v,u),y=c.allAction.find((function(e){return g===e.el})),w=((null===(i=null===(n=null==y?void 0:y.config)||void 0===n?void 0:n.clickActionConfig)||void 0===i?void 0:i.link)||{}).openNewTab,_=this.getTransport(t,w);if(m)if((null===(r=m.hasAttribute)||void 0===r?void 0:r.call(m,p))||m.querySelector("a[".concat(d,"]"))||(null===(o=m.hasAttribute)||void 0===o?void 0:o.call(m,d))&&"A"===m.tagName)c._handlePopupClick(e,_,t);else{var O=function(){Si(e,m,null==y?void 0:y.config,(function(e,n){c.popupInstance.popupAction.applyAction(e,n,t,_)}))};if(m.getAttribute(d)!==f){if(b&&y){if(Ii(v))return void c.popupInstance.popupForm.handleFormSubmit(_,m,t,O);if(null===(a=null==y?void 0:y.config)||void 0===a?void 0:a.enableClickAction)return void Si(e,m,null==y?void 0:y.config,(function(e,n){c.popupInstance.popupAction.applyAction(e,n,t,_)}))}!this.popupInstance.isPreview&&b&&(!y||!y.config.enableClickAction)&&(null==t?void 0:t.events)&&(null===(l=t.events)||void 0===l?void 0:l.length)>0&&Bn.track(F(F({},t),{params:{transport:_}}))}else Ai(v,h)?c._handlePopupClick(e,_,t):c.popupInstance.popupForm.handleFormSubmit(_,m,t,O)}}}),Object.defineProperty(e.prototype,"render",{enumerable:!1,configurable:!0,writable:!0,value:function(){var e,t,n,i,r=this;this.popupInstance.updateInstanceState("widget",this.popupInstance.popup.widgets[this.popupInstance.widgetIndex]),this.popupInstance.widget&&(t=this.popupInstance.widget.widgetSettings.position,-1===(Jt.get(Qt)||[]).indexOf(t)&&this.popupInstance.widget&&(this._renderHtmlCss(),Z()&&(null==(n=this.popupInstance.popupWrap)?void 0:n.querySelector('[data-menu-action="'.concat(on.DATA_COUNTDOWN,'"]')))?this.popupInstance.unmounted():(this.popupInstance.popupCountDown.init(),this.popupInstance.popupCountDown.checkCountDownExpired()?this.popupInstance.unmounted():(function(e){var t;if(e&&e.querySelectorAll('[data-ec-asset-type="video"]').length>0){var n,i=document.head.querySelector("script.ecVideoJs"),r=document.head.querySelector("link.ecVideoCss"),o=document.head.querySelector("script.ecYoutube");if(i||((n=document.createElement("script")).setAttribute("class","ecVideoJs"),n.src="https://ptxpublicres.ptengine.jp/scripts/video/ec-video.js",document.head.appendChild(n)),!r){var a=document.createElement("link");a.setAttribute("class","ecVideoCss"),a.href="https://ptxpublicres.ptengine.jp/styles/ec-video.css",a.rel="stylesheet",document.head.appendChild(a)}o||((n=document.createElement("script")).setAttribute("class","ecYoutube"),n.src="https://ptxpublicres.ptengine.jp/scripts/video/ec-youtube.js",document.head.appendChild(n));for(var l=e.querySelectorAll('[data-ec-asset-type="video"]'),c=function(e){var n=l[e],i=n.getAttribute("data-ec-asset")||"";if(!i)return{value:void 0};var r=JSON.parse(i),o=!0;r.video&&r.video.hideControls&&(o=!1);var a=r.videoUrl.videoType,c=n.querySelector("div.ecVideoBase"),u=n.querySelector("div.ecYoutube"),s=null==c?void 0:c.getAttribute("tip");if("url"===a&&""!==r.videoUrl.data){var p={controls:o,autoplay:r.video&&r.video.autoPlay||!1,loop:r.video&&r.video.loop||!1,poster:r.video&&r.video.poster||"",preload:"auto",fluid:!0,controlBar:{pictureInPictureToggle:!1,currentTimeDisplay:!0,timeDivider:!0,durationDisplay:!0,remainingTimeDisplay:!0,volumePanel:{inline:!1}},sources:[{src:r.videoUrl.data,type:"video/mp4"}]};p.autoplay&&(p.muted=!0,p.poster="");var d=setInterval((function(){if(window.videojs){clearInterval(d);var e=new window.videojs(null==c?void 0:c.querySelector(".ecVideoPlayer"),p);e.on("error",(function(){e.errorDisplay.contentEl_.innerHTML='<div style="background: rgb(9,30,66); width: 100%; height: 100%; position: relative; overflow: hidden;"><div style="width: 90%; padding: 0; position: absolute; left: 50%; top: 50%; transform: translate(-50%, -50%); display: flex; align-items: center; justify-content: center; font-size: 12px;"><img src="https://ptxpublicres.ptengine.jp/images/caution.svg" style="width: 2.8em; height: 2.8em; margin-right: 1em; color: rgb(255, 255, 255); opacity: 0.8;"/><p style="font-size: 12px; line-height: 20px; color: rgba(255, 255, 255, .8); margin: 0; text-align: left;">'.concat(s,"</p></div></div>")}));var t=n.querySelector(".vjs-big-play-button"),i=n.querySelector(".vjs-loading-spinner"),o=n.querySelector(".vjs-poster"),a=n.querySelector(".vjs-tech"),l=n.querySelector(".video-js");t&&i&&(t.style.transform="translate(-50%, -50%)",t.style.display="block",i.style.margin="-25px 0 0 -25px",t.style.margin="0",a.style.width="100%",a.style.height="100%",l.style.width="100%",l.style.height="100%",a.style.padding="0",l.style.padding="0",a.style.background="#000"),r.video&&r.video.poster&&o&&(o.style.backgroundSize="cover"),r.video&&r.video.autoPlay&&e.play(),e.on("play",(function(){t.style.display="none"}))}}),300)}if("youtube"===a&&""!==r.videoUrl.data){var f=r.videoUrl.data,h=function(e){var t;if(null===e)return!1;var n=e.match(/^.*((youtu.be\/)|(v\/)|(\/u\/\w\/)|(embed\/)|(watch\?))\??v?=?([^#&?]*).*/);return!(!n||11!==(null===(t=null==n?void 0:n[7])||void 0===t?void 0:t.length))&&(null==n?void 0:n[7])}(f),v=null===(t=n.querySelector("div.ecYoutubeBase"))||void 0===t?void 0:t.style,b=parseInt(v.width,10),m=parseInt(v.height,10);if(function(e){var t;if(null===e)return!1;var n=/^(?:https?:\/\/)?(?:m\.|www\.)?(?:youtu\.be\/|youtube\.com\/(?:embed\/|v\/|watch\?v=|watch\?.+&v=))((\w|-){11})(?:\S+)?$/;return!!e.match(n)&&(null===(t=null==e?void 0:e.match(n))||void 0===t?void 0:t[1])}(f)&&h)var g=setInterval((function(){window.YT&&window.YT.Player&&(clearInterval(g),new window.YT.Player(u,{height:m,width:b,playerVars:{controls:o?1:0,autoplay:r.video&&r.video.autoPlay?1:0,loop:r.video&&r.video.loop?1:0,enablejsapi:1},videoId:h,events:{onReady:function(e){e.target.setVolume(0),r.video&&r.video.autoPlay&&e.target.playVideo()},onStateChange:function(e){r.video&&r.video.loop&&0===e.data&&e.target.playVideo()},onError:function(e){}}}))}),300);else{var y=n.querySelector("div.ecYoutubeBase");y&&(y.innerHTML='<div style="background: rgb(9,30,66); width: 100%; height: 100%; position: relative; overflow: hidden;"><div style="width: 90%; padding: 0; position: absolute; left: 50%; top: 50%; transform: translate(-50%, -50%); display: flex; align-items: center; justify-content: center; font-size: 12px;"><img src="https://ptxpublicres.ptengine.jp/images/caution.svg" style="width: 2.8em; height: 2.8em; margin-right: 1em; color: rgb(255, 255, 255); opacity: 0.8;"/><p style="font-size: 12px; line-height: 20px; color: rgba(255, 255, 255, .8); margin: 0; text-align: left;">'.concat(s,"</p></div></div>"))}}},u=0;u<l.length;u++){var s=c(u);if("object"==typeof s)return s.value}}}(this.popupInstance.popupWrap),null===(e=this.popupInstance.popupContainer)||void 0===e||e.appendChild(this.popupInstance.popupWrap),i=this.popupInstance.popupWrap,Array.prototype.slice.call(i.querySelectorAll("script")).forEach((function(e){dn(e.innerHTML)})),this._bindActionStyle(),$e.on(T.PAGE_ON_CLICK,this._pageClickCallback),this._renderCodeMode(),this.popupInstance.popupCountDown.startCountDown(),this.popupInstance.popupCountDown.countDownWorker.setClosePopup(this.popupInstance.popup.popupId,(function(){try{r.sendClose(),r.popupInstance.unmounted()}catch(e){}})),this._setMaskStyle(),ln("add",this.popupInstance.widget.widgetSettings.position),this.popupInstance.popupForm.setFieldNameToAttribute(),this.popupInstance.popupWrap.style.display="block",0===this.popupInstance.widgetIndex&&(qn.__addPopupToRenderList(this.popupInstance.experience.engageId,this.popupInstance.popup.popupId,this.popupInstance),this.popupInstance.sendEngagePackage({type:"view",properties:{}}),this.popupInstance.updateCache("seenTimes"),sn("add",this.popupInstance.popup.popupId)),function(e){var t,n;ne(Ue)===O.PC&&(function(e,t){var n;null===(n=e.querySelector('[data-menu-action="insert.popup"]'))||void 0===n||n.setAttribute("tabindex",String(100*Number(e.getAttribute("focusindex"))));var i=[];e.querySelectorAll('[data-engage-block] , [data-menu-action="insert.button"], [data-menu-action="insert.close"] , a , link , button , input , select , textarea').forEach((function(e){var n=e,r=e.getAttribute("data-engage-block");r&&!Object.keys(t).some((function(e){return t[e]===r}))||(0===i.length?i.push({dom:n,position:F({},ei(n))}):i.some((function(e){var t;return null===(t=e.dom)||void 0===t?void 0:t.contains(n)}))||i.push({dom:n,position:F({},ei(n))}))})),e.querySelectorAll("[data-engage-action]").forEach((function(e){var t=e;i.push({dom:t,position:F({},ei(t))})})),i.sort((function(e,t){return e.position.top!==t.position.top?e.position.top-t.position.top:e.position.left-t.position.left})),i.forEach((function(t,n){t.dom.setAttribute("tabindex",String(100*Number(e.getAttribute("focusindex"))+n+1))}))}(e.popupWrap,on),t=Ue.document.querySelector("pt-experience"),n=Kn("shadow-root"),t&&n.length&&t.setAttribute("tabindex",String(Number(n[0].getAttribute("tabindex"))-1)),function(e){var t,n;q(null===(n=null===(t=e.popupWrap)||void 0===t?void 0:t.parentNode)||void 0===n?void 0:n.parentNode)?Qn("render","shadow-root"):Zn()}(e))}(this.popupInstance)))))}}),e}(),Ni=function(){function e(e){Object.defineProperty(this,"render",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"condition",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"validator",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"value",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.render=e,this.condition="",this.validator=null,this.value=null}return Object.defineProperty(e.prototype,"setCondition",{enumerable:!1,configurable:!0,writable:!0,value:function(e){this.condition=e}}),Object.defineProperty(e.prototype,"setValue",{enumerable:!1,configurable:!0,writable:!0,value:function(e){this.value=e}}),Object.defineProperty(e.prototype,"setValidator",{enumerable:!1,configurable:!0,writable:!0,value:function(e){this.validator=e}}),Object.defineProperty(e.prototype,"run",{enumerable:!1,configurable:!0,writable:!0,value:function(){var e,t;try{return null===(e=this.validator)||void 0===e?void 0:e.validate(this.render,this.value,this.condition)}catch(e){t=!1}return t}}),Object.defineProperty(e.prototype,"disable",{enumerable:!1,configurable:!0,writable:!0,value:function(){var e;try{return null===(e=this.validator)||void 0===e?void 0:e.disable()}catch(e){}}}),e}();function Ri(e){return new Ni(e)}var Mi=function(){function e(){Object.defineProperty(this,"enable",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.enable=!0}return Object.defineProperty(e.prototype,"getLocalInfo",{enumerable:!1,configurable:!0,writable:!0,value:function(e){var t=wn(e.experience,e.version,e.popup),n=e.experience.engageId+"--"+e.popup.popupId;return JSON.parse(gn(t,n)||"{}")}}),Object.defineProperty(e.prototype,"validate",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t,n){throw new Error("validate method should be implement by ",e,t,n)}}),Object.defineProperty(e.prototype,"trigger",{enumerable:!1,configurable:!0,writable:!0,value:function(e){this.enable&&e&&"function"==typeof e&&e()}}),Object.defineProperty(e.prototype,"disable",{enumerable:!1,configurable:!0,writable:!0,value:function(){this.enable=!1}}),e}(),Fi=function(e){function t(){var t=e.call(this)||this;return Object.defineProperty(t,"currentTerminalType",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),t.currentTerminalType=yn(Ue),t}return M(t,e),Object.defineProperty(t.prototype,"validate",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t,n){var i=!1,r=this.currentTerminalType===O.PC?function(t){t.clientY<12&&!pe(Ue)&&(!e||i||e.deleted||(i=!0,e.mounted()))}:function(t){"beforeunload"===t.state&&(!e||i||e.deleted||(i=!0,e.mounted()))};e.setLeaveHandler((function(){ue(Ue.document,"mousemove",r)})),"=="===n&&t&&(this.currentTerminalType===O.PC&&setTimeout((function(){!e.deleted&&ce(Ue.document,"mousemove",r)}),5e3),this.currentTerminalType!==O.SMARTPHONE&&this.currentTerminalType!==O.TABLET||pe(Ue)||(history.replaceState("beforeunload","",null),history.pushState("back","",null),ce(Ue,"popstate",r)))}}),t}(Mi),Bi=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return M(t,e),Object.defineProperty(t.prototype,"validate",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t,n){switch(n){case"==":setTimeout((function(){!e.deleted&&e.mounted()}),1e3*+t);break;case">=":setTimeout((function(){!e.deleted&&e.mounted()}),1e3*(+t+1))}}}),t}(Mi),Ui=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return M(t,e),Object.defineProperty(t.prototype,"validate",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t){var n=null,i=!1,r=function(){n&&(clearTimeout(n),n=null),n=setTimeout((function(){i||e.deleted||(i=!0,e.mounted())}),1e3*+t)};r(),ce(Ue.document,"scroll",r),ce(Ue.document,"click",r)}}),t}(Mi),Hi=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return M(t,e),Object.defineProperty(t.prototype,"validate",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t){var n=+t.replace("%",""),i=!1,r=function(){setTimeout((function(){var t=parseInt(Ue.document.body.scrollHeight.toString(),10),r=Ue.document.documentElement.scrollTop||Ue.pageYOffset;isNaN(r)&&(r=0);var o,a=(parseFloat(r.toString())+parseInt((void 0===o&&(o=window),(o.document.doctype?o.document.documentElement:o.document.body).clientHeight).toString(),10))/t*100;!(Math.abs(a-n)<=2||a>=n)||i||e.deleted||(i=!0,e.mounted())}),50)};ce(Ue.document,"scroll",r),e.setLeaveHandler((function(){ue(Ue.document,"scroll",r)}))}}),t}(Mi),$i=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return M(t,e),Object.defineProperty(t.prototype,"validate",{enumerable:!1,configurable:!0,writable:!0,value:function(e){var t=-1!==["POPUP","STICKY_BAR"].indexOf(e.experience.engageType)?e.experience.engageId:e.popup.popupId;$e.on("".concat(T.SHOW_POPUP,".").concat(t),(function(){e.mounted(!0)}))}}),t}(Mi),Vi=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return M(t,e),Object.defineProperty(t.prototype,"validate",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t,n){var i=this.getLocalInfo(e);">"===n&&(+i.seenTimes>=t?e.triggerGoNext=!1:e.triggerGoNext=!0)}}),t}(Mi),Wi=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return M(t,e),Object.defineProperty(t.prototype,"validate",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t){var n=this.getLocalInfo(e),i=!n.hasClosed||+n.hasClosed<+t;e.triggerGoNext=i}}),t}(Mi),Gi=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return M(t,e),Object.defineProperty(t.prototype,"validate",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t){var n=this.getLocalInfo(e);e.triggerGoNext=!n.session||!n.session[Ot()]||+n.session[Ot()].frequencySessionTimes<+t}}),t}(Mi),qi=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return M(t,e),Object.defineProperty(t.prototype,"validate",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t){!!this.getLocalInfo(e).formSubmitted===t?e.triggerGoNext=!1:e.triggerGoNext=!0}}),t}(Mi),zi=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return M(t,e),Object.defineProperty(t.prototype,"validate",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t,n){var i=this.getLocalInfo(e),r=null;switch(n){case"==":case"!=":r=!!i.hasClicked!==t}null!==r&&(e.triggerGoNext=r)}}),t}(Mi);function Yi(e){var t=Jt.get(e);if(!t){switch(e){case"UserBlur":t=new Fi;break;case"UserStay":t=new Bi;break;case"UserStop":t=new Ui;break;case"ScrollMatch":t=new Hi;break;case"ShownByJs":t=new $i;break;case"ClickButton":t=new zi;break;case"SeenTimes":t=new Vi;break;case"CloseTimes":t=new Wi;break;case"FormSubmitted":t=new qi;break;case"FrequencySessionTimes":t=new Gi}Jt.set(e,t)}return t}var Ji=function(){function e(e,t,n,i,r,o){var a=this;Object.defineProperty(this,"_leaveHandler",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"hasFrequencyTrigger",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"trigger",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"experience",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"version",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"terminal",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"popup",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"popupContainer",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"popupWrap",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"isPreview",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"createType",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"triggerGoNext",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"widget",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"renderType",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"widgetIndex",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"shownByJs",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"deleted",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"variant",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"popupRender",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"popupCountDown",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"popupForm",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"popupAction",{enumerable:!0,configurable:!0,writable:!0,value:void 0});var l=i.widgets.some((function(e){return Boolean(e.widgetNodes.commonStyle)}))?"shadowDom":"body";this.experience=e,this.version=t,this.terminal=n,this.popup=i,this.isPreview=r,this.createType=o,this.triggerGoNext=!0,this._leaveHandler=[],this.renderType=l,this.popupContainer=this._getEngageContainerWrapper(l,this.popup.popupId),this.popupWrap=this._createEngageWrap(this._getEngageWrapperId(this.popup.popupId)),this.hasFrequencyTrigger=-1!==["POPUP","STICKY_BAR"].indexOf(this.experience.engageType),this.trigger=this.hasFrequencyTrigger?this.experience.trigger:this.popup.trigger,this.widget=null,this.widgetIndex=0,this.deleted=!1,this.variant={formContent:"",fieldIDList:""},this.shownByJs=!1,this.popupRender=new Li(this),this.popupCountDown=new hi(this),this.popupForm=new _i(this),this.popupAction=new ji(this),this._init(),$e.on("".concat(T.CLEAR_POPUP,".").concat(i.popupId),(function(){a.unmounted()}))}return Object.defineProperty(e.prototype,"_init",{enumerable:!1,configurable:!0,writable:!0,value:function(){this._checkTrigger()||0!==(this.trigger.start||[]).length||this.mounted()}}),Object.defineProperty(e.prototype,"_createEngageWrap",{enumerable:!1,configurable:!0,writable:!0,value:function(e){var t=Ue.document.getElementById(e);if(!t){(t=Ue.document.createElement("div")).setAttribute("id",e);var n=[].slice.call(Ue.document.querySelectorAll('[id^="ptxEngage_')),i=[].slice.call(K('[id^="ptxEngage_'));"popup"===this.createType?t.setAttribute("focusindex",50-n.length-i.length+""):t.setAttribute("focusindex",100-n.length-i.length+"")}return t}}),Object.defineProperty(e.prototype,"_getEngageWrapperId",{enumerable:!1,configurable:!0,writable:!0,value:function(e){return"engage_"+e}}),Object.defineProperty(e.prototype,"_getEngageContainerWrapper",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t){var n=Ue.document.getElementById(Kt+"_"+t);return n||((n=Ue.document.createElement("div")).setAttribute("id",Kt+"_"+t),function(e,t){Y()&&"body"!==t?G(e):Ue.document.body.appendChild(e)}(n,e)),n}}),Object.defineProperty(e.prototype,"_checkTrigger",{enumerable:!1,configurable:!0,writable:!0,value:function(){var e=Boolean(this.experience.heatmapVersion),t=!1;return!this.experience.triggerFlag&&!this.isPreview||e||(t=this._checkTriggerItem(this.trigger,"stop")),t||(t=this._checkTriggerItem(this.trigger,"start")),t||(t=this._checkPopupFrequencyTrigger()),t}}),Object.defineProperty(e.prototype,"_checkPopupFrequencyTrigger",{enumerable:!1,configurable:!0,writable:!0,value:function(){var e;if(!this.hasFrequencyTrigger)return!1;if("session"===(this.experience.trigger.frequency||{}).type&&(null===(e=this.experience.trigger.frequency)||void 0===e?void 0:e.times)){var t=Ri(this);if(t.setValue(this.experience.trigger.frequency.times),t.setValidator(Yi("FrequencySessionTimes")),t.run(),!this.triggerGoNext)return!0}return!1}}),Object.defineProperty(e.prototype,"_checkTriggerItem",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t){for(var n=e[t],i=!1,r=0;r<n.length;r++){var o=n[r],a=Ri(this);if(a.setValue(o.value),a.setCondition(o.condition),a.setValidator(Yi(o.type)),a.run(),"stop"===t&&!this.triggerGoNext){i=!0;break}}return i}}),Object.defineProperty(e.prototype,"_removeMask",{enumerable:!1,configurable:!0,writable:!0,value:function(){var e,t;(null===(e=this.widget)||void 0===e?void 0:e.widgetSettings.showMask)&&un(null===(t=this.widget)||void 0===t?void 0:t.widgetId)}}),Object.defineProperty(e.prototype,"_popupIsControlGroup",{enumerable:!1,configurable:!0,writable:!0,value:function(){return this.popup.popupId===Xt}}),Object.defineProperty(e.prototype,"updateInstanceState",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t){this[e]=t}}),Object.defineProperty(e.prototype,"updateCache",{enumerable:!1,configurable:!0,writable:!0,value:function(e){pn(wn(this.experience,this.version,this.popup),e,this.experience.engageId+"--"+this.popup.popupId)}}),Object.defineProperty(e.prototype,"sendEngagePackage",{enumerable:!1,configurable:!0,writable:!0,value:function(e){var t=e.type,n=e.config,i=e.transport,r=e.properties,o=e.clickTarget;if(!this.isPreview){var a=F({creativeType:this.createType},r);this._popupIsControlGroup()||(a.creativeId=this.popup.popupId),Bn.engage({engageAction:t,engageId:this.experience.engageId,engageVersionId:this.version.versionId,properties:a,config:n,transport:i});var l={experienceType:this.experience.engageType,experienceId:this.experience.engageId,versionId:this.version.versionId,experienceName:this.experience.engageName,versionName:this.version.versionName,clickTarget:o};"submit"!==t&&Or.sendExperienceEventToGA(t,l)}}}),Object.defineProperty(e.prototype,"setLeaveHandler",{enumerable:!1,configurable:!0,writable:!0,value:function(e){var t,n;e&&-1!==(null===(t=this._leaveHandler)||void 0===t?void 0:t.indexOf(e))&&(null===(n=this._leaveHandler)||void 0===n||n.push(e))}}),Object.defineProperty(e.prototype,"submitCallback",{enumerable:!1,configurable:!0,writable:!0,value:function(){var e;this._removeMask(),this.isPreview||this.popupForm.sendSubmitPackage({formContent:null===(e=this.variant)||void 0===e?void 0:e.formContent,fieldIdList:this.variant.fieldIDList}),this.updateCache("formSubmitted")}}),Object.defineProperty(e.prototype,"mounted",{enumerable:!1,configurable:!0,writable:!0,value:function(e){if(void 0===e&&(e=!1),this._checkTriggerItem(this.trigger,"stop")||this._checkPopupFrequencyTrigger())this.unmounted();else{if(this._popupIsControlGroup())return this.sendEngagePackage({type:"view",transport:"beacon",properties:{creativeType:"controlGroup"}}),this.updateCache("seenTimes"),void this.unmounted();this.shownByJs=e,this.popupRender.render()}}}),Object.defineProperty(e.prototype,"unmounted",{enumerable:!1,configurable:!0,writable:!0,value:function(){var e;this.deleted=!0,null===(e=this._leaveHandler)||void 0===e||e.forEach((function(e){return e()})),this.popupRender.removeActionEffect(),this.popupRender.close(),ne(Ue)===O.PC&&setTimeout((function(){return Zn()}))}}),e}(),Xi=function(){function e(e,t){Object.defineProperty(this,"inline",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"action",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"applyStartTime",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"rollBack",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.inline=e,this.action=t,this.applyStartTime=Date.now(),this.rollBack=null}return Object.defineProperty(e.prototype,"apply",{enumerable:!1,configurable:!0,writable:!0,value:function(){var e=this,t=this.action.changeElementAction||{},n=t.action,i=t.selector,r=null==i?void 0:i.string;if(r){var o=J(r,Ue);if(o){if("BODY"===o.nodeName)return;this.rollBack=Ei(o,null==n?void 0:n.object,(function(e){Si(e,o,null==n?void 0:n.object)})),this._applyCallback()}else this.inline.delay(this.applyStartTime,(function(){return e.apply()}))}}}),Object.defineProperty(e.prototype,"_applyCallback",{enumerable:!1,configurable:!0,writable:!0,value:function(){this.inline.renderCallback()}}),Object.defineProperty(e.prototype,"mounted",{enumerable:!1,configurable:!0,writable:!0,value:function(){this.applyStartTime=Date.now(),this.apply()}}),Object.defineProperty(e.prototype,"unmounted",{enumerable:!1,configurable:!0,writable:!0,value:function(){var e;null===(e=this.rollBack)||void 0===e||e.call(this)}}),e}(),Ki=function(){function e(e,t){var n;Object.defineProperty(this,"inline",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"applyStartTime",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"timer",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"selector",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"attributeName",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"attributeValue",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"rollBack",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.inline=e,this.timer=null,this.applyStartTime=Date.now(),this.rollBack=null,this.selector=t.changeElementAttribute.selector.string,this.attributeName=t.changeElementAttribute.attribute.string,this.attributeValue=null===(n=t.changeElementAttribute.value)||void 0===n?void 0:n.string}return Object.defineProperty(e.prototype,"_setAttribute",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t,n){var i,r,o;if(!e)return null;var a=((i={})[t]=e.getAttribute(t),i),l=[];if(null===n?e.removeAttribute(t):e.setAttribute(t,n),"IMG"===e.tagName&&"src"===t&&(["srcset","data-src","data-original"].forEach((function(t){a[t]=e.getAttribute(t),e.removeAttribute(t)})),"picture"===(null===(o=null===(r=e.parentElement)||void 0===r?void 0:r.tagName)||void 0===o?void 0:o.toLowerCase())))for(var c=e.parentElement.firstChild;c;)if(1===c.nodeType&&"source"===c.tagName.toLowerCase()){var u=c,s=c.nextSibling;l.push(u),e.parentElement.removeChild(u),c=s}else c=c.nextSibling;return function(){Object.keys(a).forEach((function(t){var n=a[t];n&&e.setAttribute(t,n)})),l.forEach((function(t){var n;null===(n=e.parentElement)||void 0===n||n.appendChild(t)}))}}}),Object.defineProperty(e.prototype,"_observeAttribute",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t,n){var i,r,o=J(e,Ue);return!!o&&!!(null===n&&(null===(i=o.hasAttribute)||void 0===i?void 0:i.call(o,t))||(null===(r=o.getAttribute)||void 0===r?void 0:r.call(o,t))!==n)&&(this.rollBack=this._setAttribute(o,t,n),!0)}}),Object.defineProperty(e.prototype,"_applyCallback",{enumerable:!1,configurable:!0,writable:!0,value:function(){this.inline.renderCallback()}}),Object.defineProperty(e.prototype,"apply",{enumerable:!1,configurable:!0,writable:!0,value:function(){var e,t,n=this;if(this.selector&&void 0!==(null===(t=null===(e=null==Ue?void 0:Ue.document)||void 0===e?void 0:e.documentElement)||void 0===t?void 0:t.setAttribute)){var i=J(this.selector,Ue);if(i){if("BODY"===i.nodeName)return;this.rollBack=this._setAttribute(i,this.attributeName,this.attributeValue),this._applyCallback(),Qi.addObserve(this.selector,"ATTRIBUTE_"+this.attributeName,[i],(function(){return n._observeAttribute(n.selector,n.attributeName,n.attributeValue)}))}else this.inline.delay(this.applyStartTime,(function(){return n.apply()}))}}}),Object.defineProperty(e.prototype,"mounted",{enumerable:!1,configurable:!0,writable:!0,value:function(){this.applyStartTime=Date.now(),this.apply()}}),Object.defineProperty(e.prototype,"unmounted",{enumerable:!1,configurable:!0,writable:!0,value:function(){var e;this.timer&&clearInterval(this.timer),null===(e=this.rollBack)||void 0===e||e.call(this),Qi.deleteObserve(this.selector,"ATTRIBUTE_"+this.attributeName)}}),e}(),Qi=new(function(){function e(){var e=this;Object.defineProperty(this,"mutationsList",{enumerable:!0,configurable:!0,writable:!0,value:[]}),$e.on(T.ROUTER_CHANGE,(function(){e.clearObserveList()}))}return Object.defineProperty(e.prototype,"getMutationIndex",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t){return this.mutationsList.findIndex((function(n){return n.selector===e&&n.changeType===t}))}}),Object.defineProperty(e.prototype,"clearObserveList",{enumerable:!1,configurable:!0,writable:!0,value:function(){var e=this;this.mutationsList.forEach((function(t){e.stopObserve(t)})),this.mutationsList=[]}}),Object.defineProperty(e.prototype,"startObserve",{enumerable:!1,configurable:!0,writable:!0,value:function(e){var t=this;"function"==typeof e.observerFn&&(e.changeCount=0,e.changeTime=0,e.changeTimer=setInterval((function(){e.changeCount++,e.changeTime>=3||e.changeCount>=1e3?t.stopObserve(e):e.observerFn()&&e.changeTime++}),200))}}),Object.defineProperty(e.prototype,"stopObserve",{enumerable:!1,configurable:!0,writable:!0,value:function(e){var t=e.changeTimer;t&&clearTimeout(t)}}),Object.defineProperty(e.prototype,"addObserve",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t,n,i){if(!i)return null;var r=this.getMutationIndex(e,t);-1!==r&&this.stopObserve(this.mutationsList[r]);var o={changeCount:0,changeTime:0,changeTimer:null,changeType:t,selector:e,observerFn:i,resultElement:n};return this.startObserve(o),this.mutationsList.push(o),o}}),Object.defineProperty(e.prototype,"updateObserve",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t,n,i){var r=this.getObserve(e,t);r&&n in r&&(r[n]=i)}}),Object.defineProperty(e.prototype,"deleteObserve",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t){var n=this.getMutationIndex(e,t);-1!==n&&(this.stopObserve(this.mutationsList[n]),this.mutationsList.splice(n,1))}}),Object.defineProperty(e.prototype,"getObserve",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t){var n=this.getMutationIndex(e,t);if(-1!==n)return this.mutationsList[n]}}),e}()),Zi={REPLACE:0,INSERT:1,APPEND:2,BEFORE:3,AFTER:4};var er=function(){function e(e,t){Object.defineProperty(this,"inline",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"content",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"modeTag",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"applyStartTime",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"selector",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"html",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"rollBack",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.inline=e,this.content=t,this.rollBack=null,this.applyStartTime=Date.now(),this.html=t.elementContent.html.string,this.selector=t.elementContent.selector.string,this.modeTag=Object.keys(Zi).find((function(e){return Zi[e]===t.elementContent.mode}))||"REPLACE"}return Object.defineProperty(e.prototype,"_applyContentChange",{enumerable:!1,configurable:!0,writable:!0,value:function(e){if(e){var t=e.nextSibling,n=function(e,t,n){var i;if(e){var r=null,o=null,a=e.ownerDocument||Ue.document;switch(n){case Zi.AFTER:r=e.parentNode,o=e.nextSibling;break;case Zi.INSERT:r=e,o=e.firstChild;break;case Zi.APPEND:r=e,o=null;break;case Zi.BEFORE:case Zi.REPLACE:r=e.parentNode,o=e}if(r){var l=function(e,t){var n=0,i="",r="",o=an[t.tagName];o&&(n=o[0],i=o[1],r=o[2]);var a=t.ownerDocument.createElement("div");a.innerHTML=i+(e||"")+r;for(var l=a;0<n;){var c=null==l?void 0:l.firstChild;if(null===(null==c?void 0:c.firstChild))return t.ownerDocument.createElement("div");l=c,n--}return l}(t,r);Me(l,"SCRIPT"),Me(l,"NOSCRIPT");var c=[];if(l.firstChild)for(var u=l.firstChild;u;){var s=u.nextSibling;null===(i=null==u?void 0:u.setAttribute)||void 0===i||i.call(u,nn,""),c.push(u),r.insertBefore(u,o),u=s}return n===Zi.REPLACE&&r.removeChild(e),{elementOwnerDocument:a,parentNode:r,insertedNodes:c}}}}(e,this.html,this.content.elementContent.mode)||{},i=n.parentNode,r=n.insertedNodes,o=n.elementOwnerDocument;if(!i||!r||!o)return[];this._applyCallback();var a=this;return this.rollBack=function(){var n,l;try{var c=r.pop();c&&c.remove()}catch(c){}"REPLACE"===a.modeTag&&e&&!(null===(n=e.hasAttribute)||void 0===n?void 0:n.call(e,nn))&&!o.contains(e)&&o.contains(i)&&(t?(null==i?void 0:i.contains(t))&&i.insertBefore(e,t):null===(l=null==i?void 0:i.appendChild)||void 0===l||l.call(i,e))},r}}}),Object.defineProperty(e.prototype,"_selector",{enumerable:!1,configurable:!0,writable:!0,value:function(e){return e&&J(e,Ue)}}),Object.defineProperty(e.prototype,"_applyCallback",{enumerable:!1,configurable:!0,writable:!0,value:function(){this.inline.renderCallback()}}),Object.defineProperty(e.prototype,"_observeContentChange",{enumerable:!1,configurable:!0,writable:!0,value:function(e){var t=this._selector(e);if(!t)return!1;var n=(Qi.getObserve(e,this.modeTag)||{}).resultElement;if(!n||0===n.length||n.some((function(e){return!document.contains(e)}))){var i=this._applyContentChange(t);return Qi.updateObserve(e,this.modeTag,"resultElement",i),Boolean(i&&i.length>0)}return!1}}),Object.defineProperty(e.prototype,"apply",{enumerable:!1,configurable:!0,writable:!0,value:function(){var e=this,t=this._selector(this.selector);if(t){if("BODY"===t.nodeName)return;"BEFORE"!==this.modeTag&&"INSERT"!==this.modeTag&&"REPLACE"!==this.modeTag||Qi.getObserve(this.selector,"TEXT")&&Qi.deleteObserve(this.selector,"TEXT"),this._applyContentChange(t)}else this.inline.delay(this.applyStartTime,(function(){return e.apply()}))}}),Object.defineProperty(e.prototype,"mounted",{enumerable:!1,configurable:!0,writable:!0,value:function(){this.applyStartTime=Date.now(),this.apply()}}),Object.defineProperty(e.prototype,"unmounted",{enumerable:!1,configurable:!0,writable:!0,value:function(){var e;null===(e=this.rollBack)||void 0===e||e.call(this),Qi.deleteObserve(this.content.elementContent.selector.string,this.modeTag)}}),e}(),tr=function(){function e(e,t){Object.defineProperty(this,"inline",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"style",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"applyStartTime",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"documentFirstCSSStyleSheet",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"rollBack",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.inline=e,this.style=t,this.documentFirstCSSStyleSheet=null,this.applyStartTime=Date.now(),this.rollBack=null}return Object.defineProperty(e.prototype,"_applySelectorDomToStyleSheet",{enumerable:!1,configurable:!0,writable:!0,value:function(e){var t=this,n=e.cssRule,i=e.selectorDom,r=e.selectorString,o=e.propertyString,a=e.valueString,l=e.importantString,c=e.cssConditionalString;i?(this.rollBack=n?this._addStyleSheet(r,o,a,l,c):this._setStyleProperty(i,o,a,l),this._applyCallback()):this.inline.delay(this.applyStartTime,(function(){return t.apply()}))}}),Object.defineProperty(e.prototype,"apply",{enumerable:!1,configurable:!0,writable:!0,value:function(){var e=this,t=this.style.elementStyle,n=t.property,i=t.value,r=t.selector,o=t.cssRule,a=t.important,l=t.cssConditional,c=n&&n.string,u=i&&i.string,s=a&&a.boolean,p=r&&r.string,d=l&&l.string;if(p)if(null==Ue?void 0:Ue.document){var f=J(p,Ue);o?this.style.version?this._applySelectorDomToStyleSheet({cssRule:o,selectorDom:f,selectorString:p,propertyString:c,valueString:u,importantString:s,cssConditionalString:d}):(this.rollBack=this._addStyleSheet(p,c,u,s,d),this._applyCallback()):this._applySelectorDomToStyleSheet({cssRule:o,selectorDom:f,selectorString:p,propertyString:c,valueString:u,importantString:s,cssConditionalString:d})}else this.inline.delay(this.applyStartTime,(function(){return e.apply()}))}}),Object.defineProperty(e.prototype,"_getFirstCSSStyleSheet",{enumerable:!1,configurable:!0,writable:!0,value:function(e){if(this.documentFirstCSSStyleSheet)return this.documentFirstCSSStyleSheet;for(var t=e.styleSheets.length-1;t>=0;t--){var n=e.styleSheets[t];if(!n.href){var i=n.ownerNode;if(i&&i.parentNode&&"HEAD"===i.parentNode.tagName)return this.documentFirstCSSStyleSheet=n}}return 0===e.styleSheets.length&&e.createStyleSheet(),this.documentFirstCSSStyleSheet=e.styleSheets[0]}}),Object.defineProperty(e.prototype,"_getNewStyleSheet",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t){var n=(t||Ue.document).createElement("style");return void 0!==n.cssText?n.cssText=e:n.innerHTML=e,n}}),Object.defineProperty(e.prototype,"_addStyleSheetToHead",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t){var n,i=t||Ue.document,r=i.getElementsByTagName("head")[0];r||(r=i.createElement("head"),null===(n=i.body.parentNode)||void 0===n||n.insertBefore(r,i.body)),r.appendChild(e)}}),Object.defineProperty(e.prototype,"_addStyleSheet",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t,n,i,r){var o,a=e+"{"+t+": "+n+(i?" !important":"")+"}";if(r&&(a=r+"{"+a+"}"),null===(o=null==Ue?void 0:Ue.document)||void 0===o?void 0:o.createStyleSheet){var l=this._getFirstCSSStyleSheet(Ue.document),c=l.rules.length;return l.insertRule(a,c),function(){l.deleteRule?l.deleteRule(c):l.removeRule(c),l.insertRule("x {}",c)}}var u=this._getNewStyleSheet(a,Ue.document);this._addStyleSheetToHead(u,Ue.document);var s=u.parentNode;return function(){try{null==s||s.removeChild(u)}catch(e){}}}}),Object.defineProperty(e.prototype,"_setStyleProperty",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t,n,i){if(e.style.setProperty)try{var r=e.style.getPropertyValue(t),o=e.style.getPropertyPriority(t);return e.style.setProperty(t,n,i?"important":""),function(){e.style.setProperty(t,"",o),e.style.setProperty(t,r,o)}}catch(e){}var a=e.style.cssText;return e.style.cssText+=";"+t+": "+n+(i?" !important":"")+";",function(){e.style.cssText=a}}}),Object.defineProperty(e.prototype,"_applyCallback",{enumerable:!1,configurable:!0,writable:!0,value:function(){this.inline.renderCallback()}}),Object.defineProperty(e.prototype,"mounted",{enumerable:!1,configurable:!0,writable:!0,value:function(){this.applyStartTime=Date.now(),this.apply()}}),Object.defineProperty(e.prototype,"unmounted",{enumerable:!1,configurable:!0,writable:!0,value:function(){var e;null===(e=this.rollBack)||void 0===e||e.call(this)}}),e}(),nr=function(){function e(e,t){Object.defineProperty(this,"inline",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"textChange",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"applyStartTime",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"rollBack",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"selector",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"replaceHTML",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.inline=e,this.textChange=t,this.applyStartTime=Date.now(),this.rollBack=null,this.selector=t.elementContent.selector.string,this.replaceHTML=this._getTextChangeHTML(this.textChange.elementContent.html.string)}return Object.defineProperty(e.prototype,"_selector",{enumerable:!1,configurable:!0,writable:!0,value:function(e){return e?J(e,Ue):null}}),Object.defineProperty(e.prototype,"_applyCallback",{enumerable:!1,configurable:!0,writable:!0,value:function(e){this.inline.renderCallback()}}),Object.defineProperty(e.prototype,"_getTextChangeHTML",{enumerable:!1,configurable:!0,writable:!0,value:function(e){var t=document.createElement("div");return t.innerHTML=e,1===t.childNodes.length&&t.firstChild?t.firstChild.innerHTML:t.innerHTML}}),Object.defineProperty(e.prototype,"_applyTextChange",{enumerable:!1,configurable:!0,writable:!0,value:function(){var e=this._selector(this.selector);if(!e)return!1;var t=e.innerHTML;return e.innerHTML=this.replaceHTML,this._applyCallback(e),this.rollBack=function(){try{e&&document.contains(e)&&(e.innerHTML=t)}catch(e){}},!0}}),Object.defineProperty(e.prototype,"_observeTextChange",{enumerable:!1,configurable:!0,writable:!0,value:function(){var e=this._selector(this.selector);return!(!e||e.innerHTML===this.replaceHTML)&&this._applyTextChange()}}),Object.defineProperty(e.prototype,"apply",{enumerable:!1,configurable:!0,writable:!0,value:function(){var e=this,t=this._selector(this.selector);t?(this._applyTextChange(),Qi.addObserve(this.selector,"TEXT",[t],(function(){return e._observeTextChange()}))):this.inline.delay(this.applyStartTime,(function(){return e.apply()}))}}),Object.defineProperty(e.prototype,"mounted",{enumerable:!1,configurable:!0,writable:!0,value:function(){this.applyStartTime=Date.now(),this.apply()}}),Object.defineProperty(e.prototype,"unmounted",{enumerable:!1,configurable:!0,writable:!0,value:function(){var e;null===(e=this.rollBack)||void 0===e||e.call(this)}}),e}(),ir=function(){function e(e,t){Object.defineProperty(this,"inline",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"text",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"applyStartTime",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"timer",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"rollBack",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.inline=e,this.text=t,this.timer=null,this.applyStartTime=Date.now(),this.rollBack=null}return Object.defineProperty(e.prototype,"apply",{enumerable:!1,configurable:!0,writable:!0,value:function(){var e=this,t=this.text.elementText,n=t.selector,i=t.text,r=t.childIndex,o=this._selector(n.string);if(o){if("BODY"===o.nodeName)return;if(r.integer>=0&&r.integer<o.childNodes.length){var a=o.childNodes[r.integer];if(null!==a&&a.nodeType===Node.TEXT_NODE){var l=a.nodeValue;a.nodeValue=i.string,this._applyCallback(),this.rollBack=function(){try{a&&document.contains(a)&&(a.nodeValue=l)}catch(e){}}}}}else this.inline.delay(this.applyStartTime,(function(){return e.apply()}))}}),Object.defineProperty(e.prototype,"_observeText",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t,n){var i=this,r=0,o=0;this.timer=setInterval((function(){if(r++,o>=3)return i.timer&&clearInterval(i.timer),void i.inline.isPreview;if(r>=1e3)i.timer&&clearInterval(i.timer);else{var a=i._selector(e);if(a){var l=a.childNodes[n],c=l.nodeValue;c!==t&&(l.nodeValue=t,o++,i.rollBack=function(){try{l&&document.contains(l)&&(l.nodeValue=c)}catch(e){}})}}}),200)}}),Object.defineProperty(e.prototype,"_selector",{enumerable:!1,configurable:!0,writable:!0,value:function(e){return e&&J(e,Ue)}}),Object.defineProperty(e.prototype,"_applyCallback",{enumerable:!1,configurable:!0,writable:!0,value:function(){this.inline.renderCallback()}}),Object.defineProperty(e.prototype,"mounted",{enumerable:!1,configurable:!0,writable:!0,value:function(){this.applyStartTime=Date.now(),this.apply()}}),Object.defineProperty(e.prototype,"unmounted",{enumerable:!1,configurable:!0,writable:!0,value:function(){var e;this.timer&&clearInterval(this.timer),null===(e=this.rollBack)||void 0===e||e.call(this)}}),e}(),rr=function(){function e(e,t,n,i){var r,o=this;Object.defineProperty(this,"experience",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"hasPageJumped",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"hasSendInlineView",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"inlineList",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"inlineRender",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"terminal",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"version",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"isPreview",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.experience=e,this.isPreview=i,this.terminal=n,this.version=t,this.inlineList=this._actionFilter((null===(r=this.terminal)||void 0===r?void 0:r.inline)||[]),this.inlineRender=[],this.hasSendInlineView=!1,this.hasPageJumped=!1,this._init(),$e.on(T.ROUTER_CHANGE,(function(){o.hasPageJumped=!0}))}return Object.defineProperty(e.prototype,"_init",{enumerable:!1,configurable:!0,writable:!0,value:function(){var e=this;this._unique().forEach((function(t){e._mounted(t)}))}}),Object.defineProperty(e.prototype,"_unique",{enumerable:!1,configurable:!0,writable:!0,value:function(){var e=this;return(this.inlineList||[]).reduce((function(t,n){return t.reduce((function(t,i,r){return e._isEqual(n,i)&&t.push(r),t}),[]).forEach((function(e){t.splice(e,1)})),t.push(n),t}),[])}}),Object.defineProperty(e.prototype,"_isEqual",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t){return"changeElementAction"in e?function(e,t){return"changeElementAction"in e&&"changeElementAction"in t&&e.changeElementAction.selector.string===t.changeElementAction.selector.string}(e,t):"changeElementAttribute"in e?function(e,t){return"changeElementAttribute"in e&&"changeElementAttribute"in t&&e.changeElementAttribute.selector.string===t.changeElementAttribute.selector.string&&e.changeElementAttribute.attribute.string===t.changeElementAttribute.attribute.string}(e,t):"elementContent"in e?e.elementContent.isTextChange?function(e,t){return"elementContent"in e&&"elementContent"in t&&!(!e.elementContent.isTextChange||!t.elementContent.isTextChange)&&e.elementContent.selector.string===t.elementContent.selector.string}(e,t):function(e,t){return"elementContent"in e&&"elementContent"in t&&e.elementContent.selector.string===t.elementContent.selector.string&&e.elementContent.isTextChange===t.elementContent.isTextChange&&e.elementContent.mode===Zi.REPLACE&&t.elementContent.mode===Zi.REPLACE}(e,t):"elementText"in e&&function(e,t){return"elementText"in e&&"elementText"in t&&e.elementText.selector.string===t.elementText.selector.string&&e.elementText.mode===t.elementText.mode}(e,t)}}),Object.defineProperty(e.prototype,"_actionFilter",{enumerable:!1,configurable:!0,writable:!0,value:function(e){return(e||[]).reduce((function(e,t){var n=t;return n&&(e=e.filter((function(e){var t,i=e.changeElementAttribute||{},r=i.selector,o=i.attribute;return(null==r?void 0:r.string)!==(null===(t=null==n?void 0:n.selector)||void 0===t?void 0:t.string)||"href"!==(null==o?void 0:o.string)}))),e.push(t),e}),[])}}),Object.defineProperty(e.prototype,"_mounted",{enumerable:!1,configurable:!0,writable:!0,value:function(e){var t;(null==e?void 0:e.changeElementAction)&&(t=new Xi(this,e)),e.elementStyle&&(t=new tr(this,e)),e.changeElementAttribute&&(t=new Ki(this,e)),e.elementContent&&(t=e.elementContent.isTextChange?new nr(this,e):new er(this,e)),e.elementText&&(t=new ir(this,e)),t&&(null==t||t.mounted(),this.inlineRender.push(t))}}),Object.defineProperty(e.prototype,"delay",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t,n){void 0===n&&(n=200),this.hasPageJumped||Date.now()-e>12e4||setTimeout((function(){t()}),n)}}),Object.defineProperty(e.prototype,"renderCallback",{enumerable:!1,configurable:!0,writable:!0,value:function(){this.hasSendInlineView||this.isPreview||(this.hasSendInlineView=!0,Bn.engage({engageId:this.experience.engageId,engageVersionId:this.version.versionId,engageAction:"view",properties:{creativeId:"",creativeType:"inline"}}),Or.sendExperienceEventToGA("view",{experienceType:this.experience.engageType,experienceId:this.experience.engageId,versionId:this.version.versionId,experienceName:this.experience.engageName,versionName:this.version.versionName}))}}),Object.defineProperty(e.prototype,"unmounted",{enumerable:!1,configurable:!0,writable:!0,value:function(){this.inlineRender.forEach((function(e){return e.unmounted()}))}}),e}(),or=function(){function e(e,t,n,i){var r=this;Object.defineProperty(this,"isPreview",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"experience",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"version",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"terminal",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"isSendVersionEvent",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"renderEngage",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.isPreview=e,this.experience=t,this.version=n,this.terminal=i,this.isSendVersionEvent=!1,this.renderEngage=[],$e.on("".concat(T.CLEAR_EXPERIENCE,".").concat(t.engageId),(function(){r._handleClearExperience()}))}return Object.defineProperty(e.prototype,"_renderExperience",{enumerable:!1,configurable:!0,writable:!0,value:function(){var e,t=this.terminal||{},n=t.popup,i=t.stickybar,r=t.inline,o=t.code;n&&this._renderPopup("popup",n),i&&this._renderPopup("stickyBar",i),o&&this._renderCode(o,null===(e=this.experience)||void 0===e?void 0:e.productSocialProof),r&&this._renderInline()}}),Object.defineProperty(e.prototype,"_renderPopup",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t){var n=this;void 0===t&&(t=[]),t.forEach((function(t){var i=new Ji(n.experience,n.version,n.terminal,t,n.isPreview,e);n.renderEngage.push(i)}))}}),Object.defineProperty(e.prototype,"_renderCode",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t){var n=this;void 0===t&&(t="");var i=new Jn(e,t,(function(){n._sendViewPackage("code"),n._updateLocalCache("seenTimes")}));this.renderEngage.push(i)}}),Object.defineProperty(e.prototype,"_renderInline",{enumerable:!1,configurable:!0,writable:!0,value:function(){var e=new rr(this.experience,this.version,this.terminal,this.isPreview);this.renderEngage.push(e),Qe("inlineRender",this.isPreview)}}),Object.defineProperty(e.prototype,"_bodyReady",{enumerable:!1,configurable:!0,writable:!0,value:function(){var e=this;Ue.document.body?this._renderExperience():ce(Ue,"DOMContentLoaded",(function(){e._renderExperience()}))}}),Object.defineProperty(e.prototype,"_sendViewPackage",{enumerable:!1,configurable:!0,writable:!0,value:function(e){this.isPreview||(Bn.engage({engageId:this.experience.engageId,engageVersionId:this.version.versionId,engageAction:"view",properties:{creativeId:"",creativeType:e}}),Or.sendExperienceEventToGA("view",{experienceType:this.experience.engageType,experienceId:this.experience.engageId,versionId:this.version.versionId,experienceName:this.experience.engageName,versionName:this.version.versionName}))}}),Object.defineProperty(e.prototype,"_updateLocalCache",{enumerable:!1,configurable:!0,writable:!0,value:function(e){pn(this.version.versionId,e)}}),Object.defineProperty(e.prototype,"_controlGroup",{enumerable:!1,configurable:!0,writable:!0,value:function(){if(Qe("controlGroup"),-1!==["POPUP","STICKY_BAR"].indexOf(this.experience.engageType))return this.terminal={popup:[{popupId:Xt,popupHasError:!1,popupHasForm:!1,popupName:"CONTROL_GROUP",widgets:[]}]},void this._bodyReady();this._sendViewPackage("controlGroup"),this._updateLocalCache("seenTimes")}}),Object.defineProperty(e.prototype,"_handleRenderCallback",{enumerable:!1,configurable:!0,writable:!0,value:function(){cn(this.version.versionId)}}),Object.defineProperty(e.prototype,"_handleClearExperience",{enumerable:!1,configurable:!0,writable:!0,value:function(){this.renderEngage.length>0&&(this.renderEngage.forEach((function(e){var t;null===(t=null==e?void 0:e.unmounted)||void 0===t||t.call(e)})),this.renderEngage=[])}}),Object.defineProperty(e.prototype,"mounted",{enumerable:!1,configurable:!0,writable:!0,value:function(){var e;if(this.version){if(this.version.controlGroup)return this._controlGroup(),void this._handleRenderCallback();var t=!Hn()&&(null===(e=this.terminal)||void 0===e?void 0:e.redirect)&&function(e){var t="";if(e){var n=e.condition,i=e.toValue;"=="===n&&i&&(t=i.indexOf(Ue.location.hostname)<0?Mt(i):i)}return t}(this.terminal.redirect);if(t)En(t);else{if(!this.terminal&&!Ue.PT_ENGAGE_IN_DEBUG)return this.unmounted(),void this._handleRenderCallback();this._bodyReady(),this._handleRenderCallback()}}}}),Object.defineProperty(e.prototype,"unmounted",{enumerable:!1,configurable:!0,writable:!0,value:function(){this._handleClearExperience()}}),e}(),ar=function(){function e(){var e=this;Object.defineProperty(this,"isPreview",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"renderList",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.isPreview=!1,this.renderList=[],$e.on(T.ROUTER_CHANGE,(function(){e.clearRenderList(),cn()}))}return Object.defineProperty(e.prototype,"clearRenderList",{enumerable:!1,configurable:!0,writable:!0,value:function(){this.renderList.forEach((function(e){return e.unmounted()})),this.renderList=[]}}),Object.defineProperty(e.prototype,"setPreviewFlag",{enumerable:!1,configurable:!0,writable:!0,value:function(e){this.isPreview=e}}),Object.defineProperty(e.prototype,"render",{enumerable:!1,configurable:!0,writable:!0,value:function(e){var t=this;if((this.isPreview||!Be.isExcess)&&(e.forEach((function(e){var n,i,r=e.matchedUrl,o=e.versions;if(!r||r===Ve.page){var a=o[0],l=(null===(n=null==a?void 0:a.terminals)||void 0===n?void 0:n.find((function(e){return e.type===yn(Ue)})))||(null===(i=null==a?void 0:a.terminals)||void 0===i?void 0:i[0]);if((!t.isPreview||0!==(null==l?void 0:l.terminalStatus)&&0!==(null==l?void 0:l.status))&&(c=a.versionId,-1===(Jt.get(Zt)||[]).indexOf(c))){var c,u=new or(t.isPreview,e,a,l);u.mounted(),t.renderList.push(u)}}})),!this.isPreview)){var n=e.filter((function(e){return 1===e.enableABTest&&e.versions.length>0})).map((function(e){return e.versions[0].versionId}));On(Be.sid,n)}}}),e}(),lr=new ar,cr=function(){function e(){var t=this;Object.defineProperty(this,"bodyMutationObserver",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"batchSendList",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"selectorList",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"observedDomsList",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_batchSendImpression",{enumerable:!0,configurable:!0,writable:!0,value:D((function(){var e;(null===(e=t.batchSendList)||void 0===e?void 0:e.length)&&(t.sendImpressions(t.batchSendList),t.batchSendList=[])}),e.DEBOUNCE_SECONDS)}),this.bodyMutationObserver=null,this.batchSendList=[],this.selectorList=[],this.observedDomsList=[]}return Object.defineProperty(e.prototype,"_createObserve",{enumerable:!1,configurable:!0,writable:!0,value:function(e){var t=this;if(e&&window.IntersectionObserver&&!this.observedDomsList.some((function(t){return t.element===e}))){var n=new IntersectionObserver((function(e,n){return t._handleIntersect(e,n)}),{root:null,rootMargin:"0px",threshold:.8});n.observe(e),this.observedDomsList.push({element:e,hasImpression:!1,observeInstance:n})}}}),Object.defineProperty(e.prototype,"_handleIntersect",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t){var n=this;e.forEach((function(e){if(e.target&&e.isIntersecting){var t=n.observedDomsList.find((function(t){return t.element===e.target}));if(!(t&&t.hasImpression||n.batchSendList.find((function(e){return e.node===(null==t?void 0:t.element)})))){var i=n._judgeElementIsHidden(e.target);if(i){if(window.requestAnimationFrame&&"function"==typeof window.requestAnimationFrame&&t){t.isHidden=!0,t.hiddenElement=i;var r=n.observedDomsList.find((function(e){return e.hiddenElement===i}));t.pollingId=(null==r?void 0:r.pollingId)||n._pollingElementVisible(t)}}else n.batchSendList.push({node:e.target,observeItemInfo:t}),n._batchSendImpression()}}}))}}),Object.defineProperty(e.prototype,"sendImpressions",{enumerable:!1,configurable:!0,writable:!0,value:function(t){var n=this,i=[];for(t.forEach((function(e){var t=e.node,r=e._type,o=e.height,a=e.top,l=n._getSelectorWithElementType(t),c=l.selector,u=l.interactionType;c&&("block"===r?i.push({selector:c,_type:r,height:o,top:a}):i.push({selector:c,elt:u,float:Re(t)?1:void 0}),e.observeItemInfo&&(e.observeItemInfo.hasImpression=!0))}));i.length>0;)Bn.impression(i.splice(0,e.MAX_SEND_SELECTORS_LENGTH))}}),Object.defineProperty(e.prototype,"_judgeElementIsHidden",{enumerable:!1,configurable:!0,writable:!0,value:function(e){if(!e)return e;if(q(e))return this._judgeElementIsHidden(z(e));var t=window.getComputedStyle&&window.getComputedStyle(e);return!t||"hidden"!==t.visibility&&"0"!==t.opacity?(e=e.parentNode)!==Ue.document.body?this._judgeElementIsHidden(e):null:e}}),Object.defineProperty(e.prototype,"_pollingElementVisible",{enumerable:!1,configurable:!0,writable:!0,value:function(e){var t=this;if(!e)return null;var n=function(){var i=t.observedDomsList.filter((function(t){return!t.hasImpression&&t.hiddenElement===e.hiddenElement}));i.length&&i.forEach((function(e){t._judgeElementIsHidden(e.element)||e.hasImpression||t.batchSendList.find((function(t){return t.node===e.element}))||(t.batchSendList.push({node:e.element,observeItemInfo:e}),t._batchSendImpression())})),window.requestAnimationFrame(n)};return window.requestAnimationFrame(n)}}),Object.defineProperty(e.prototype,"_getSelectorWithElementType",{enumerable:!1,configurable:!0,writable:!0,value:function(e){var t="";try{t=Ae(e)}catch(e){}if(!t)return{};var n=De(e,Ci(e)),i=n.elementType;return{interactionType:n.interactionType,selector:i+k(t,!1).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/\./g,"%2E")}}}),Object.defineProperty(e.prototype,"getElementImpressionInfo",{enumerable:!1,configurable:!0,writable:!0,value:function(e){var t,n,i,r=this,o="",a=null;i=null===(t=r.observedDomsList)||void 0===t?void 0:t.find((function(t){return Le(e,t.element)}));for(var l=0;l<(null===(n=r.selectorList)||void 0===n?void 0:n.length);l++){var c=r.selectorList[l];if(a=Ne(e,c,Ue))break}return(i&&!i.hasImpression||!i&&a)&&(o=r._getSelectorWithElementType(i?i.element:a).selector),{visualEventElementSelector:o,isVisualEventElement:a}}}),Object.defineProperty(e.prototype,"clearObserveList",{enumerable:!1,configurable:!0,writable:!0,value:function(){var e=this;e.observedDomsList.length&&e.observedDomsList.forEach((function(e){var t;null===(t=e.observeInstance)||void 0===t||t.disconnect(),e.observeInstance=null,e.pollingId&&window.cancelAnimationFrame&&"function"==typeof window.cancelAnimationFrame&&window.cancelAnimationFrame(e.pollingId),e.pollingId=null})),e.observedDomsList=[]}}),Object.defineProperty(e.prototype,"init",{enumerable:!1,configurable:!0,writable:!0,value:function(){var e,t=this;t.selectorList.length&&window.MutationObserver&&(t.clearObserveList(),t.selectorList.forEach((function(e){var n=X(e,Ue);n&&n.length&&n.forEach((function(e){e&&t._createObserve(e)}))})),null===(e=this.bodyMutationObserver)||void 0===e||e.disconnect(),this.bodyMutationObserver=new MutationObserver((function(e){e[0]&&e[0].type&&"childList"===e[0].type&&e[0].addedNodes&&e[0].addedNodes.length&&t.selectorList.forEach((function(e,n){X(e,Ue).forEach((function(e){t.observedDomsList.some((function(t){return t.element===e}))||e&&t._createObserve(e)}))}))})),Ue.document.body&&this.bodyMutationObserver.observe(Ue.document.body,{subtree:!0,childList:!0}))}}),Object.defineProperty(e.prototype,"start",{enumerable:!1,configurable:!0,writable:!0,value:function(e){var t=this,n=this;n.selectorList=e,-1!==["interactive","complete"].indexOf(Ue.document.readyState.toLowerCase())?setTimeout((function(){n.init()}),2e3):Ue.document.onreadystatechange=function(){"interactive"===Ue.document.readyState.toLowerCase()&&setTimeout((function(){n.init()}),2e3)},$e.on(T.ROUTER_CHANGE,(function(){t.init()})),$e.on(T.SESSION_TIMEOUT,(function(){var e;null===(e=t.bodyMutationObserver)||void 0===e||e.disconnect()}))}}),Object.defineProperty(e,"DEBOUNCE_SECONDS",{enumerable:!0,configurable:!0,writable:!0,value:1e3}),Object.defineProperty(e,"MAX_SEND_SELECTORS_LENGTH",{enumerable:!0,configurable:!0,writable:!0,value:20}),e}(),ur=new cr;function sr(e){var t=history[e];return function(){var n=t.apply(this,arguments);try{var i=new Vn(e,{bubbles:!1,cancelable:!1,detail:{}});i&&(i.arguments=arguments,Wn(i,Ue))}catch(e){}return n}}function pr(){return ge(b,Ue)}function dr(){return ge(m)}var fr,hr,vr=function(){function e(){Object.defineProperty(this,"pageSended",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.pageSended=!1}return Object.defineProperty(e.prototype,"_isNV",{enumerable:!1,configurable:!0,writable:!0,value:function(){Pt(),vt("nid",1),Ve.multiLinkTag?Lt():(vt("visitRef",k(Ve.ref,!1)),We("isNV",!Pn()))}}),Object.defineProperty(e.prototype,"_isSearchEngine",{enumerable:!1,configurable:!0,writable:!0,value:function(){Ve.multiLinkTag?Lt():(vt("visitRef",k(Ve.ref,!1)),We("isNV",!Pn()))}}),Object.defineProperty(e.prototype,"_isReturnVisit",{enumerable:!1,configurable:!0,writable:!0,value:function(){var e;Ve.multiLinkTag?Lt():(We("isNV",!Pn()&&this._getIsNV()),vt(["pvn","visitRef"],[Ve.isNV?0:null!==(e=St())&&void 0!==e?e:1,Ve.isNV?k(Ve.ref,!1):jt()]))}}),Object.defineProperty(e.prototype,"_updateStates",{enumerable:!1,configurable:!0,writable:!0,value:function(){vt("lastActionTime",Ve.multiLinkTag?It():mt())}}),Object.defineProperty(e.prototype,"_sendPage",{enumerable:!1,configurable:!0,writable:!0,value:function(){var e=this;Bn.page(Ve.isNV?"pn":"pv",(function(){e.pageSended=!0}))}}),Object.defineProperty(e.prototype,"_getIsNV",{enumerable:!1,configurable:!0,writable:!0,value:function(){return e=It(),+Ve.visitTime-+e>+Ve.silentTime||1===yt();var e}}),Object.defineProperty(e.prototype,"start",{enumerable:!1,configurable:!0,writable:!0,value:function(){this[0===Et()?"_isNV":"_isReturnVisit"](),this._updateStates(),($n()||Un()||pr()||dr()||Hn()||Be.isExcess||!In())&&(this._sendPage(),Ve.multiDomainFlag&&("complete"===Ue.document.readyState?Nt():ce(Ue,"load",(function(){Nt()}))),kn(),function(){history.pushState=sr("pushState"),history.replaceState=sr("replaceState");var e=function(){return Be.watchRouterHashChange?Ue.location.href:(void 0===(e=Ue)&&(e=window),_e(e.location.protocol+"//"+e.location.host+e.location.pathname+e.location.search));var e};if("onpopstate"in Ue){var t=e(),n=D((function(){var n=e();"beforeunload"!==history.state&&"back"!==history.state&&t!==n&&(t=n,$e.emit(T.ROUTER_CHANGE))}),500);ue(Ue,"popstate",n),ce(Ue,"popstate",n),ue(Ue,"pushState",n),ce(Ue,"pushState",n),ue(Ue,"replaceState",n),ce(Ue,"replaceState",n),Be.watchRouterHashChange&&(ue(Ue,"hashchange",n),ce(Ue,"hashchange",n))}}(),function(){var e,t,n="/components/event/foreign/dest/event.js";try{var i=Ue.document.referrer||Ue.name||"",r=at("ptengineDomain");if($n())return window[C]=window[C]||["setAccount,".concat(Be.sid)],(r=i&&"string"==typeof(t=i)&&/^https?:\/\/(.*\.(ptengine|ptmind).(com|cn|jp)|localhost).*/gim.test(t)&&/^http[s]?:\/\/((?!datatest|devx|x).)+\.(miapex|ptengine|ptmind)\.(com|jp|cn)/gim.test(t)&&(null===(e=null==i?void 0:i.match(/https?:\/\/([^\/]+)/i))||void 0===e?void 0:e[0])||Ue.name)&&ot("ptengineDomain",r),ee(Ue.document,r+n,!1),!0;if(opener&&r)return window[C]=window[C]||["setAccount,".concat(Be.sid)],ee(Ue.document,r+n,!1),!0}catch(e){}}(),pr()&&function(){var e;if(!window._ptLpoVisualEvent){window._ptLpoVisualEvent={};var t=(null===(e=Ue.location.href)||void 0===e?void 0:e.indexOf("isdev"))>-1?"localhost:8000":"pti.ptengine.com";ee(Ue.document,"".concat(location.protocol,"//").concat(t,"/event/event_entry.js"))}}(),ce(Ue,"onorientationchange",(function(){We("rotationFlag",se(Ue))})),"loading"!==Ue.document.readyState?Bn.performance():ce(Ue,"DOMContentLoaded",(function(){Bn.performance()})))}}),e}(),br=new vr,mr=function(){function e(){Object.defineProperty(this,"locked",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"timer",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"touchmoveFlag",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"formElementTriggerEventType",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"lastFocusDomQueue",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"iframeValue",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"allFocusType",{enumerable:!0,configurable:!0,writable:!0,value:["input","textarea","select","embed"]}),this.locked=!1,this.timer=null,this.touchmoveFlag=!1,this.formElementTriggerEventType=this._getFormElementTriggerEventType(),this.lastFocusDomQueue=[null,null],this.iframeValue=[0,0,""]}return Object.defineProperty(e.prototype,"_getFormElementTriggerEventType",{enumerable:!1,configurable:!0,writable:!0,value:function(){return/windows|win32/i.test(Ue.navigator.userAgent)&&/msie|trident|edge/i.test(Ue.navigator.userAgent)||/(iPhone|iPad|iPod|iOS)/.test(Ue.navigator.userAgent)?"click":"focus"}}),Object.defineProperty(e.prototype,"_bindEvent",{enumerable:!1,configurable:!0,writable:!0,value:function(){var e=this,t=this;ce(Ue.document,"click",(function(e){t._handleDocumentClick(e,Ue.document.documentElement),Ue.document.querySelectorAll(".data-focus").forEach((function(e){e.classList.remove("data-focus")})),K(".data-focus").forEach((function(e){e.classList.remove("data-focus")}))}),!0),ce(Ue.document,"touchstart",(function(e){t._handleTouchstart(e)}),!0),ce(Ue.document,"touchmove",(function(){t._handleTouchmove()}),!0),ce(Ue.document,"touchend",(function(e){t._handleTouchend(e)}),!0),ce(Ue.document,"keydown",(function(t){e._handleKeydownListener(t)}),!0),ce(Ue.document,"keyup",(function(t){e._handleKeyupListener(t)}),!0);var n=Ue.document.readyState.toLowerCase();if("interactive"===n||"complete"===n)this._handleBindIframe();else{var i=function(){t._handleBindIframe(),ue(Ue.document,"DOMContentLoaded",i)};ce(Ue.document,"DOMContentLoaded",i)}}}),Object.defineProperty(e.prototype,"_handleKeydownListener",{enumerable:!1,configurable:!0,writable:!0,value:function(e){var t,n;n=je(t=e),"Enter"===t.key&&"button-close"===n.getAttribute("data-engage-block")&&Qn("Escape"),"Tab"===t.key&&n.classList.remove("data-focus"),ti("keydown",e)&&this._keyboardEnter(e)}}),Object.defineProperty(e.prototype,"_handleKeyupListener",{enumerable:!1,configurable:!0,writable:!0,value:function(e){var t,n;n=je(t=e),"Tab"===t.key&&"PT-EXPERIENCE"===n.tagName&&Qn(t.key,"first"),"Escape"===t.key&&Qn(t.key),"Tab"===t.key&&n.classList.add("data-focus"),ti("keyup",e)&&this._keyboardEnter(e)}}),Object.defineProperty(e.prototype,"_handleTouchstart",{enumerable:!1,configurable:!0,writable:!0,value:function(e){We(["srcElement","mouseCoo"],[je(e),xe(e)])}}),Object.defineProperty(e.prototype,"_handleBindIframe",{enumerable:!1,configurable:!0,writable:!0,value:function(){var e=this;if(function(){var e;return"true"===(null===(e=Fe("setIframe"))||void 0===e?void 0:e[1])}()||"7f21ceb9"===Be.sid)for(var t=Ue.document.getElementsByTagName("iframe"),n=0;n<t.length;n++)t[n].onload=function(n){var i,r=t[n].querySelectorAll("script"),o=t[n].querySelectorAll("iframe");r.forEach((function(e){return e.remove()})),o.forEach((function(e){return e.remove()}));var a=null===(i=t[n].contentWindow)||void 0===i?void 0:i.document;return function(){a.onclick=function(i){var r=ke(t[n]);e.iframeValue[0]=r.left,e.iframeValue[1]=r.top;var o="";try{o=Ae(t[n])}catch(e){}e.iframeValue[2]=encodeURIComponent(o),e._handleDocumentClick(i,a)}}}(n)}}),Object.defineProperty(e.prototype,"_handleTouchmove",{enumerable:!1,configurable:!0,writable:!0,value:function(){this.touchmoveFlag=!0}}),Object.defineProperty(e.prototype,"_handleTouchend",{enumerable:!1,configurable:!0,writable:!0,value:function(e){var t=this;this.touchmoveFlag?this.touchmoveFlag=!1:Ve.mouseCoo.x<=0||Ve.mouseCoo.y<=0||(this._onClick(e),this.locked=!0,this.timer&&clearTimeout(this.timer),this.timer=setTimeout((function(){t.locked=!1}),500))}}),Object.defineProperty(e.prototype,"_handleDocumentClick",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t){if(!Oi(je(e))){var n=function(e,t){var n,i,r=parseInt((e.clientX+Number((n=t,i=(null==n?void 0:n.scrollLeft)||window.pageXOffset,i=isNaN(i)?0:i,parseInt(i.toString(),10)))).toString(),10),o=parseInt((e.clientY+Number(de(t))).toString(),10);return{x:r=isNaN(r)?0:r,y:o=isNaN(o)?0:o}}(e,t);n.x=n.x+this.iframeValue[0],n.y=n.y+this.iframeValue[1],We("mouseCoo",n),this.locked||this._onClick(e)}}}),Object.defineProperty(e.prototype,"_useFocusEvent",{enumerable:!1,configurable:!0,writable:!0,value:function(){var e=this;if("focus"===this.formElementTriggerEventType){var t=Ue.document.readyState.toLowerCase();if("interactive"===t||"complete"===t)this._bindFocusEvent(),this._formTagBindFocus();else{var n=function(){e._bindFocusEvent(),e._formTagBindFocus(),ue(Ue.document,"DOMContentLoaded",n)};ce(Ue.document,"DOMContentLoaded",n)}}}}),Object.defineProperty(e.prototype,"_bindFocusEvent",{enumerable:!1,configurable:!0,writable:!0,value:function(){var e=this;ce(Ue,"focus",(function(t){e.lastFocusDomQueue[1]!==this&&(e.lastFocusDomQueue.push(this),e.lastFocusDomQueue.shift())}))}}),Object.defineProperty(e.prototype,"_isFireFocus",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t){return"Chrome"!==function(e){void 0===e&&(e=window);var t=e.navigator.userAgent,n=-1!==t.indexOf("Firefox"),i=void 0!==window.opr,r=-1!==t.indexOf("Chrome")&&window.chrome,o=-1!==t.indexOf("Safari")&&-1!==t.indexOf("Version");return Z()?"IE":n?"Firefox":i?"Opera":r?"Chrome":o?"Safari":"Unkown"}()||t[0]!==e&&t[0]!==Ue||t[1]!==Ue}}),Object.defineProperty(e.prototype,"_formTagBindFocus",{enumerable:!1,configurable:!0,writable:!0,value:function(){var e=this;this.allFocusType.forEach((function(t){[].slice.call(Ue.document.getElementsByTagName(t)).forEach((function(t){ce(t,"focus",(function(n){if(e._isFireFocus(this,e.lastFocusDomQueue)){var i=xi(n).events;i&&(null==i?void 0:i.length)>0&&Bn.track({events:i}),We(["srcElement","clickActionTime"],[je(n),(new Date).getTime()])}e.lastFocusDomQueue.push(t),e.lastFocusDomQueue.shift()}))}))}))}}),Object.defineProperty(e.prototype,"_applyAutoEvent",{enumerable:!1,configurable:!0,writable:!0,value:function(e){if(Be.autoEvent&&0!==Be.autoEvent.length){var t=function(e,t,n){var i=function(e){for(;e&&"body"!==e.nodeName.toLowerCase();){if("a"===(null==e?void 0:e.nodeName.toLowerCase()))return e;e=Q(e)}return null}(e);if(i){var r="",o="object"==typeof i.href?i.href.animVal:i.href,a=k(o,!1).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/\./g,"%2E"),l=/\.(msi|pdf|apk|ipa|jar|umd|jad|epub|mobi|iso|tar|zip|rar|gzip|gz|dmg|doc|docx|xls|xlsx|csv|ppt|pptx|exe|txt|pdf|key|numbers|pages)/,c=o.match(/mailto:/)?"mailSendings":o.toLowerCase().match(l)?"fileDownloads":0===o.toLowerCase().indexOf("http")?"outboundLinks":"";if(c&&-1!==t.indexOf(c)){if("mailSendings"===c&&(r="Mail_Mailto_".concat(a.toLowerCase())),"fileDownloads"===c){var u=o.toLowerCase().match(l)[1];a=a.replace(/(^https?:\/\/)([^/]+)/i,(function(e){return e.toLowerCase()})),r="Downloads_".concat(u,"_").concat(a)}if("outboundLinks"===c){for(var s=!0,p=0;p<n.length;p++)if(o.toLowerCase().indexOf(n[p])>0){s=!1;break}s&&(a=a.replace(/(^https?:\/\/)([^/]+)/i,(function(e){return e.toLowerCase()})),r="Outbound%20Links_Exit_".concat(a))}}return r}}(e,Be.autoEvent,Ve.domainSet);t&&Bn.track({events:[{eventName:t,eventType:0}]})}}}),Object.defineProperty(e.prototype,"_onClick",{enumerable:!1,configurable:!0,writable:!0,value:function(e){var t,n,i=(new Date).getTime();xn(i)&&An(),Ln(i)&&vt("lastActionTime",i);var r=je(e);if(r){var o=(null===(t=null==r?void 0:r.nodeName)||void 0===t?void 0:t.toLowerCase())||"";if("html"!==o&&!(Ve.srcElement===r&&i-Ve.clickActionTime<c)){var a=ke(r);We(["srcElement","srcElementAbsLeft","srcElementAbsTop"],[r,a.left,a.top]);var l=qe(yt(),i,It()),u=xi(e);this._applyAutoEvent(r),vt("pageList",kt()),We("clickActionTime",i),vt("lastActionTime",i),Cn(),Ge();var s=De(r,Ci(r)),p=s.elementType,d=s.interactionType,f=p+this.iframeValue[2]+k(Ae(r),!1).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/\./g,"%2E"),h=(null==ur?void 0:ur.getElementImpressionInfo(r))||{},v=h.visualEventElementSelector,b=h.isVisualEventElement;if(u&&$e.emit(T.PAGE_ON_CLICK,{event:e,target:r,config:{events:u.events,cssSelector:f,stayTime:l,visualEventElementSelector:v,isVisualEventElement:b,interactionType:d}}),u&&0!==(null===(n=u.events)||void 0===n?void 0:n.length)){if("focus"===this.formElementTriggerEventType&&-1!==this.allFocusType.indexOf(o))return;u.isPopup||Bn.track({events:u.events,cssSelector:f,stayTime:l,visualEventElementSelector:v,interactionType:d})}else Bn.click({cssSelector:f,stayTime:l,visualEventElementSelector:v,isVisualEventElement:b,interactionType:d}),setTimeout((function(){We(["srcElementAbsLeft","srcElementAbsTop"],[0,0])}))}}}}),Object.defineProperty(e.prototype,"_keyboardEnter",{enumerable:!1,configurable:!0,writable:!0,value:function(e){if(!Oi(je(e))){var t=je(e).getBoundingClientRect();t.left,t.right,t.left,t.top,t.bottom,t.top,document.body.scrollLeft||document.documentElement.scrollLeft,document.body.scrollTop||document.documentElement.scrollTop,this.locked||this._onClick(e)}}}),Object.defineProperty(e.prototype,"start",{enumerable:!1,configurable:!0,writable:!0,value:function(){$e.on(T.ROUTER_CHANGE,(function(){We("trackEventList",ze())})),this._bindEvent(),this._useFocusEvent()}}),e}(),gr=new mr,yr=new(function(){function e(){Object.defineProperty(this,"timeB",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"timeN",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"tmpTime",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"scrollTimer",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.timeB=Ve.visitTime,this.timeN=0,this.tmpTime=0,this.scrollTimer=0}return Object.defineProperty(e.prototype,"_bindEvent",{enumerable:!1,configurable:!0,writable:!0,value:function(){var e=this;ce(Ue,"scroll",(function(t){return e._handleScroll(t)}),!0)}}),Object.defineProperty(e.prototype,"_scrollDomBindEvent",{enumerable:!1,configurable:!0,writable:!0,value:function(){var e=this;X("[pt-scroll-el]",Ue).forEach((function(t){t&&ce(t,"scroll",(function(t){return e._handleScroll(t)}),!0)}))}}),Object.defineProperty(e.prototype,"_isScrolling",{enumerable:!1,configurable:!0,writable:!0,value:function(e){var t,n=!0;return(0===Ue.document.body.clientHeight||de(e)<=1||de(e)+1>=(t=parseInt(e.scrollHeight.toString(),10),isNaN(t)?0:t))&&(n=!1),n}}),Object.defineProperty(e.prototype,"_handleScroll",{enumerable:!1,configurable:!0,writable:!0,value:function(e){var t,n=je(e),i=(null==n?void 0:n.documentElement)||n,r=(new Date).getTime();if(xn(r)&&An(),Ln(r)&&vt("lastActionTime",r),We("scrolledFlag",!0),this.timeN=r,this.tmpTime=this.timeN-this.timeB,this.tmpTime<1e3)return this.timeB=this.timeN,this.scrollTimer&&clearTimeout(this.scrollTimer),void(this.scrollTimer=setTimeout((function(){t=qe(yt(),r,It()),Bn.scroll(t,!0)}),1e3));t=qe(yt(),r,It()),vt("lastActionTime",r),vt("pageList",kt()),Cn(),Ge(i),this._isScrolling(i)&&Bn.scroll(t),this.timeB=this.timeN}}),Object.defineProperty(e.prototype,"start",{enumerable:!1,configurable:!0,writable:!0,value:function(){this.timeB=mt(),this._bindEvent(),-1!==["interactive","complete"].indexOf(Ue.document.readyState.toLowerCase())?this._scrollDomBindEvent():ce(Ue.document,"DOMContentLoaded",this._scrollDomBindEvent)}}),e}()),wr=new(function(){function e(){Object.defineProperty(this,"_ver",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_defaultArr",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"lastTrackEventTime",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this._ver="1.0.1",this._defaultArr=[],this.lastTrackEventTime=(new Date).getTime()-1e4}return Object.defineProperty(e.prototype,"_checkTrackEventTime",{enumerable:!1,configurable:!0,writable:!0,value:function(){var e=(new Date).getTime();return!(this.lastTrackEventTime+1e3>e||(e-this.lastTrackEventTime>1e4?(this.lastTrackEventTime=e-9e3,0):(this.lastTrackEventTime+=1e3,0)))}}),Object.defineProperty(e.prototype,"_addPVN",{enumerable:!1,configurable:!0,writable:!0,value:function(){vt("pvn",+St()+1)}}),Object.defineProperty(e.prototype,"_handlePush",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t){var n=e.split(",");switch(n[0]){case"setPVTag":this._setPTTag(n);break;case"setCustomEvent":this._setCustomEvent(t);break;case"setTrackEvent":this._setTrackEvent(n);break;case"setCrossDomainLink":this._setCrossDomainLink(n[1])}}}),Object.defineProperty(e.prototype,"_setPTTag",{enumerable:!1,configurable:!0,writable:!0,value:function(e){try{var t="";if("replace"===e[2])t=e[1];else{var n=e[1]?e[1]:"";t=Ve.initPage+"#"+n}Ct(t),We("page",t),Bn.page("vpv")}catch(e){}}}),Object.defineProperty(e.prototype,"_setCustomEvent",{enumerable:!1,configurable:!0,writable:!0,value:function(e){try{var t=e.eventName?e.eventName:"";if(!t)return;this._addPVN(),Bn.track({events:[{eventName:t,eventType:0}]})}catch(e){}}}),Object.defineProperty(e.prototype,"_setTrackEvent",{enumerable:!1,configurable:!0,writable:!0,value:function(e){try{if("string"==typeof e[6]&&!Ue.location.href.replace(/\/$/,"").match(new RegExp(e[6].replace(/^\//,"").replace(/[\\]?[\\]?\/[\.]?[\*]?[\$]?$/,""))))return;void 0===e[3]&&(e[3]=""),void 0===e[4]&&(e[4]="0"),e[4]=e[4].replace(/\./g,"e");for(var t=1;t<5;t++)e[t]=x(e[t]);for(e[1]=e[1].substring(0,200),e[2]=e[2].substring(0,200),e[3]=e[3].substring(0,500),e[4]=e[4].substring(0,10),t=1;t<5;t++)if(e[t]=k(e[t]).replace(/\./g,"%2E"),e[t].indexOf(".")>-1){var n=e[t].split(".");e[t]=n.join("%2E")}if("string"==typeof e[7]);else{if(!this._checkTrackEventTime())return;this._addPVN();var i=e[3];i&&Bn.track({events:[{eventName:i,eventType:0}]})}}catch(e){}}}),Object.defineProperty(e.prototype,"_setCrossDomainLink",{enumerable:!1,configurable:!0,writable:!0,value:function(e){We("crossDomainLink","allManual"===e?"allManual":"halfManual"===e&&"halfManual")}}),Object.defineProperty(e.prototype,"_init",{enumerable:!1,configurable:!0,writable:!0,value:function(){if(this._defaultArr.length>0)for(var e=0,t=this._defaultArr.length;e<t;e++)if(this._defaultArr[e]&&"object"==typeof this._defaultArr[e]&&this._defaultArr[e-1])this._defaultArr[e]="";else{var n=this._defaultArr[e].indexOf(",");this._execPrc(this._defaultArr[e].slice(0,n),this._defaultArr[e].slice(n+1))}}}),Object.defineProperty(e.prototype,"_execPrc",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t){switch(e){case"setCamParam":We("camParamAry",t.split(","));break;case"setURL":We("urlMark",t);break;case"setVPV":We("vUrl",t.toLowerCase().split(",")[0]),We("page",Je()),We("initPage",Je());break;case"setVPT":We("vTitle",t);break;case"setCrossDomainLink":this._setCrossDomainLink(t)}}}),Object.defineProperty(e.prototype,"start",{enumerable:!1,configurable:!0,writable:!0,value:function(){var e=this;window[C]||(window[C]=["setAccount,".concat(Be.sid)]),this._defaultArr=(window[C]||[]).map((function(e){return/setpvtag/i.test(e)&&(e=e.replace(/setpvtag/i,"setVPV")),e})),window[C].push=function(t,n){return e._handlePush(t,n)},this._init()}}),e}()),_r=function(){function e(){var e=this;Object.defineProperty(this,"enableIntegrationGA4",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"sendCache",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"waitList",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"gaIntervalID",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"GA_BUTTON_NAME_MAX_LENGTH",{enumerable:!0,configurable:!0,writable:!0,value:50}),this.enableIntegrationGA4=!1,this.sendCache={},this.waitList=[],this.gaIntervalID=null,$e.on(T.ROUTER_CHANGE,(function(){e.sendCache={}})),this._init()}return Object.defineProperty(e.prototype,"_init",{enumerable:!1,configurable:!0,writable:!0,value:function(){var e;this.enableIntegrationGA4=Be.integration&&-1!==(null===(e=Be.integration.find((function(e){return"GA4"===e.platform})))||void 0===e?void 0:e.properties.indexOf("experience"))}}),Object.defineProperty(e.prototype,"_sendGAEvent",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t){var n=this;window.gtag&&"function"==typeof window.gtag?window.gtag("event",e,t):-1!==this.gaIntervalID&&(this.waitList.push({type:"ga4",eventName:e,properties:t}),null===this.gaIntervalID&&(this.gaIntervalID=this._generatorInterval({checkFn:function(){return!!window.gtag&&"function"==typeof window.gtag},callbackFn:function(){return n._consumptionGaWaitingQueue()},rejectFn:function(){n.gaIntervalID=-1,n.waitList=[]}})))}}),Object.defineProperty(e.prototype,"_consumptionGaWaitingQueue",{enumerable:!1,configurable:!0,writable:!0,value:function(){for(var e=this.waitList.length-1;e>=0;e--){var t=this.waitList[e],n=t.type,i=t.eventName,r=t.properties;"ga4"===n&&(this._sendGAEvent(i,r),this.waitList.splice(e,1))}}}),Object.defineProperty(e.prototype,"_checkHasCache",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t,n){var i,r,o,a,l;return(null===(r=null===(i=this.sendCache)||void 0===i?void 0:i[e])||void 0===r?void 0:r[t])&&-1!==(null===(l=null===(a=null===(o=this.sendCache)||void 0===o?void 0:o[e])||void 0===a?void 0:a[t])||void 0===l?void 0:l.indexOf(n))}}),Object.defineProperty(e.prototype,"_addCache",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t,n){var i,r;(null===(i=this.sendCache)||void 0===i?void 0:i[e])||(this.sendCache[e]={}),(null===(r=this.sendCache[e])||void 0===r?void 0:r[t])||(this.sendCache[e][t]=[]),-1===this.sendCache[e][t].indexOf(n)&&this.sendCache[e][t].push(n)}}),Object.defineProperty(e.prototype,"_generatorInterval",{enumerable:!1,configurable:!0,writable:!0,value:function(e){var t,n,i=0,r=null!==(t=e.delay)&&void 0!==t?t:200,o=null!==(n=e.maxWaitTime)&&void 0!==n?n:3e4,a=setInterval((function(){var t;e.checkFn()?(e.callbackFn(),clearInterval(a)):i>o&&(null===(t=e.rejectFn)||void 0===t||t.call(e),clearInterval(a)),i+=r}),r);return a}}),Object.defineProperty(e.prototype,"sendExperienceEventToGA",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t){var n=t.experienceType,i=t.experienceId,r=t.versionId,o=t.experienceName,a=t.versionName;if(this.enableIntegrationGA4&&"REDIRECT"!==n&&!this._checkHasCache(i,r,e)){var l="",c={};"view"===e&&(l="pt_experience_impression",c={pt_experience_name:o,pt_experience_version_name:a}),"close"===e&&(l="pt_experience_close",c={pt_experience_name:o,pt_experience_version_name:a}),"click"===e&&(l="pt_experience_click",c={pt_experience_name:o,pt_experience_version_name:a}),l&&(this._sendGAEvent(l,c),this._addCache(i,r,e))}}}),e}(),Or=new _r,Tr=new(function(){function e(){Object.defineProperty(this,"area",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"widgetScript",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.area="en",this.widgetScript=null}return Object.defineProperty(e.prototype,"getWidgetLocalData",{enumerable:!1,configurable:!0,writable:!0,value:function(){var e=[];try{var t=at(_);t&&(e=JSON.parse(t))}catch(e){}return e}}),Object.defineProperty(e.prototype,"getWidgetSessionData",{enumerable:!1,configurable:!0,writable:!0,value:function(){var e=[];try{var t=sessionStorage.getItem(_);t&&(e=JSON.parse(t))}catch(e){}return e}}),Object.defineProperty(e.prototype,"setWidgetFlagToLocalStorage",{enumerable:!1,configurable:!0,writable:!0,value:function(e){var t=this.getWidgetLocalData(),n=t.indexOf(Be.sid);"add"===e?-1===n&&t.push(Be.sid):-1!==n&&t.splice(n,1),ot(_,JSON.stringify(t))}}),Object.defineProperty(e.prototype,"setWidgetCloseFlagToSessionStorage",{enumerable:!1,configurable:!0,writable:!0,value:function(e){try{var t=this.getWidgetSessionData(),n=t.indexOf(Be.sid);"add"===e?-1===n&&t.push(Be.sid):-1!==n&&t.splice(n,1),sessionStorage.setItem(_+"_close",JSON.stringify(t))}catch(e){}}}),Object.defineProperty(e.prototype,"loadWidgetScript",{enumerable:!1,configurable:!0,writable:!0,value:function(){this.widgetScript||(this.widgetScript=ee(Ue.document,"".concat(location.protocol,"//pti.ptengine.com/widget/inject.js?area=").concat(this.area,"&sid=").concat(Be.sid)))}}),Object.defineProperty(e.prototype,"openWidget",{enumerable:!1,configurable:!0,writable:!0,value:function(){this.loadWidgetScript(),this.setWidgetFlagToLocalStorage("add"),this.setWidgetCloseFlagToSessionStorage("remove")}}),Object.defineProperty(e.prototype,"closeWidget",{enumerable:!1,configurable:!0,writable:!0,value:function(e){"local"===e?this.setWidgetFlagToLocalStorage("remove"):this.setWidgetCloseFlagToSessionStorage("add")}}),Object.defineProperty(e.prototype,"start",{enumerable:!1,configurable:!0,writable:!0,value:function(e){$n()||Un()||pr()||dr()||Hn()||(this.area=ve(e),-1!==this.getWidgetLocalData().indexOf(Be.sid)&&(this.loadWidgetScript(),this.setWidgetFlagToLocalStorage("add")))}}),e}());if(Bn.setExperience(lr),Array.prototype.find||(Array.prototype.find=function(e){return e&&(this.filter(e)||[])[0]}),function(){var e,t,n,i,r,o=fe(Ue,Ue.document.documentElement),a=se(Ue),l=function(){var e,t=[],n="",i=Be.domain&&Be.domain.length>1,r=function(e){for(var t=e.split(".").reverse(),n=[],i=1;i<t.length;i++){var r=t.slice(0,i+1).reverse().join(".");n.push(r)}return n}(Ue.location.hostname);Be.domain.sort((function(e,t){return e.replace(/^https?:\/\//,"").length>t.replace(/^https?:\/\//,"").length?1:-1}));for(var o=0;o<Be.domain.length;o++)t.push(Be.domain[o].replace(/^https?:\/\//,"")),Be.domain[o].match(/https?:\/\//)&&(null===(e=Be.domain[o].match(/https?:\/\//))||void 0===e?void 0:e[0])!==Ue.location.protocol+"//"||-1!==r.indexOf(Be.domain[o].replace(/^https?:\/\//,""))&&(n=Be.domain[o].replace(/^https?:\/\//,""));return Be.crossAnyDomain&&!n&&(n=function(e){var t=/[a-z0-9][a-z0-9-]+\.[a-z.]{2,6}$/i,n=e.split("."),i=n[n.length-1];(i.length>4||"com"===i||"org"===i)&&(t=/[a-z0-9][a-z0-9-]*\.[a-z]+$/i);var r=e.match(t);return r?r[0]:""}(Ue.location.hostname),t.push(n)),{domain:n,domainSet:t,multiDomainFlag:i}}(),c=l.domain,u=l.domainSet,s=l.multiDomainFlag;We("domain",c),We("page",Je()),We("initPage",Je()),We("domainSet",u),We("multiDomainFlag",s),We("silentTime",function(){var e,t,n,i,r=ne();return 1e3*(r===O.PC||r===O.TABLET?null!==(t=null===(e=Be.silentTimes)||void 0===e?void 0:e.pc)&&void 0!==t?t:30:null!==(i=null===(n=Be.silentTimes)||void 0===n?void 0:n.mobile)&&void 0!==i?i:5)*60}()),We("trackEventList",ze()),We("visualEventSelectors",(e=[],Be.ptiEventList.forEach((function(t){var n=he(x(t.isOnly?t.selfSelector:t.sameSelector));e.find((function(e){return e===n}))||e.push(n)})),e)),We("ref",Ye(t=Ue.document.referrer)?"":t),We("terminalType",ne(Ue)),We("rotationFlag",a),We("yMax",o),We("yMaxP",1===a?o:0),We("yMaxM",1!==a?o:0),We("visitTime",He.getTime()),We("multiLinkTag",(n=Ue.location.href,i=new RegExp(w),(null==(r=n.match(i))?void 0:r[2])||""))}(),Yn.preInspection(),Yn.ready&&!Yn.interrupted){var Pr=Ke();Tr.start(document.currentScript),wr.start(),qn.init({antiFlickerObj:Pr,scriptElement:document.currentScript}),fr=At(Be.sid),hr=He.getTime(),ft.profileId=Be.sid,ft.deviceId=Pt(),ft.sessionId=Ot(),ft.accountId=Tt()||"",ft.pageId=Ct(Ve.page),ft.pageViewId=_t(!0),ft.pageList=wt()||"",ft.vn=Number(fr.vn)||0,ft.pvn=Number(fr.pvn)||0,ft.lastActionTime=Number(fr.lastActionTime)||hr,ft.nid=Number(fr.nid)||0,ft.toFlag=0,ft.visitRef=jt(),ft.preSessionId=fr.preSessionId||"",ft.preSessionLastSendTime=Number(fr.preSessionLastSendTime)||0,Dt(),dt=!0,ur.start(Ve.visualEventSelectors),gr.start(),yr.start(),br.start()}}();
